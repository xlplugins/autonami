(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{124:function(e,t,n){"use strict";var r=n(0),a=n(4),c=n(5),o=n(8),i=n.n(o),l=n(15),u=n.n(l),s=(n(134),n(160));function f(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t,n,c,o=y(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={options:[]},t.appendFreeTextSearch=t.appendFreeTextSearch.bind(j(t)),t.fetchOptions=t.fetchOptions.bind(j(t)),t.updateSelected=t.updateSelected.bind(j(t)),t}return t=i,(n=[{key:"getAutocompleter",value:function(){return this.props.autocompleter&&"object"===p(this.props.autocompleter)?this.props.autocompleter:{}}},{key:"getFormattedOptions",value:function(e,t){var n=this.getAutocompleter(),r=[];return e.forEach((function(e){var a={key:n.getOptionIdentifier(e),label:n.getOptionLabel(e,t),keywords:n.getOptionKeywords(e).filter(Boolean),value:e};r.push(a)})),r}},{key:"fetchOptions",value:function(e,t){var n=this;return this.props.bwfEnableEmptySearch||t?this.getAutocompleter().options(t).then(function(){var e,r=(e=regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getFormattedOptions(r,t),n.setState({options:a}),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){m(c,r,a,o,i,"next",e)}function i(e){m(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}()):[]}},{key:"updateSelected",value:function(e){var t=this.props.onChange,n=this.getAutocompleter();t(e.map((function(e){return!e.notFound&&(e.value?n.getOptionCompletion(e.value):e)})).filter(Boolean))}},{key:"appendFreeTextSearch",value:function(e,t){var n=this.props.allowFreeTextSearch;if(!t||!t.length)return[];if(!n)return e.length>0?e:[{label:Object(a.__)("Not Found","wp-marketing-automations-crm"),key:"",notFound:!0}];var r=this.getAutocompleter();return[].concat(f(r.getFreeTextOptions(t,e)),f(e))}},{key:"render",value:function(){var e=this.getAutocompleter(),t=this.props,n=t.className,a=t.inlineTags,c=t.placeholder,o=t.selected,i=t.showClearButton,l=t.staticResults,f=t.disabled,b=(t.multiple,this.state.options),m=e.inputType?e.inputType:"text";return Object(r.createElement)("div",null,Object(r.createElement)(s.a,{className:u()("bwf-search",n,{"is-static-results":l}),disabled:f,hideBeforeSearch:!1,inlineTags:a,isSearchable:!0,label:c,getSearchExpression:e.getSearchExpression,multiple:!0,placeholder:c,onChange:this.updateSelected,onFilter:this.appendFreeTextSearch,onSearch:this.fetchOptions,options:b,remove:this.props.onRemoveTag,searchDebounceTime:500,searchInputType:m,selected:o,showClearButton:i,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm}))}}])&&d(t.prototype,n),c&&d(t,c),i}(r.Component);h.propTypes={allowFreeTextSearch:i.a.bool,className:i.a.string,onChange:i.a.func,autocompleter:i.a.object,placeholder:i.a.string,selected:i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,label:i.a.string})),inlineTags:i.a.bool,showClearButton:i.a.bool,staticResults:i.a.bool,disabled:i.a.bool,bwfMaintainSingleTerm:i.a.bool,bwfEnableEmptySearch:i.a.bool},h.defaultProps={allowFreeTextSearch:!1,onChange:c.noop,selected:[],inlineTags:!1,showClearButton:!1,staticResults:!1,disabled:!1,bwfMaintainSingleTerm:!1,bwfEnableEmptySearch:!1},t.a=h},125:function(e,t,n){"use strict";var r=n(52),a=n.n(r),c=n(0),o=n(4),i=(n(118),n(144));var l=n(147);function u(e,t){var n=e.precision,r=void 0===n?null:n,a=e.decimalSeparator,c=void 0===a?".":a,o=e.thousandSeparator,u=void 0===o?",":o;if("number"!=typeof t&&(t=parseFloat(t)),isNaN(t))return"";if(r=parseInt(r),isNaN(r)){var s=t.toString().split("."),f=Object(i.a)(s,2)[1];r=f?f.length:0}return l(t,r,c,u)}var s=n(98),f=n.n(s);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t;function n(e){var n=m(m({},{code:"USD",symbol:"$",symbolPosition:"left",thousandSeparator:",",decimalSeparator:".",precision:2}),e);t={code:n.code.toString(),symbol:n.symbol.toString(),symbolPosition:n.symbolPosition.toString(),decimalSeparator:n.decimalSeparator.toString(),priceFormat:a(n),thousandSeparator:n.thousandSeparator.toString(),precision:parseInt(n.precision,10)}}function r(e){var n=u(t,e);if(""===n)return n;var r=t,a=r.priceFormat,c=r.symbol;return Object(o.sprintf)(a,c,n)}function a(e){if(e.priceFormat)return t=e.priceFormat.toString(),(n=document.createElement("DIV")).innerHTML=t,n.textContent||n.innerText||"";var t,n;switch(e.symbolPosition){case"left":return"%1$s%2$s";case"right":return"%2$s%1$s";case"left_space":return"%1$s&nbsp;%2$s";case"right_space":return"%2$s&nbsp;%1$s"}return"%1$s%2$s"}return n(e),{getCurrencyConfig:function(){return m({},t)},setCurrency:n,formatAmount:r,formatCurrency:function(e){return f()("Currency().formatCurrency",{version:"5.0.0",alternative:"Currency().formatAmount",plugin:"WooCommerce",hint:"`formatAmount` accepts the same arguments as formatCurrency"}),r(e)},getPriceFormat:a,formatDecimal:function(e){if("number"!=typeof e&&(e=parseFloat(e)),Number.isNaN(e))return 0;var n=t.precision;return Math.round(e*Math.pow(10,n))/Math.pow(10,n)},formatDecimalString:function(e){if("number"!=typeof e&&(e=parseFloat(e)),Number.isNaN(e))return"";var n=t.precision;return e.toFixed(n)},render:function(e){return"number"!=typeof e&&(e=parseFloat(e)),e<0?Object(c.createElement)("span",{className:"is-negative"},r(e)):r(e)}}}},134:function(e,t,n){},141:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(142);function a(e,t){if(e){if("string"==typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},142:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(141);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},147:function(e,t,n){"use strict";e.exports=function(e,t,n,r){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var a=isFinite(+e)?+e:0,c=isFinite(+t)?Math.abs(t):0,o=void 0===r?",":r,i=void 0===n?".":n,l="";return(l=(c?function(e,t){if(-1===(""+e).indexOf("e"))return+(Math.round(e+"e+"+t)+"e-"+t);var n=(""+e).split("e"),r="";return+n[1]+t>0&&(r="+"),(+(Math.round(+n[0]+"e"+r+(+n[1]+t))+"e-"+t)).toFixed(t)}(a,c).toString():""+Math.round(a)).split("."))[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(l[1]||"").length<c&&(l[1]=l[1]||"",l[1]+=new Array(c-l[1].length+1).join("0")),l.join(i)}},150:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){if(!("string"==typeof e||e instanceof String)){var t=r(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}}n.d(t,"a",(function(){return a}))},158:function(e,t,n){},159:function(e,t,n){var r=n(211),a=n(183),c=n(229),o=n(231),i=n(235),l=n(236),u=n(255);e.exports=function(e,t,n){if((e=u(e))&&(n||void 0===t))return a(e);if(!e||!(t=r(t)))return e;var s=l(e),f=l(t),b=i(s,f),m=o(s,f)+1;return c(s,b,m).join("")}},173:function(e,t,n){"use strict";var r=n(0),a=n(15),c=n.n(a),o=n(18),i=n(8),l=n.n(i),u=n(320),s=n.n(u),f=n(5),b=n(321),m=n.n(b),p=(n(184),function(e){var t,n,a,i,l=e.alt,u=e.title,b=e.size,p=e.user,d=e.className,O=c()("bwf-gravatar",d,{"is-placeholder":!p}),y=l||p&&(p.display_name||p.name)||"",g="https://www.gravatar.com/avatar/0?s="+b+"&d=blank";return p&&(t=Object(f.isString)(p)?(i=p,"https://www.gravatar.com/avatar/"+m()(i)):p.avatar_URLs[96],n=s.a.parse(t),(a=Object(o.parse)(n.query)).s=b,a.d="blank",n.search=Object(o.stringify)(a),g=s.a.format(n)),Object(r.createElement)("img",{alt:y,title:u,className:O,src:g,width:b,height:b})});p.propTypes={user:l.a.oneOfType([l.a.object,l.a.string]),alt:l.a.string,title:l.a.string,size:l.a.number,className:l.a.string},p.defaultProps={size:60},t.a=p},179:function(e,t,n){var r=n(232),a=n(233),c=n(234);e.exports=function(e,t,n){return t==t?c(e,t,n):r(e,a,n)}},181:function(e,t,n){"use strict";var r=n(0),a=n(7),c=n(5),o=n(159),i=n.n(o),l=(n(200),function(e){var t=e.first_name,n=e.last_name;return Object(r.createElement)("div",{className:"bwf-c-name-initials"},Object(r.createElement)("span",null,Object(c.isEmpty)(i()(t+" "+n))?"-":Object(a.F)(t,n)))});l.defaultProps={first_name:"",last_name:""};var u=l,s=n(32),f=n(4),b=n(115),m=n.n(b),p=(n(201),n(173)),d=function(e){var t=e.dateText,n=e.date,c=e.contact,o=c.f_name,l=void 0===o?"":o,b=c.l_name,d=void 0===b?"":b,O=(c.id,c.creation_date),y=c.email,g=e.hideJoiningDate,j=void 0!==g&&g,v=e.lowerText,h=Object(a.Y)([l,d]," "),w=Object(a.B)(n||O);return Object(r.createElement)(s.a,{className:"bwf-c-contact-basic-info-cell",justify:"flex-start"},Object(r.createElement)(s.c,{className:"bwf-c-avatar"},y&&Object(r.createElement)(p.a,{user:y,size:40}),Object(r.createElement)(u,{first_name:l,last_name:d})),Object(r.createElement)(s.c,null,Object(r.createElement)(s.a,{style:{flexDirection:"column"},align:"flex-start"},Object(r.createElement)(s.c,{style:{padding:0}},Object(r.createElement)("span",{className:"bwf-c-contact-name"},m()(i()(h))?Object(f.__)("-","wp-marketing-automations-crm"):h)),!j&&w&&Object(r.createElement)(s.c,null,Object(r.createElement)("span",{className:"bwf-c-contact-creation-date"},t||Object(f.__)("Joined","wp-marketing-automations-crm")," ",v||w)))))};d.defaultProps={contact:{f_name:"",l_name:"",id:0,creation_date:""}};t.a=d},183:function(e,t,n){var r=n(198),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},184:function(e,t,n){},185:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}n.d(t,"a",(function(){return r}))},198:function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},199:function(e,t,n){"use strict";var r=n(0),a=n(9),c=n(15),o=n.n(c),i=n(5),l=n(8),u=n.n(l),s=(n(158),function(e){var t=e.disabled,n=e.value,c=e.onChange,l=e.dateFormat,u=e.label,s=e.describedBy,f=e.error,b=e.onFocus,m=e.onKeyDown,p=e.errorPosition,d=o()("bwf-calendar-input",{"is-empty":0===n.length,"is-error":f}),O=Object(i.uniqueId)("_woo-dates-input");return Object(r.createElement)("div",{className:d},Object(r.createElement)("input",{type:"text",className:"bwf-calendar-input-text",value:n,onChange:c,"aria-label":u,id:O,"aria-describedby":"".concat(O,"-message"),placeholder:l.toLowerCase(),onFocus:b,onKeyDown:m,disabled:t}),f&&Object(r.createElement)(a.Popover,{className:"bwf-calendar-input-error",focusOnMount:!1,position:p},f),Object(r.createElement)(a.Dashicon,{icon:"calendar"}),Object(r.createElement)("p",{className:"screen-reader-text",id:"".concat(O,"-message")},f||s))});s.propTypes={disabled:u.a.bool,value:u.a.string,onChange:u.a.func.isRequired,dateFormat:u.a.string.isRequired,label:u.a.string.isRequired,describedBy:u.a.string.isRequired,error:u.a.string,errorPosition:u.a.string,onFocus:u.a.func,onKeyDown:u.a.func},s.defaultProps={disabled:!1,onFocus:function(){},errorPosition:"bottom center",onKeyDown:i.noop},t.a=s},200:function(e,t,n){},201:function(e,t,n){},222:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(150),a=n(185),c={ignore_whitespace:!1};function o(e,t){return Object(r.a)(e),0===((t=Object(a.a)(t,c)).ignore_whitespace?e.trim().length:e.length)}},229:function(e,t,n){var r=n(230);e.exports=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:r(e,t,n)}},230:function(e,t){e.exports=function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var c=Array(a);++r<a;)c[r]=e[r+t];return c}},231:function(e,t,n){var r=n(179);e.exports=function(e,t){for(var n=e.length;n--&&r(t,e[n],0)>-1;);return n}},232:function(e,t){e.exports=function(e,t,n,r){for(var a=e.length,c=n+(r?1:-1);r?c--:++c<a;)if(t(e[c],c,e))return c;return-1}},233:function(e,t){e.exports=function(e){return e!=e}},234:function(e,t){e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},235:function(e,t,n){var r=n(179);e.exports=function(e,t){for(var n=-1,a=e.length;++n<a&&r(t,e[n],0)>-1;);return n}},236:function(e,t,n){var r=n(237),a=n(238),c=n(239);e.exports=function(e){return a(e)?c(e):r(e)}},237:function(e,t){e.exports=function(e){return e.split("")}},238:function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},239:function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",c="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+a+")"+"?",u="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[c,o,i].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),s="(?:"+[c+r+"?",r,o,i,n].join("|")+")",f=RegExp(a+"(?="+a+")|"+s+u,"g");e.exports=function(e){return e.match(f)||[]}},312:function(e,t,n){"use strict";var r=n(0),a=n(4),c=n(9),o=n(5),i=n(8),l=n.n(i),u=n(171),s=n.n(u),f=n(110),b=n.n(f),m=(n(359),n(17)),p=n(165),d=n(19),O=n(15),y=n.n(O);function g(e){var t="";return function e(n){if(Object(o.isString)(n)||Object(o.isNumber)(n))t+=n;else if(Object(o.isArray)(n))n.forEach(e);else if(n&&n.props){var r=n.props.children;Object(o.isArray)(r)?r.forEach(e):e(r)}}(e),t}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(l,e);var t,n,a,i=E(l);function l(e){var t,n=e.filter,r=e.config,a=e.onFilterChange;v(this,l),t=i.apply(this,arguments);var c=r.input.options;return t.state={options:c},t.updateOptions=t.updateOptions.bind(S(t)),!c&&r.input.getOptions&&r.input.getOptions().then(t.updateOptions).then((function(e){if(!n.value){var t=Object(m.c)(r,e);a("value",t)}})),t}return t=l,(n=[{key:"updateOptions",value:function(e){return this.setState({options:e}),e}},{key:"getScreenReaderText",value:function(e,t){if(""===e.value)return"";var n=Object(o.find)(t.rules,{value:e.rule})||{},a=Object(o.find)(t.input.options,{value:e.value})||{};return g(b()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,a.label),rule:Object(r.createElement)(r.Fragment,null,n.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,a=e.filter,i=e.onFilterChange,l=e.isEnglish,u=this.state.options,s=a.rule,f=a.value,m=n.labels,p=n.rules,d=b()({mixedString:m.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(c.SelectControl,{className:y()(t,"bwf-filters-advanced-rule"),options:p,value:s,onChange:Object(o.partial)(i,"rule"),"aria-label":m.rule}),filter:u?Object(r.createElement)(c.SelectControl,{className:y()(t,"bwf-filters-advanced-input"),options:u,value:f,onChange:Object(o.partial)(i,"value"),"aria-label":m.filter}):Object(r.createElement)(c.Spinner,null)}}),O=this.getScreenReaderText(a,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},m.add||""),Object(r.createElement)("div",{className:y()("bwf-filters-advanced-fieldset",{"is-english":l})},d),O&&Object(r.createElement)("span",{className:"screen-reader-text"},O))}}])&&h(t.prototype,n),a&&h(t,a),l}(r.Component);C.propTypes={config:l.a.shape({labels:l.a.shape({rule:l.a.string,title:l.a.string,filter:l.a.string}),rules:l.a.arrayOf(l.a.object),input:l.a.object}).isRequired,filter:l.a.shape({key:l.a.string,rule:l.a.string,value:l.a.string}).isRequired,onFilterChange:l.a.func.isRequired};var x=C,N=n(124);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var a=L(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?q(e):t}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(l,e);var t,n,a,i=B(l);function l(e){var t,n=e.filter,r=e.config,a=e.query;return I(this,l),(t=i.apply(this,arguments)).onSearchChange=t.onSearchChange.bind(q(t)),t.state={selected:[]},t.updateLabels=t.updateLabels.bind(q(t)),n.value.length&&r.input.getLabels(n.value,a).then((function(e){var n=e.map((function(e){return A({key:e.id},e)}));t.updateLabels(n)})),t}return t=l,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.config,r=t.filter,a=t.query,c=e.filter;if(r.value.length&&!Object(o.isEqual)(c,r)){var i=this.state.selected.map((function(e){return e.key}));Object(m.e)(r.value).every((function(e){return!i.includes(e)}))&&n.input.getLabels(r.value,a).then(this.updateLabels)}}},{key:"updateLabels",value:function(e){var t=this.state.selected.map((function(e){return e.key})),n=e.map((function(e){return e.key}));Object(o.isEqual)(n.sort(),t.sort())||this.setState({selected:e})}},{key:"onSearchChange",value:function(e){this.setState({selected:e}),(0,this.props.onFilterChange)("value",e.map((function(e){return e.key})).join(","))}},{key:"getScreenReaderText",value:function(e,t){var n=this.state.selected;if(0===n.length)return"";var a=Object(o.find)(t.rules,{value:e.rule})||{},c=n.map((function(e){return e.label})).join(", ");return g(b()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,c),rule:Object(r.createElement)(r.Fragment,null,a.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.config,i=t.filter,l=t.onFilterChange,u=t.isEnglish,s=this.state.selected,f=i.rule,m=a.input,p=a.labels,d=a.rules,O=b()({mixedString:p.title,components:{title:Object(r.createElement)("span",{className:n}),rule:Object(r.createElement)(c.SelectControl,{className:y()(n,"bwf-filters-advanced-rule"),options:d,value:f,onChange:Object(o.partial)(l,"rule"),"aria-label":p.rule}),filter:Object(r.createElement)(N.a,{className:y()(n,"bwf-filters-advanced-input"),onChange:this.onSearchChange,autocompleter:m.type,placeholder:p.placeholder,onRemoveTag:function(t){var n=s.filter((function(e){return e.key!=t}));e.onSearchChange(n)},selected:s,inlineTags:!0,"aria-label":p.filter,showClearButton:!0})}}),g=this.getScreenReaderText(i,a);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},p.add||""),Object(r.createElement)("div",{className:y()("bwf-filters-advanced-fieldset",{"is-english":u})},O),g&&Object(r.createElement)("span",{className:"screen-reader-text"},g))}}])&&D(t.prototype,n),a&&D(t,a),l}(r.Component);U.propTypes={config:l.a.shape({labels:l.a.shape({placeholder:l.a.string,rule:l.a.string,title:l.a.string}),rules:l.a.arrayOf(l.a.object),input:l.a.object}).isRequired,filter:l.a.shape({key:l.a.string,rule:l.a.string,value:l.a.string}).isRequired,onFilterChange:l.a.func.isRequired,query:l.a.object};var $=U,G=n(125),H=n(96);n(360);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var a=W(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Q(this,n)}}function Q(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(i,e);var t,n,a,o=X(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={isFocused:!1},t}return t=i,(n=[{key:"handleFocusOutside",value:function(){this.setState({isFocused:!1})}},{key:"handleOnClick",value:function(e,t){this.setState({isFocused:!0}),"function"==typeof t&&t(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=t.value,o=t.help,i=t.className,l=t.instanceId,u=t.onChange,s=t.onClick,f=t.prefix,b=t.suffix,m=t.type,p=t.disabled,d=Y(t,["label","value","help","className","instanceId","onChange","onClick","prefix","suffix","type","disabled"]),O=this.state.isFocused,g="inspector-text-control-with-affixes-".concat(l),j=[];o&&j.push("".concat(g,"__help")),f&&j.push("".concat(g,"__prefix")),b&&j.push("".concat(g,"__suffix"));var v=y()(i,{"with-value":""!==a,empty:""===a,active:O&&!p}),h=y()("text-control-with-affixes",{"text-control-with-prefix":f,"text-control-with-suffix":b,disabled:p});return Object(r.createElement)(c.BaseControl,{label:n,id:g,help:o,className:v,onClick:function(t){return e.handleOnClick(t,s)}},Object(r.createElement)("div",{className:h},f&&Object(r.createElement)("span",{id:"".concat(g,"__prefix"),className:"text-control-with-affixes__prefix"},f),Object(r.createElement)("input",z({className:"components-text-control__input",type:m,id:g,value:a,onChange:function(e){return u(e.target.value)},"aria-describedby":j.join(" "),disabled:p,onFocus:function(){return e.setState({isFocused:!0})}},d)),b&&Object(r.createElement)("span",{id:"".concat(g,"__suffix"),className:"text-control-with-affixes__suffix"},b)))}}])&&V(t.prototype,n),a&&V(t,a),i}(r.Component);Z.defaultProps={type:"text"},Z.propTypes={label:l.a.string,help:l.a.string,type:l.a.string,value:l.a.string.isRequired,className:l.a.string,onChange:l.a.func.isRequired,prefix:l.a.node,suffix:l.a.node,disabled:l.a.bool};var ee=Object(H.compose)([H.withInstanceId,c.withFocusOutside])(Z);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ue(e);if(t){var a=ue(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return le(this,n)}}function le(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(u,e);var t,n,i,l=ie(u);function u(){return ae(this,u),l.apply(this,arguments)}return t=u,(n=[{key:"getBetweenString",value:function(e){return Object(a._x)("{{rangeStart /}}{{span}} ".concat(e||"and"," {{/span}}{{rangeEnd /}}"),"Numerical range inputs arranged on a single line","wp-marketing-automations-crm")}},{key:"getScreenReaderText",value:function(e,t){var n=this.props.currency,a=Object(o.find)(t.rules,{value:e.rule})||{},c=ne(Object(o.isArray)(e.value)?e.value:[e.value],2),i=c[0],l=c[1];if(!i||"between"===a.value&&!l)return"";var u=Object(o.get)(t,["input","type"],"number"),s=Object(o.get)(t,["betweenText"],"");if("currency"===u){var f=Object(G.a)(n).formatAmount;i=f(i),l=f(l)}var m=i;return"between"===a.value&&(m=b()({mixedString:this.getBetweenString(s),components:{rangeStart:Object(r.createElement)(r.Fragment,null,i),rangeEnd:Object(r.createElement)(r.Fragment,null,l),span:Object(r.createElement)(r.Fragment,null)}})),g(b()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,m),rule:Object(r.createElement)(r.Fragment,null,a.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"getFormControl",value:function(e){var t=e.type,n=e.value,a=e.label,o=e.onChange,i=e.currencySymbol,l=e.symbolPosition,u=e.suffix;return"currency"===t||u?l&&0===l.indexOf("right")||u?Object(r.createElement)(ee,{suffix:Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:u||i}}),className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":a,onChange:o}):Object(r.createElement)(ee,{prefix:Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":a,onChange:o}):Object(r.createElement)(c.TextControl,{className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":a,onChange:o})}},{key:"getFilterInputs",value:function(){var e=this.props,t=e.config,n=e.filter,r=e.onFilterChange,c=e.currency,i=c.symbol,l=c.symbolPosition;if("between"===n.rule)return this.getRangeInput();var u=Object(o.get)(t,["input","type"],"number"),s=Object(o.get)(t,["suffix"],""),f=ne(Object(o.isArray)(n.value)?n.value:[n.value],2),b=f[0],m=f[1];Boolean(m)&&r("value",b||m);var p="";
/* translators: Sentence fragment, "maximum amount" refers to a numeric value the field must be less than. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
return p="lessthan"===n.rule?Object(a._x)("%(field)s maximum amount","maximum value input","wp-marketing-automations-crm"):Object(a._x)("%(field)s minimum amount","minimum value input","wp-marketing-automations-crm"),this.getFormControl({type:u,value:b||m,label:Object(a.sprintf)(p,{field:Object(o.get)(t,["labels","add"])}),onChange:Object(o.partial)(r,"value"),currencySymbol:i,symbolPosition:l,suffix:s})}},{key:"getRangeInput",value:function(){var e=this.props,t=e.config,n=e.filter,c=e.onFilterChange,i=e.currency,l=i.symbol,u=i.symbolPosition,s=Object(o.get)(t,["input","type"],"number"),f=Object(o.get)(t,["suffix"],""),m=Object(o.get)(t,["betweenText"],""),p=ne(Object(o.isArray)(n.value)?n.value:[n.value],2),d=p[0],O=p[1];return b()({mixedString:this.getBetweenString(m),components:{rangeStart:this.getFormControl({type:s,value:d||"",label:Object(a.sprintf)(
/* translators: Sentence fragment, "range start" refers to the first of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(a.__)("%(field)s range start","wp-marketing-automations-crm"),{field:Object(o.get)(t,["labels","add"])}),onChange:function(e){c("value",[e,O])},currencySymbol:l,symbolPosition:u,suffix:f}),rangeEnd:this.getFormControl({type:s,value:O||"",label:Object(a.sprintf)(
/* translators: Sentence fragment, "range end" refers to the second of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(a.__)("%(field)s range end","wp-marketing-automations-crm"),{field:Object(o.get)(t,["labels","add"])}),onChange:function(e){c("value",[d,e])},currencySymbol:l,symbolPosition:u,suffix:f}),span:Object(r.createElement)("span",{className:"separator"})}})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,a=e.filter,i=e.onFilterChange,l=e.isEnglish,u=a.rule,s=n.labels,f=n.rules,m=b()({mixedString:s.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(c.SelectControl,{className:y()(t,"bwf-filters-advanced-rule"),options:f,value:u,onChange:Object(o.partial)(i,"rule"),"aria-label":s.rule}),filter:Object(r.createElement)("div",{className:y()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===u})},this.getFilterInputs())}}),p=this.getScreenReaderText(a,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},s.add||""),Object(r.createElement)("div",{className:y()("bwf-filters-advanced-fieldset",{"is-english":l})},m),p&&Object(r.createElement)("span",{className:"screen-reader-text"},p))}}])&&ce(t.prototype,n),i&&ce(t,i),u}(r.Component),fe=n(128),be=n(26),me=n.n(be),pe=(n(315),n(316),n(30)),de=(n(158),n(199)),Oe=n(129),ye=n(13);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_e(e);if(t){var a=_e(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?Ee(e):t}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(u,e);var t,n,i,l=he(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).onDateChange=t.onDateChange.bind(Ee(t)),t.onInputChange=t.onInputChange.bind(Ee(t)),t}return t=u,(n=[{key:"handleKeyDown",value:function(e,t,n){var r=n.keyCode;pe.TAB===r&&e&&t()}},{key:"handleFocus",value:function(e,t){e||t()}},{key:"onDateChange",value:function(e,t){var n=this.props,r=n.onUpdate,a=n.dateFormat,c=me()(t);r({date:c,text:t?c.format(a):"",error:null}),e()}},{key:"onInputChange",value:function(e){var t=e.target.value,n=this.props.dateFormat,r=Object(fe.j)(n,t),a=r?null:fe.a.invalid;this.props.onUpdate({date:r,text:t,error:t.length>0?a:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.date,i=t.disabled,l=t.text,u=t.dateFormat,s=t.error,f=t.isInvalidDate;return Object(r.createElement)(c.Dropdown,{position:"bottom center",focusOnMount:!1,renderToggle:function(t){var n=t.isOpen,c=t.onToggle;return Object(r.createElement)(de.a,{disabled:i,value:l,onChange:e.onInputChange,dateFormat:u,label:Object(a.__)("Choose a date","wp-marketing-automations-crm"),error:s,describedBy:Object(a.sprintf)(Object(a.__)("Date input describing a selected date in format %s","wp-marketing-automations-crm"),u),onFocus:Object(o.partial)(e.handleFocus,n,c),"aria-expanded":n,focusOnMount:!1,onKeyDown:Object(o.partial)(e.handleKeyDown,n,c),errorPosition:"top center"})},renderContent:function(t){var i=t.onToggle;return Object(r.createElement)(Oe.b,{component:!1},Object(r.createElement)(Oe.a,{className:"bwf-calendar-date-picker-title"},Object(a.__)("select a date","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf-calendar-date-picker-close",onClick:i,title:Object(a.__)("Close","wp-marketing-automations-crm")},Object(r.createElement)(ye.a,{icon:"plus",color:"#757575"})),Object(r.createElement)("div",{className:"bwf-calendar-react-dates is-core-datepicker"},Object(r.createElement)(c.DateTimePicker,{currentDate:n,onChange:Object(o.partial)(e.onDateChange,i),isInvalidDate:f})))}})}}])&&je(t.prototype,n),i&&je(t,i),u}(r.Component);Se.propTypes={date:l.a.object,disabled:l.a.bool,text:l.a.string,error:l.a.string,onUpdate:l.a.func.isRequired,dateFormat:l.a.string.isRequired,isInvalidDate:l.a.func};var ke=Se;function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Be(e);if(t){var a=Be(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return De(this,n)}}function De(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?Re(e):t}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=Object(a.__)("MMM D, YYYY","wp-marketing-automations-crm"),qe=Object(a.__)("MM/DD/YYYY","wp-marketing-automations-crm"),Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(u,e);var t,n,i,l=Ie(u);function u(e){var t,n=e.filter;Fe(this,u),t=l.apply(this,arguments);var r=Array.isArray(n.value)?n.value:[null,n.value],a=Ne(r,2),c=a[0],o=a[1],i=c?Object(fe.j)(fe.g,c):null,s=o?Object(fe.j)(fe.g,o):null;return t.state={before:s,beforeText:s?s.format(qe):"",beforeError:null,after:i,afterText:i?i.format(qe):"",afterError:null},t.onSingleDateChange=t.onSingleDateChange.bind(Re(t)),t.onRangeDateChange=t.onRangeDateChange.bind(Re(t)),t.onRuleChange=t.onRuleChange.bind(Re(t)),t}return t=u,(n=[{key:"getBetweenString",value:function(){return Object(a._x)("{{after /}}{{span}} and {{/span}}{{before /}}","Date range inputs arranged on a single line","wp-marketing-automations-crm")}},{key:"getScreenReaderText",value:function(e,t){var n=Object(o.find)(t.rules,{value:e.rule})||{},a=this.state,c=a.before,i=a.after;if(!c||"between"===n.value&&!i)return"";var l=c.format(Me);return"between"===n.value&&(l=b()({mixedString:this.getBetweenString(),components:{after:Object(r.createElement)(r.Fragment,null,i.format(Me)),before:Object(r.createElement)(r.Fragment,null,c.format(Me)),span:Object(r.createElement)(r.Fragment,null)}})),g(b()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,l),rule:Object(r.createElement)(r.Fragment,null,n.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"onSingleDateChange",value:function(e){var t=e.date,n=e.text,r=e.error,a=this.props.onFilterChange;this.setState({before:t,beforeText:n,beforeError:r}),t&&a("value",t.format(fe.g))}},{key:"onRangeDateChange",value:function(e,t){var n,r=t.date,a=t.text,c=t.error,o=this.props.onFilterChange;if(this.setState((xe(n={},e,r),xe(n,e+"Text",a),xe(n,e+"Error",c),n)),r){var i=this.state,l=i.before,u=i.after,s=null,f=null;"after"===e&&(s=r.format(fe.g),f=l?l.format(fe.g):null),"before"===e&&(s=u?u.format(fe.g):null,f=r.format(fe.g)),s&&f&&o("value",[s,f])}}},{key:"isFutureDate",value:function(e){return me()().isBefore(me()(e),"day")}},{key:"getFormControl",value:function(e){var t=e.date,n=e.error,a=e.onUpdate,c=e.text;return Object(r.createElement)(ke,{date:t,dateFormat:qe,error:n,isInvalidDate:this.isFutureDate,onUpdate:a,text:c})}},{key:"getRangeInput",value:function(){var e=this.state,t=e.before,n=e.beforeText,a=e.beforeError,c=e.after,i=e.afterText,l=e.afterError;return b()({mixedString:this.getBetweenString(),components:{after:this.getFormControl({date:c,error:l,onUpdate:Object(o.partial)(this.onRangeDateChange,"after"),text:i}),before:this.getFormControl({date:t,error:a,onUpdate:Object(o.partial)(this.onRangeDateChange,"before"),text:n}),span:Object(r.createElement)("span",{className:"separator"})}})}},{key:"getFilterInputs",value:function(){var e=this.props.filter,t=this.state,n=t.before,r=t.beforeText,a=t.beforeError;return"between"===e.rule?this.getRangeInput():this.getFormControl({date:n,error:a,onUpdate:this.onSingleDateChange,text:r})}},{key:"onRuleChange",value:function(e){var t=this.props,n=t.onFilterChange,r=t.onMultipleFilterChange;if("between"===t.filter.rule){var a=this.state.before;if(a)return void r({value:a.format(fe.g),rule:e})}n("rule",e)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,a=e.filter,o=e.isEnglish,i=(e.onFilterChange,a.rule),l=n.labels,u=n.rules,s=this.getScreenReaderText(a,n),f=b()({mixedString:l.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(c.SelectControl,{className:y()(t,"bwf-filters-advanced-rule"),options:u,value:i,onChange:this.onRuleChange,"aria-label":l.rule}),filter:Object(r.createElement)("div",{className:y()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===i})},this.getFilterInputs())}});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},l.add||""),Object(r.createElement)("div",{className:y()("bwf-filters-advanced-fieldset",{"is-english":o})},f),s&&Object(r.createElement)("span",{className:"screen-reader-text"},s))}}])&&Ae(t.prototype,n),i&&Ae(t,i),u}(r.Component),Ue=n(16),$e=n.n(Ue),Ge=n(160);function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ze=function(e){var t=e.className,n=e.config,i=e.filter,l=e.isEnglish,u=e.onFilterChange,s=i.rule,f=i.value,m=n.labels,p=n.rules,d=He(Object(r.useState)([]),2),O=d[0],j=d[1];Object(r.useEffect)((function(){$e()({path:"/wc/v3/products/attributes"}).then((function(e){return e.map((function(e){var t=e.id,n=e.name;return{key:t.toString(),label:n}}))})).then(j)}),[]);var v=He(Object(r.useState)(Array.isArray(f)?f[0]:""),2),h=v[0],w=v[1];Object(r.useEffect)((function(){Array.isArray(f)&&w(f[0])}),[f]);var E=He(Object(r.useState)(!1),2),_=E[0],S=E[1];Object(r.useEffect)((function(){h&&(S(!1),$e()({path:"/wc/v3/products/attributes/".concat(h,"/terms")}).then((function(e){return e.map((function(e){var t=e.id,n=e.name;return{key:t.toString(),label:n}}))})).then(S))}),[h]);var k=He(Object(r.useState)(Array.isArray(f)&&f[1]||""),2),C=k[0],x=k[1],N=function(e){var t=e.attributes,n=e.attributeTerms,c=e.config,o=e.filter,i=e.selectedAttribute,l=e.selectedAttributeTerm;if(!t||0===t.length||!n||0===n.length||""===i||""===l)return"";var u=Array.isArray(c.rules)&&c.rules.find((function(e){return e.value===o.rule}))||{},s=(t.find((function(e){return e.key===i}))||{}).label,f=(n.find((function(e){return e.key===l}))||{}).label;if(!s||!f)return"";var m=b()({
/* translators: Sentence fragment describing a product attribute match. Example: "Color Is Not Blue" - attribute = Color, equals = Is Not, value = Blue */
mixedString:Object(a.__)("{{attribute /}} {{equals /}} {{value /}}","wp-marketing-automations-crm"),components:{attribute:Object(r.createElement)(r.Fragment,null,s),equals:Object(r.createElement)(r.Fragment,null,u.label),value:Object(r.createElement)(r.Fragment,null,f)}});return g(b()({mixedString:c.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,m),rule:Object(r.createElement)(r.Fragment,null),title:Object(r.createElement)(r.Fragment,null)}}))}({attributes:O,attributeTerms:_,config:n,filter:i,selectedAttribute:h,selectedAttributeTerm:C});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},m.add||""),Object(r.createElement)("div",{className:y()("bwf-filters-advanced-fieldset",{"is-english":l})},b()({mixedString:m.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(c.SelectControl,{className:y()(t,"bwf-filters-advanced-rule"),options:p,value:s,onChange:Object(o.partial)(u,"rule"),"aria-label":m.rule}),filter:Object(r.createElement)("div",{className:y()(t,"bwf-filters-advanced-attribute-fieldset")},O.length>0?Object(r.createElement)(Ge.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(a.__)("Attribute name","wp-marketing-automations-crm"),isSearchable:!0,showAllOnFocus:!0,options:O,selected:h,onChange:function(e){"string"!=typeof e&&(e=""),w(e),x(""),u("value",[e])}}):Object(r.createElement)(c.Spinner,null),O.length>0&&""!==h&&(!1!==_?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"bwf-filters-advanced-attribute-field-separator"},"="),Object(r.createElement)(Ge.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(a.__)("Attribute value","wp-marketing-automations-crm"),isSearchable:!0,showAllOnFocus:!0,options:_,selected:C,onChange:function(e){"string"!=typeof e&&(e=""),x(e),u("value",[h,e])}})):Object(r.createElement)(c.Spinner,null)))}})),N&&Object(r.createElement)("span",{className:"screen-reader-text"},N))};ze.propTypes={config:l.a.shape({labels:l.a.shape({rule:l.a.string,title:l.a.string,filter:l.a.string}),rules:l.a.arrayOf(l.a.object),input:l.a.object}).isRequired,filter:l.a.shape({key:l.a.string,rule:l.a.string,value:l.a.arrayOf(l.a.oneOfType([l.a.string,l.a.number]))}).isRequired,onFilterChange:l.a.func.isRequired};var Ye=ze,Ve=n(175);function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var et=function(e){var t=e.className,n=e.filter,i=e.config,l=e.isEnglish,u=e.onFilterChange,s=n.rule,f=n.value,m=i.labels,p=i.rules,d=(i.input,i.apiHook),O=Array.isArray(f)&&f[0],g=We(Object(r.useState)(Array.isArray(f)&&f[1]?f[1].split("|").map((function(e){return{key:e,label:e}})):[]),2),j=g[0],v=g[1],h=d(O),w=h.fields,E=h.options,_=w&&Object.keys(w).map((function(e){return{label:w[e],value:e}}));Object(r.useEffect)((function(){Array.isArray(_)&&_.length>0&&!O&&u("value",[_[0].value])}),[_]);var S=function(e){u("value",[O,e.reduce((function(e,t){return""!==e?"".concat(e,"|").concat(t.key):t.key}),"")]),v(e.map((function(e){return{key:e.key,label:e.key}})))},k=b()({mixedString:m.title,components:{title:Object(r.createElement)("span",{className:t}),key:Object(o.size)(_)>0?Object(r.createElement)(c.SelectControl,{isSearcheable:!0,className:y()(t,"bwf-filters-advanced-rule"),options:_,value:O,onChange:function(e){var t=[e];Array.isArray(j)&&j.length>0&&t.push(j.reduce((function(e,t){return""!==e?"".concat(e,"|").concat(t.key):t.key}),"")),u("value",t)}}):Object(r.createElement)(c.Spinner,null),rule:Object(r.createElement)(c.SelectControl,{className:y()(t,"bwf-filters-advanced-rule"),options:p,value:s,onChange:Object(o.partial)(u,"rule"),"aria-label":m.rule}),filter:Object(r.createElement)(N.a,{autocompleter:Xe(Xe({},Ve.a),{},{options:function(){return Promise.resolve(E||[])}}),multiple:!0,allowFreeTextSearch:!0,inlineTags:!0,selected:j,onChange:S,placeholder:Object(a.__)("Enter Values","wp-marketing-automations-crm"),onRemoveTag:function(e){var t=j.filter((function(t){return t.key!=e}));S(t)},showClearButton:!0,disabled:!1})}});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("div",{className:y()("bwf-filters-advanced-fieldset",{"is-english":l})},k))},tt=function(e){var t=e.className,n=e.filter,a=e.config,i=e.isEnglish,l=e.onFilterChange,u=n.rule,s=n.value,f=a.labels,m=a.rules,p=b()({mixedString:f.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(c.SelectControl,{className:y()(t,"bwf-filters-advanced-rule"),options:m,value:u,onChange:Object(o.partial)(l,"rule"),"aria-label":f.rule}),filter:Object(r.createElement)(c.TextControl,{type:"text",className:"bwf-filters-advanced-input",onChange:Object(o.partial)(l,"value"),value:s})}});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("div",{className:y()("bwf-filters-advanced-fieldset",{"is-english":i})},p))};function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ct=function(e){var t=e.config,n=e.currency,a=e.filter,o=e.isEnglish,i=e.onFilterChange,l=e.onMultipleFilterChange,u=e.query,f=e.removeFilter,b=a.key,m=t.filters[b],p=m,d=p.input,O=p.labels,g={Currency:se,Date:Le,Number:se,ProductAttribute:Ye,Search:$,SelectControl:x,CustomField:et,Text:tt};if(g.hasOwnProperty(d.component)){"Currency"===d.component&&(m=rt(rt({},m),{input:{type:"currency",component:"Currency"}}));var j=g[d.component];return Object(r.createElement)("li",{className:"bwf-filters-advanced-list-item"},Object(r.createElement)(j,{className:"bwf-filters-advanced-fieldset-item",currency:n,filter:a,config:m,onFilterChange:i,onMultipleFilterChange:l,isEnglish:o,query:u}),Object(r.createElement)(c.Button,{className:y()("bwf-filters-advanced-line-item","bwf-filters-advanced-remove"),label:O.remove,onClick:f},Object(r.createElement)(s.a,{icon:"cross-small"})))}},ot=n(222);function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||mt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bt(e){return function(e){if(Array.isArray(e))return pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||mt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){if(e){if("string"==typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(e,t):void 0}}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ht(e);if(t){var a=ht(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return jt(this,n)}}function jt(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?vt(e):t}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wt=[{value:"all",label:Object(a.__)("All","wp-marketing-automations-crm")},{value:"any",label:Object(a.__)("Any","wp-marketing-automations-crm")}],Et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(u,e);var t,n,i,l=gt(u);function u(e){var t,n=e.query,a=e.config;dt(this,u),(t=l.apply(this,arguments)).instanceCounts={};var c=Object(m.b)(n,a.filters),o=c.map((function(e){return a.filters[e.key].allowMultiple&&(e.instance=t.getInstanceNumber(e.key)),e}));return t.state={match:n.match||"all",activeFilters:o,currentGroup:""},t.filterListRef=Object(r.createRef)(),t.onMatchChange=t.onMatchChange.bind(vt(t)),t.onFilterChange=t.onFilterChange.bind(vt(t)),t.onMultipleFilterChange=t.onMultipleFilterChange.bind(vt(t)),t.getAvailableFilterKeys=t.getAvailableFilterKeys.bind(vt(t)),t.addFilter=t.addFilter.bind(vt(t)),t.removeFilter=t.removeFilter.bind(vt(t)),t.clearFilters=t.clearFilters.bind(vt(t)),t.getUpdateHref=t.getUpdateHref.bind(vt(t)),t.onFilter=t.onFilter.bind(vt(t)),t}return t=u,(n=[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.config,a=n.query,c=e.query;if(!Object(o.isEqual)(c,a)){var i=Object(m.b)(a,r.filters);this.instanceCounts={};var l=i.map((function(e){return r.filters[e.key].allowMultiple&&(e.instance=t.getInstanceNumber(e.key)),e}));this.setState({activeFilters:l}),this.props.onActiveFiltersChange&&this.props.onActiveFiltersChange(l,this.props.config)}}},{key:"getInstanceNumber",value:function(e){return this.instanceCounts.hasOwnProperty(e)||(this.instanceCounts[e]=1),this.instanceCounts[e]++}},{key:"onMatchChange",value:function(e){var t=this.props.onAdvancedFilterAction;this.setState({match:e}),t("match",{match:e})}},{key:"onFilterChange",value:function(e,t,n){var r=bt(this.state.activeFilters);r[e]=st(st({},r[e]),{},ft({},t,n)),this.setState({activeFilters:r}),this.props.onActiveFiltersChange&&this.props.onActiveFiltersChange(r,this.props.config)}},{key:"onMultipleFilterChange",value:function(e,t){var n=bt(this.state.activeFilters);n[e]=st(st({},n[e]),t),this.setState({activeFilters:n}),this.props.onActiveFiltersChange&&this.props.onActiveFiltersChange(n,this.props.config)}},{key:"removeFilter",value:function(e){var t=this.props.onAdvancedFilterAction,n=bt(this.state.activeFilters);t("remove",n[e]),n.splice(e,1),this.setState({activeFilters:n}),this.props.onActiveFiltersChange&&this.props.onActiveFiltersChange(n,this.props.config),0===n.length&&Object(m.d)().push(this.getUpdateHref([]))}},{key:"getTitle",value:function(){var e=this.state.match,t=this.props.config;return b()({mixedString:t.title,components:{select:Object(r.createElement)(c.SelectControl,{className:"bwf-filters-advanced-title-select",options:wt,value:e,onChange:this.onMatchChange,"aria-label":Object(a.__)("Choose to apply any or all filters","wp-marketing-automations-crm")})}})}},{key:"getAvailableFilterKeys",value:function(){var e=this.props.config,t=this.state.activeFilters.map((function(e){return e.key})),n=Object.keys(e.filters).filter((function(t){return e.filters[t].allowMultiple||!1})),r=Object(o.difference)(Object.keys(e.filters),t,n);return[].concat(bt(r),bt(n))}},{key:"addFilter",value:function(e,t){var n=this,r=this.props,a=r.onAdvancedFilterAction,c=r.config.filters[e],o={key:e};Array.isArray(c.rules)&&c.rules.length&&(o.rule=c.rules[0].value),c.input&&c.input.options&&(o.value=Object(m.c)(c,c.input.options)),c.input&&"Search"===c.input.component&&(o.value=""),c.allowMultiple&&(o.instance=this.getInstanceNumber(e)),this.setState((function(e){return n.props.onActiveFiltersChange&&n.props.onActiveFiltersChange([].concat(bt(e.activeFilters),[o]),n.props.config),{activeFilters:[].concat(bt(e.activeFilters),[o])}})),a("add",o),t(),setTimeout((function(){n.filterListRef.current.querySelector("li:last-of-type fieldset").focus()}))}},{key:"clearFilters",value:function(){(0,this.props.onAdvancedFilterAction)("clear_all"),this.setState({activeFilters:[],match:"all"}),this.props.onActiveFiltersChange&&this.props.onActiveFiltersChange([],this.props.config)}},{key:"getUpdateHref",value:function(e,t){var n=this.props,r=n.path,a=n.query,c=n.config,o=Object(m.i)(e,a,c.filters),i="all"===t?void 0:t;return Object(m.f)(st(st({},o),{},{match:i}),r,a)}},{key:"isEnglish",value:function(){return/en[-|_]/.test(this.props.siteLocale)}},{key:"onFilter",value:function(){var e=this.props,t=e.onAdvancedFilterAction,n=e.query,r=e.config,a=this.state,c=a.activeFilters,o=a.match;t("filter",st(st({},Object(m.i)(c,n,r.filters)),{},{match:o}))}},{key:"orderFilters",value:function(e,t){var n=window.location.search,r=n.indexOf(e.key),a=n.indexOf(t.key);return-1===r||-1===a?0:r-a}},{key:"getGroupListing",value:function(){var e=[],t=[];return Object.entries(this.props.config.filters).map((function(n){var r=lt(n,2),a=(r[0],r[1]);e.includes(a.group)||(e.push(a.group),t.push({priority:a.priority?a.priority:0,key:a.group,label:a.groupLabel}))})),t.sort((function(e,t){return e.priority-t.priority})),t}},{key:"render",value:function(){var e=this,t=this.props,n=t.config,i=t.query,l=t.currency,u=this.state,f=u.activeFilters,b=u.match,m=this.getAvailableFilterKeys(),O=this.getUpdateHref(f,b),y=n.footerComponent?n.footerComponent:Object(r.createElement)(r.Fragment,null),g="admin.php"+window.location.search===O||0===f.length,j=this.isEnglish(),v=0;return Object(r.createElement)(p.a,{className:"bwf-filters-advanced woocommerce-analytics__card bwf-alter-filter",title:this.getTitle()},Object(r.createElement)("ul",{className:"bwf-filters-advanced-list",ref:this.filterListRef},f.sort(this.orderFilters).map((function(t,a){var c=t.instance,u=t.key;return Object(r.createElement)(ct,{key:u+(c||""),config:n,currency:l,filter:t,isEnglish:j,onFilterChange:Object(o.partial)(e.onFilterChange,a),onMultipleFilterChange:Object(o.partial)(e.onMultipleFilterChange,a),query:i,removeFilter:function(){return e.removeFilter(a)}})}))),m.length>0&&Object(r.createElement)("div",{className:"bwf-filters-advanced-add-filter"},Object(r.createElement)(c.Dropdown,{className:"bwf-filters-advanced-add-filter-dropdown",position:"bottom center",renderToggle:function(t){var n=t.isOpen,o=t.onToggle;return Object(r.createElement)(c.Button,{className:"bwf-filters-advanced-add-button",onClick:function(){o(),e.setState({currentGroup:""})},"aria-expanded":n},Object(r.createElement)(s.a,{icon:"add-outline"}),Object(a.__)("Add a Filter","wp-marketing-automations-crm"))},renderContent:function(t){var i=t.onClose;return Object(r.createElement)("ul",{className:"bwf-filters-advanced-add-dropdown"},n.enableGrouping&&Object(ot.a)(e.state.currentGroup)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("li",{key:0},Object(r.createElement)("p",null,Object(a.__)("Select Group","wp-marketing-automations-crm"))),e.getGroupListing().map((function(t){return Object(r.createElement)("li",{key:t.key,className:"bwf-advance-filter-group"},Object(r.createElement)(c.Button,{onClick:function(){e.setState({currentGroup:t.key})}},t.label,Object(r.createElement)(c.Icon,{icon:"arrow-right-alt2"})))}))),(!Object(ot.a)(e.state.currentGroup)||!n.enableGrouping)&&Object(r.createElement)(r.Fragment,null,n.enableGrouping&&Object(r.createElement)("li",{key:0,className:"bwf-ptb-5"},Object(r.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){return e.setState({currentGroup:""})}},Object(r.createElement)(c.Icon,{icon:"arrow-left-alt2"}),Object(a.__)("Back","wp-marketing-automations-crm"))),m.map((function(t){if(n.filters[t].group===e.state.currentGroup||!n.enableGrouping)return v++,Object(r.createElement)("li",{key:t},Object(r.createElement)(c.Button,{onClick:Object(o.partial)(e.addFilter,t,i)},n.filters[t].labels.add))})),0===v&&0===v&&Object(r.createElement)("p",null,Object(a.__)("No Filters Available","wp-marketing-automations-crm"))))}}),Object(r.createElement)("div",{className:"bwf-advance-help-text"},0===f.length&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-h4"},Object(a.__)("Add New Filter","wp-marketing-automations-crm")),Object(r.createElement)("span",null,Object(a.__)("By adding new filters you can view much more specific/ narrowed data","wp-marketing-automations-crm"))))),Object(r.createElement)("div",{className:"bwf-filters-advanced-controls"},n.footerComponent&&Object(r.createElement)(y,{data:f,config:n}),!n.hideAdvanceControl&&Object(r.createElement)("div",{className:"bwf-adv-filter-action-btn"},g&&Object(r.createElement)(c.Button,{isPrimary:!0,disabled:!0},Object(a.__)("Filter","wp-marketing-automations-crm")),!g&&Object(r.createElement)(d.a,{className:"components-button is-primary is-button",type:"bwf-crm",href:O,onClick:this.onFilter},Object(a.__)("Filter","wp-marketing-automations-crm")),f.length>0&&Object(r.createElement)(d.a,{className:"bwf-clear-all-filters",type:"bwf-crm",href:this.getUpdateHref([]),onClick:this.clearFilters},Object(a.__)("Clear all filters","wp-marketing-automations-crm")))))}}])&&Ot(t.prototype,n),i&&Ot(t,i),u}(r.Component);Et.propTypes={config:l.a.shape({title:l.a.string,filters:l.a.objectOf(l.a.shape({labels:l.a.shape({add:l.a.string,remove:l.a.string,rule:l.a.string,title:l.a.string,filter:l.a.string}),rules:l.a.arrayOf(l.a.object),input:l.a.object}))}).isRequired,path:l.a.string.isRequired,query:l.a.object,onAdvancedFilterAction:l.a.func,siteLocale:l.a.string,currency:l.a.object.isRequired},Et.defaultProps={query:{},onAdvancedFilterAction:function(){},siteLocale:"en_US"};t.a=Et},359:function(e,t,n){},360:function(e,t,n){},361:function(e,t,n){"use strict";var r=n(0),a=n(124),c=n(4),o=n(139);t.a=function(e){var t=e.selected,n=e.onTagsChange;return Object(r.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(r.createElement)("div",{className:"bwf-input-label"},Object(c.__)("Add Tags","wp-marketing-automations-crm")),Object(r.createElement)(a.a,{autocompleter:o.b,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:t,onChange:function(e){n(e)},onRemoveTag:function(e,r){var a=t.filter((function(t){return!(t.key==e&&t.label==r)}));n(a)},placeholder:Object(c.__)("Search by tag name","wp-marketing-automations-crm"),showClearButton:!0,disabled:!1}))}},454:function(e,t,n){"use strict";var r=n(50),a=n(7);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("contacts"),t=e.fetch;return o(o({},l(e,["fetch"])),{},{fetch:function(e,n,r){var c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],b=e.s,m=(e.page,e.filter,e.orderby),p=e.order,d=(e.path,l(e,["s","page","filter","orderby","order","path"])),O={offset:n,limit:r,search:b,filters:d,get_wc:Object(a.X)(),grab_totals:c,only_count:o,fetch_base:i,grab_custom_fields:!1,exclude_unsubs:u,exclude_unsubs_lists:s};p&&m&&(O.order=p,O.order_by=m),f&&(O.unopen_broadcast=parseInt(f)),t("GET",Object(a.g)("/contacts"),O)},startIndexing:function(){return t("GET",Object(a.g)("/contacts"),{start_indexing:!0})}})}},455:function(e,t,n){"use strict";var r=n(0),a=n(124),c=n(4),o=n(139);t.a=function(e){var t=e.selected,n=e.onListsChange;return Object(r.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(r.createElement)("div",{className:"bwf-input-label"},Object(c.__)("Add to Lists","wp-marketing-automations-crm")),Object(r.createElement)(a.a,{autocompleter:o.a,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:t,onChange:function(e){n(e)},onRemoveTag:function(e){var r=t.filter((function(t){return t.key!=e}));n(r)},placeholder:Object(c.__)("Search by list name","wp-marketing-automations-crm"),showClearButton:!0,disabled:!1}))}},464:function(e,t,n){"use strict";var r=n(48);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("contacts"),t=e.getStateProp;return c(c({},i(e,["getStateProp"])),{},{getContacts:function(){return t("contacts_list")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getTotalCount:function(){return parseInt(t("total"))},getCountData:function(){return t("countData")}})}},465:function(e,t,n){"use strict";var r=n(0);n(476);t.a=function(e){var t=e.progress,n=e.text,a=e.status,c=e.size,o=e.noStriped?"":"progress-striped";return Object(r.createElement)("div",{className:"progress progress-"+c+" "+o+" active"},Object(r.createElement)("div",{role:"progressbar progress-striped",style:{width:"".concat(t,"%")},className:"progress-bar progress-bar-".concat(a)},Object(r.createElement)("span",null,n)))}},466:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"c",(function(){return k})),n.d(t,"b",(function(){return we}));var r=n(0),a=n(9),c=n(4),o=n(5),i=n(16),l=n.n(i),u=n(7),s=n(121),f=n(122),b=n(111),m=n(17);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=function(e){var t=e.filter,n=e.config,i=Object(m.h)(),p=y(Object(r.useState)({loading:!1,success:!1,error:!1,message:""}),2),O=p[0],g=p[1],j=Object(r.useContext)(u.b),v=y(Object(r.useState)(""),2),h=v[0],w=v[1],E=y(Object(r.useState)(!1),2),_=E[0],S=E[1],k=y(Object(r.useState)(""),2),C=k[0],x=k[1],N=y(Object(r.useState)(!1),2),P=N[0],F=N[1],A=function(){g(d(d({},O),{},{loading:!0}));var e=Object(m.i)(t,i,n.filters);if(Object(o.isEmpty)(e))g({loading:!0,error:!0,message:Object(c.__)("Please fill the filter","wp-marketing-automations-crm")}),setTimeout((function(){g({loading:!1,success:!1,error:!1,message:""})}),2e3);else try{l()({path:Object(u.g)("/audience"),method:"POST",data:{name:h,data:{desc:C,filters:e}}}).then((function(e){200===e.code&&(j(e.message),Object(u.M)(j,2e3),g({loading:!1,success:!1,error:!1,message:""}),F(!1))}))}catch(e){g({loading:!0,error:!0,message:e.message}),setTimeout((function(){g({loading:!1,success:!1,error:!1,message:""})}),2e3)}};return Object(r.createElement)("div",{className:"bwf-adv-filter-action-btn"},!Object(o.isEmpty)(t)&&Object(r.createElement)(a.Button,{isTertiary:!0,onClick:function(){w(""),S(!1),x(""),F(!0)}},Object(c.__)("Save as Audience","wp-marketing-automations-crm")),P&&Object(r.createElement)(a.Modal,{title:"Create New Audience",onRequestClose:function(){return F(!1)},shouldCloseOnClickOutside:!1,className:"bwf-admin-modal bwf-admin-modal-medium"},O.loading?O&&O.success&&O.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(s.a,null),Object(r.createElement)("div",{className:"bwf-h1"},O.message)):O&&O.error&&O.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(f.a,null),Object(r.createElement)("div",{className:"bwf-h1"},O.message)):Object(r.createElement)(b.a,null):Object(r.createElement)("div",{onKeyPress:function(e){"Enter"===e.key&&(Object(o.isEmpty)(h)?S(!0):A())}},_&&Object(r.createElement)(a.Notice,{status:"error",onRemove:function(){return S("")}},Object(c.__)("Title is required","wp-marketing-automations-crm")),Object(r.createElement)(a.TextControl,{type:"text",value:h,autoFocus:!0,style:{lineHeight:"22px"},placeholder:Object(c.__)("Enter audience title","wp-marketing-automations-crm"),label:Object(c.__)("Title","wp-marketing-automations-crm"),onChange:function(e){w(e),Object(o.isEmpty)(e)?S(!0):S(!1)}}),Object(r.createElement)(a.TextareaControl,{placeholder:Object(c.__)("Enter audience description","wp-marketing-automations-crm"),label:Object(c.__)("Description","wp-marketing-automations-crm"),value:C,onChange:function(e){return x(e)}}),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(a.Button,{isTertiary:!0,onClick:function(){return F(!1)}},Object(c.__)("Cancel","wp-marketing-automations-crm")),Object(r.createElement)(a.Button,{isPrimary:!0,onClick:function(){Object(o.isEmpty)(h)?S(!0):A()}},Object(c.__)("Add","wp-marketing-automations-crm"))))))},v=(n(474),n(222));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.addAdvance,n=void 0===t||t,o=Object(m.h)(),i=_(Object(r.useState)(!1),2),s=i[0],f=i[1],p=_(Object(r.useState)(""),2),d=p[0],O=p[1],y=_(Object(r.useState)([]),2),g=y[0],j=y[1],h=_(Object(r.useState)(!0),2),E=h[0],S=h[1],k=function(){var e=[];return Object(v.a)(d)?g:(g.map((function(t){-1!==t.name.toLowerCase().indexOf(d.toLowerCase())&&e.push(t)})),e)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-list-audience-wrap"},Object(r.createElement)(a.Button,{isTertiary:!0,className:"bwf-display-flex bwf-add-audience-btn",onClick:function(){!function(){try{l()({method:"GET",path:Object(u.g)("/audiences?limit=0&offset=0")}).then((function(e){200===e.code&&(j(e.result),S(!1))}))}catch(e){S(!1)}}(),O(""),f(!s)}},"Select Audience")),s&&Object(r.createElement)(a.Modal,{title:"My Audiences",onRequestClose:function(){return f(!1)},className:"bwf-admin-modal bwf-admin-modal-medium bwf-audience-modal bwf-admin-modal-no-header bwf-show-close"},E?Object(r.createElement)(b.a,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-audience-header"},Object(r.createElement)("div",{className:"bwf-audience-label bwf-h4"},Object(c.__)("My Audiences","wp-marketing-automations-crm")),Object(r.createElement)(a.TextControl,{className:"bwf-audience-search",value:d,onChange:function(e){return O(e)},autoComplete:"off",placeholder:Object(c.__)("Search by title","wp-marketing-automations-crm")})),Object(r.createElement)("div",{className:"bwf-audience-table-wrapper"},Object(r.createElement)("table",{className:"bwf-audience-list-table"},Object(r.createElement)("tbody",null,k().length>0?k().map((function(e){return Object(r.createElement)("tr",null,Object(r.createElement)("td",null,Object(r.createElement)("span",{className:"bwf-audience-title"},e.name),Object(r.createElement)("span",{className:"bwf-audience-create-detail"},e.created_at?Object(r.createElement)(r.Fragment,null,Object(c.__)("Created at ","wp-marketing-automations-crm"),Object(u.C)(e.created_at)):"")),Object(r.createElement)("td",null,Object(r.createElement)("span",{className:"bwf-audience-item-apply",onClick:function(){var t={};n&&(t={filter:"advanced"}),Object(m.j)(w(w({},e.data.filters),t),"/",o),f(!1)}},Object(c.__)("Select","wp-marketing-automations-crm"))))})):Object(r.createElement)("tr",null,Object(r.createElement)("td",{colSpan:2},Object(r.createElement)("span",{className:"bwf-display-flex bwf-p-15"},Object(c.__)("No Audiences Found","wp-marketing-automations-crm"))))))))))},C=n(130),x=n(15),N=n.n(x),P=n(47),F=n(49),A=n(32),T=n(13),I=n(330),D=n(50);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var L=function(){var e=Object(D.a)("audience"),t=e.fetch,n=e.setStateProp;return B(B({},q(e,["fetch","setStateProp"])),{},{fetch:function(e,n,r){t("GET",Object(u.g)("/audiences?limit=".concat(e,"&offset=").concat(n,"&search=").concat(r)))},setStateAudienceValues:function(e,t){n(e,t)}})},U=n(48);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var z=function(){var e=Object(U.a)("audience"),t=e.getStateProp;return G(G({},K(e,["getStateProp"])),{},{getAudiences:function(){return t("audience")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getCountData:function(){return t("countData")},getContactCountData:function(){return t("contactCountData")}})},Y=n(312),V=n(137);function J(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}var X=function(e){var t=Object(m.h)(),n=e.filter,i=e.config,s=e.audienceDetail,f=e.setModal,b=e.setOpen,p=e.reloadList,d=e.title,O=e.desc,y=e.error,g=e.setError,j=Object(r.useContext)(u.b),v=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:if(!Object(o.isEmpty)(d)){e.next=5;break}return g(!0),e.abrupt("return");case 5:if(f({loading:!0}),r=Object(m.i)(n,t,i.filters),!Object(o.isEmpty)(r)){e.next=12;break}f({loading:!0,error:!0,message:Object(c.__)("Please fill the filter","wp-marketing-automations-crm")}),setTimeout((function(){f({loading:!1,success:!1,error:!1,message:""})}),2e3),e.next=22;break;case 12:return a=s?Object(u.g)("/audience/".concat(s.ID)):Object(u.g)("/audience"),e.prev=13,e.next=16,l()({path:a,method:"POST",data:{name:d,data:{desc:O||"",filters:r}}}).then((function(e){200===e.code&&(j(e.message),Object(u.M)(j,2e3),p(),f({loading:!1,success:!1,error:!1,message:""}),b(!1))}));case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(13),f({loading:!0,error:!0,message:e.t0.message}),setTimeout((function(){f({loading:!1,success:!1,error:!1,message:""})}),2e3);case 22:case"end":return e.stop()}}),e,null,[[13,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){J(c,r,a,o,i,"next",e)}function i(e){J(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(a.Button,{isPrimary:!0,onClick:function(){return v()}},s?Object(c.__)("Save","wp-marketing-automations-crm"):Object(c.__)("Add","wp-marketing-automations-crm"))},Q=(n(475),n(124)),W=n(115),Z=n.n(W),ee=n(163),te=n.n(ee),ne=n(120),re=n.n(ne),ae=n(110),ce=n.n(ae),oe=n(18);function ie(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw c}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ue(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}var se={name:"audience",className:"bwf-search-bwf-tags-result",options:function(e){return(t=regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={search:t,limit:10,offset:0},e.next=3,l()({path:Object(u.g)("/audiences?"+Object(oe.stringify)(n)),method:"GET"});case 3:return r=e.sent,a=re()(r,"result")?r.result:[],Z()(a)||(a=a.map((function(e){return{key:String(e.ID),label:e.name}}))),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var c=t.apply(e,n);function o(e){ue(c,r,a,o,i,"next",e)}function i(e){ue(c,r,a,o,i,"throw",e)}o(void 0)}))},function(e){return n.apply(this,arguments)})(e);var t,n},isDebounced:!0,getOptionIdentifier:function(e){return e.key},getOptionKeywords:function(e){return[e.label]},getFreeTextOptions:function(e,t){var n,a=ie(t);try{for(a.s();!(n=a.n()).done;){if(n.value.value.label.toLowerCase()===e.toLowerCase())return[]}}catch(e){a.e(e)}finally{a.f()}return[{key:"name",label:Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name"},ce()({mixedString:Object(c.__)("Search all audience with name {{query /}}","wp-marketing-automations-crm"),components:{query:Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{key:"0",label:e}}]},getOptionLabel:function(e,t){var n=Object(u.e)(e.label,t)||{};return Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":e.label},Object.keys(n).length>0?Object(r.createElement)(r.Fragment,null,n.suggestionBeforeMatch,Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch):e.label)},getOptionCompletion:function(e){return e}};function fe(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}var be=function(e){var t=e.query,n=t.hasOwnProperty("s")?t.s:"",a=Z()(n)?[]:[{key:n,label:Object(c.__)("Search Audience: ","wp-marketing-automations-crm")+n,bwfLabelSource:"bwfcrm_lists",isSearchTerm:!0}],i=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r,a,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te()(n)){e.next=2;break}return e.abrupt("return");case 2:if(Z()(n)||(r=n[n.length-1],(n=[])[0]=r),a=n.find((function(e){return re()(e,"label")})),!(Object(o.isUndefined)(a)&&n.length>0&&n[0].hasOwnProperty("name"))){e.next=7;break}return Object(m.j)({s:n[0].name},"/manage/audience",t),e.abrupt("return");case 7:if(c=Object(o.isUndefined)(a)?void 0:a.label,i=re()(t,"s")&&!Z()(t.s)?t.s:"",c!==i){e.next=11;break}return e.abrupt("return");case 11:Object(m.j)({s:c},"/manage/audiences",t);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){fe(c,r,a,o,i,"next",e)}function i(e){fe(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return Object(r.createElement)(Q.a,{autocompleter:se,multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:a,onChange:i,placeholder:Object(c.__)("Search by name","wp-marketing-automations-crm"),showClearButton:!0,disabled:!1})},me=n(206),pe=n(35),de=n(46);function Oe(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var we=function(){var e=Object(m.h)(),t=Object(I.a)(),n=ve(Object(r.useState)(!1),2),i=n[0],p=n[1],d=ve(Object(r.useState)(!1),2),O=d[0],y=d[1],g=ve(Object(r.useState)(!1),2),j=g[0],v=g[1],h=ve(Object(r.useState)(""),2),w=h[0],E=h[1],_=ve(Object(r.useState)(!1),2),S=_[0],k=_[1],x=ve(Object(r.useState)(""),2),D=x[0],R=x[1],B=ve(Object(r.useState)({loading:!1,status:!1}),2),M=B[0],q=B[1],U=ve(Object(r.useState)({loading:!1,error:!1,success:!1,message:""}),2),$=U[0],G=U[1],H=N()("bwf-audience-lists",{"has-search":!0}),K=z(),J=K.getAudiences,Q=K.getLoading,W=K.getOffset,Z=K.getPageNumber,ee=K.getPerPageCount,te=K.getTotalCount,ne=K.getCountData,re=K.getContactCountData,ae=ee(),ce=W(),ie=e.s,le=J(),ue=Z(),se=Q(),fe=te(),ye=ne(),je=re(),he=ve(Object(r.useState)({}),2),we=he[0],Ee=he[1];Object(r.useEffect)((function(){Ee(je)}),[je]);var _e=L(),Se=_e.fetch,ke=_e.setStateAudienceValues;Object(r.useEffect)((function(){Se(ae,ce,ie||""),y(!1)}),[ae,ce,ie]);var Ce=Object(r.createElement)(a.Button,{isPrimary:!0,key:"add",className:"bwf-display-flex",onClick:function(){p(!0),E(""),v(!1),R("")}},Object(c.__)("Add New","wp-marketing-automations-crm")),xe=Object(pe.a)().getPageCountData,Ne=Object(de.a)().setPageCountData,Pe=xe();Object(r.useEffect)((function(){Ne(ge(ge({},Pe),ye))}),[ye]),Object(me.a)("manage_audiences","",Object(c.__)("ALL AUDIENCE","wp-marketing-automations-crm"),Ce),Object(r.useEffect)((function(){if(!O&&!Object(o.isEmpty)(le)&&!se)try{var e={audience_ids:[]};le.map((function(t){e.audience_ids.push(t.ID)})),l()({method:"GET",path:Object(u.g)("/audiences/contacts?"+Object(oe.stringify)(e))}).then((function(e){200==e.code&&(ke("contactCountData",ge(ge({},e.result),je)),y(!0))}))}catch(e){console.log(e)}}),[le]);var Fe=[{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-30"},{key:"name",label:Object(c.__)("Name","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"description",label:Object(c.__)("Description","wp-marketing-automations-crm"),isLeftAligned:!0,cellClassName:"bwf-w-40p"},{key:"createdon",label:Object(c.__)("Created On","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"contacts",label:Object(c.__)("Contacts","wp-marketing-automations-crm"),isLeftAligned:!0}],Ae=function(){Se(ae,ce,ie||""),y(!1)},Te=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q({status:!0,loading:!0}),e.prev=1,e.next=4,l()({path:Object(u.g)("/audience/".concat(t)),method:"DELETE"}).then((function(e){200===e.code&&(q({status:!0,success:e.message}),setTimeout((function(){Se(ae,ce,""),y(!1)}),1e3))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),q({status:!0,error:e.t0.message?e.t0.message:Object(c.__)("Error in deleting audience","wp-marketing-automations-crm")});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Oe(c,r,a,o,i,"next",e)}function i(e){Oe(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),Ie=le.map((function(t){return[{display:(i=t,Object(r.createElement)(P.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations-crm"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(F.a,{isClickable:!0,onInvoke:function(){Object(m.j)(ge(ge({},i.data.filters),{},{filter:"advanced",path:"/contacts"}),"/",e),n()}},Object(r.createElement)(A.a,{justify:"flex-start"},Object(r.createElement)(A.c,null,Object(r.createElement)(T.a,{icon:"view"})),Object(r.createElement)(A.c,null,Object(c.__)("View Contacts","wp-marketing-automations-crm")))),Object(r.createElement)(F.a,{isClickable:!0,onInvoke:function(){v(i),E(i.name),R(i.data.desc?i.data.desc:""),p(!0),n()}},Object(r.createElement)(A.a,{justify:"flex-start"},Object(r.createElement)(A.c,null,Object(r.createElement)(T.a,{icon:"edit"})),Object(r.createElement)(A.c,null,Object(c.__)("Edit","wp-marketing-automations-crm")))),Object(r.createElement)(F.a,{isClickable:!0,onInvoke:function(){q({status:!0,confirmText:Object(c.__)("Are you sure you want to delete this audience ?","wp-marketing-automations-crm"),buttonConfirm:Object(c.__)("Confirm","wp-marketing-automations-crm"),buttonCancel:Object(c.__)("Cancel","wp-marketing-automations-crm"),onConfirm:function(){return Te([i.ID])}}),n()}},Object(r.createElement)(A.a,{justify:"flex-start"},Object(r.createElement)(A.c,null,Object(r.createElement)(T.a,{icon:"trash"})),Object(r.createElement)(A.c,null,Object(c.__)("Delete","wp-marketing-automations-crm")))))}})),value:"action"},{display:t.name,value:""},{display:t.data.hasOwnProperty("desc")&&!Object(o.isEmpty)(t.data.desc)?t.data.desc:"-",value:""},{display:(a=t.created_at,Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("span",null,Object(u.C)(a)))),value:""},{display:(n=t,O?we.hasOwnProperty(parseInt(n.ID))&&we[parseInt(n.ID)].contact_count>0?Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("a",{onClick:function(){Object(m.j)(ge(ge({},n.data.filters),{},{filter:"advanced",path:"/contacts",page:"autonami"}),"/",{})},className:"bwf-a-no-underline"},parseInt(we[parseInt(n.ID)].subscribers_count)+" of "+we[parseInt(n.ID)].contact_count),Object(r.createElement)("span",null,Object(c.__)("Subscribed","wp-marketing-automations-crm"))):"-":Object(r.createElement)("span",{className:"bwf-placeholder-temp bwf-w-150",title:"Loading"},"Loading")),value:""}];var n,a,i})),De=function(e){e!==ae&&ke("limit",e)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(C.a,{className:H,rows:Ie,headers:Fe,query:{paged:ue},rowsPerPage:ae,totalRows:fe,isLoading:se,onPageChange:function(e,t){ke("offset",(e-1)*ae)},onQueryChange:function(e){return"per_page"!==e?function(){}:De},showMenu:!1,rowHeader:!0,actions:[Object(r.createElement)(be,{key:"search",query:e})],emptyMessage:Object(c.__)("No audiences found","wp-marketing-automations-crm")}),i&&Object(r.createElement)(a.Modal,{title:j?"Edit Audience":"Add Audience",onRequestClose:function(){return p(!1)},shouldCloseOnClickOutside:!1,className:"bwf-admin-modal bwf-admin-modal-xl bwf-audience-modal-update bwf-admin-modal-overflow-visible"},$&&$.loading?$.loading&&$.success&&$.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(s.a,null),Object(r.createElement)("div",{className:"bwf-h1"},$.message)):$.loading&&$.error&&$.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(f.a,null),Object(r.createElement)("div",{className:"bwf-h1"},$.message)):Object(r.createElement)(b.a,null):Object(r.createElement)(r.Fragment,null,S&&Object(r.createElement)(a.Notice,{status:"error",onRemove:function(){return k(!1)}},Object(c.__)("Name is required","wp-marketing-automations-crm")),Object(r.createElement)(a.TextControl,{type:"text",value:w,autoFocus:!0,placeholder:Object(c.__)("Enter Name","wp-marketing-automations-crm"),label:Object(c.__)("Name","wp-marketing-automations-crm"),onChange:function(e){E(e),Object(o.isEmpty)(e)?k(!0):k(!1)}}),Object(r.createElement)(a.TextareaControl,{placeholder:Object(c.__)("Enter description","wp-marketing-automations-crm"),label:Object(c.__)("Description","wp-marketing-automations-crm"),value:D,onChange:function(e){return R(e)}}),Object(r.createElement)("span",null,Object(c.__)("Filters","wp-marketing-automations-crm")),Object(r.createElement)(Y.a,{siteLocale:"en-US",currency:Object(u.X)()?bwfcrm_contacts_data.currency:{},config:{title:Object(c.__)("Select Rules","wp-marketing-automations-crm"),filters:t,enableGrouping:!0,hideAdvanceControl:!0,footerComponent:function(e){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.Button,{isTertiary:!0,className:"bwf-mr-5",onClick:function(){return p(!1)}},Object(c.__)("Cancel","wp-marketing-automations-crm")),Object(r.createElement)(X,{filter:e.data,config:e.config,audienceDetail:j,setModal:G,setOpen:p,title:w,desc:D,error:S,setError:k,reloadList:Ae}))}},path:"/manage/audience",query:j?j.data.filters:{}}))),Object(r.createElement)(V.a,{confirmText:M.confirmText,confirmButtonText:M.buttonConfirm,cancelButtonText:M.buttonCancel,onConfirm:M.onConfirm,isLoading:M.loading,successMessage:M.success,errorMessage:M.error,onRequestClose:function(){return q({status:!1})},isOpen:M.status,isDelete:!0}))}},474:function(e,t,n){},475:function(e,t,n){},476:function(e,t,n){},482:function(e,t,n){"use strict";var r=n(0),a=n(15),c=n.n(a),o=(n(490),bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{});t.a=function(e){var t=e.code,n=e.order,a=e.className,i=(e.size,e.hideFromScreenReader),l=c()("bwf-flag",a),u=t||"unknown";n&&n.shipping&&n.shipping.country?u=n.shipping.country:n&&n.billing&&n.billing.country&&(u=n.billing.country);var s=(o.hasOwnProperty("pluginDir")?o.pluginDir:"")+"/admin/assets/img/flags/"+u.toLowerCase()+".png";return Object(r.createElement)("div",{className:l,"aria-hidden":i},Object(r.createElement)("img",{width:"20",height:"15",src:s,alt:u,onError:function(e){e.target.style.display="none"}}))}},490:function(e,t,n){},548:function(e,t,n){"use strict";var r=n(0),a=n(4),c=n(7),o=(n(549),n(9));t.a=function(e){var t=e.onFileSelected,n=e.htmlData,i=(e.filetypeArray,e.btnLabel),l=Object(r.useContext)(c.b),u=function(e){e&&e[0]&&"type"in e[0]?(t(e[0]),Object(c.M)(l,3e3)):l(Object(a.__)("Uploaded file not found","wp-marketing-automations-crm"))};return Object(r.createElement)("div",{className:"bwf-c-import-page-wrapper"},Object(r.createElement)(o.DropZoneProvider,null,Object(r.createElement)("div",null,Object(r.createElement)(o.Placeholder,{className:"bwf-import-dropzone-wrap",label:Object(r.createElement)(r.Fragment,null,n&&Object(r.createElement)(r.Fragment,null,n),Object(r.createElement)("div",{className:""},Object(r.createElement)("span",{className:"bwf-mr-15"},i||Object(a.__)("Drop you file OR","wp-marketing-automations-crm"))),Object(r.createElement)("div",null,Object(r.createElement)(o.FormFileUpload,{isSecondary:!0,accept:"text/csv",onChange:function(e){return u(e.target.files)}},Object(a.__)("Click here to upload","wp-marketing-automations-crm"))))}),Object(r.createElement)(o.DropZone,{onFilesDrop:u,onHTMLDrop:u,onDrop:u}))),Object(r.createElement)("div",{className:"bwf_clear_20"}))}},549:function(e,t,n){},561:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(0),a=n(9),c=n(4),o=n(5),i=n(361),l=n(455),u=n(32),s=n(117),f=n(13);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){var t=e.headersData,n=e.onRequestImport,b=e.submitButtonText,O=e.secondaryButtonText,y=e.onSecondaryButtonClick,g=e.savedData,j=e.buttonAlignClass,v=e.backButtonText,h=e.backButtonClick,w=e.extra,E=e.isSubmitButtonBusy,_=e.sourceHeaderText,S=void 0===_?Object(c.__)("Columns To Import","wp-marketing-automations-crm"):_,k=e.contactHeaderText,C=void 0===k?Object(c.__)("Map Into Field","wp-marketing-automations-crm"):k,x=t.headers,N=t.fields,P=d(Object(r.useState)(g&&g.mapped_fields?function(e,t){if(!e)return{};var n={},r=function(r){t.find((function(e){return e.index.toString()===r}))&&(n[r]=e[r])};for(var a in e)r(a);return n}(g.mapped_fields,x):{}),2),F=P[0],A=P[1],T=d(Object(r.useState)(1),2),I=T[0],D=T[1],R=g&&g.tags?g.tags.map((function(e){return{key:e.id,label:e.value}})):[],B=g&&g.lists?g.lists.map((function(e){return{key:e.id,label:e.value}})):[],M=d(Object(r.useState)(R),2),q=M[0],L=M[1],U=d(Object(r.useState)(B),2),$=U[0],G=U[1],H=d(Object(r.useState)(!g||!("update_existing"in g)||g.update_existing),2),K=H[0],z=H[1],Y=d(Object(r.useState)(!g||!("marketing_status"in g)||g.marketing_status),2),V=Y[0],J=(Y[1],d(Object(r.useState)(!(!g||!("trigger_events"in g))&&g.trigger_events),2)),X=J[0],Q=J[1],W=d(Object(r.useState)(null),2),Z=W[0],ee=W[1],te=(w||{}).disableMarketingStatusCheck,ne=void 0!==te&&te,re=function(){return ee(null),0===Object(o.size)(F)?(setTimeout((function(){return ee(Object(c.__)("Select the contact fields.","wp-marketing-automations-crm"))}),500),!1):!!Object.values(F).includes("email")||(setTimeout((function(){return ee(Object(c.__)("Map contact email with a form field.","wp-marketing-automations-crm"))}),500),!1)},ae=function(){if(re()){var e={};x.map((function(t){t.index in F&&(e[t.index]=F[t.index])}));var t={map:e,tags:q.map((function(e){return{id:e.key,value:e.label}})),lists:$.map((function(e){return{id:e.key,value:e.label}})),update_existing:K,trigger_events:X,imported_contact_status:I};!ne&&(t.marketing_status=V),n(t)}},ce=function(){if(re()){var e={};x.map((function(t){t.index in F&&(e[t.index]=F[t.index])}));var t={map:e,tags:q.map((function(e){return{id:e.key,value:e.label}})),lists:$.map((function(e){return{id:e.key,value:e.label}})),update_existing:K,trigger_events:X};!ne&&(t.marketing_status=V),y(t)}};if(!Object(o.isArray)(N)||!N.length>0)return Object(r.createElement)(a.Notice,{status:"error"},Object(c.__)("No contact fields found"));if(!Object(o.isArray)(x)||!x.length>0)return Object(r.createElement)(a.Notice,{status:"error"},Object(c.__)("No mapping fields found"));var oe={0:Object(c.__)("Unverified","wp-marketing-automation-crm"),1:Object(c.__)("Subscribed","wp-marketing-automation-crm"),2:Object(c.__)("Bounced","wp-marketing-automation-crm"),3:Object(c.__)("Unsubscribed","wp-marketing-automation-crm")};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-c-import-mapper-fields bwf-card-wrap bwf-form-fields bwf-crm-importer-csv-wrap"},Object(r.createElement)("div",{className:"bwf-card-header"},Object(r.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Mapping","wp-marketing-automations-crm"))),Z&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.a,null),Object(r.createElement)(a.Notice,{status:"error",onRemove:function(){return ee(null)}},Z)),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)("strong",null,S),Object(r.createElement)("span",null),Object(r.createElement)("strong",null,C)),x.map((function(e){return Object(r.createElement)("div",{key:e.index,className:"bwf-c-import-field"},Object(r.createElement)(a.TextControl,{disabled:!0,value:e.header}),Object(r.createElement)("span",{className:"bwf-display-flex"},Object(r.createElement)(f.a,{icon:"mapper"})),Object(r.createElement)("select",{value:e.index in F?F[e.index]:"",onChange:function(t){return function(e,t){var n=t.target.value,r="index"in e?e.index:"";""===n&&r in F?A(Object(o.omit)(F,r)):""!==n&&""!==r&&A(m(m({},F),{},p({},r,n)))}(e,t)}},Object(r.createElement)("option",{value:""},Object(c.__)("Do not import this field","wp-marketing-automations-crm")),N.map((function(e){return"fields"in e&&e.fields.length>0&&Object(r.createElement)("optgroup",{key:e.id,label:e.name},e.fields.map((function(e){return Object(r.createElement)("option",{key:e.id,value:e.id},e.name)})))}))))}))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h4"},Object(c.__)("Contact Profile","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf-c-import-field-contact"},Object(r.createElement)(i.a,{onTagsChange:L,selected:q}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(l.a,{onListsChange:G,selected:$})),Object(r.createElement)("div",{className:"bwf_clear_20"}),!ne&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-p"},Object(c.__)("Status","wp-marketing-automations-crm")),Object(r.createElement)("select",{className:"bwf-import-csv-status-select",onChange:function(e){D(e.target.value)}},Object.keys(oe).map((function(e){return Object(r.createElement)("option",{key:e,value:e,selected:I==e},oe[e])})))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",null,Object(r.createElement)(a.ToggleControl,{label:Object(c.__)("Update existing contacts","wp-marketing-automations-crm"),checked:K,className:"bwf-tooglecontrol-advance",onChange:z})),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",null,Object(r.createElement)(a.ToggleControl,{label:Object(c.__)("Trigger automations (for tag & list related events)","wp-marketing-automations-crm"),checked:X,className:"bwf-tooglecontrol-advance",onChange:Q}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p-gap bwf-pt-0"},j?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(u.a,null,!!v&&Object(r.createElement)(u.b,null,Object(r.createElement)(a.Button,{isSecondary:!0,onClick:h},Object(r.createElement)("span",null,v))),Object(r.createElement)(u.b,{className:j},Object(r.createElement)(a.Button,{onClick:ae,isPrimary:!0},Object(r.createElement)("span",null,b||Object(c.__)("Import","wp-marketing-automations-crm"))),O&&Object(r.createElement)(a.Button,{onClick:ce,className:"bwf-ml-10",isSecondary:!0},O)))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.Button,{onClick:ae,isPrimary:!0,isBusy:!!E,disabled:!!E,className:"bwf-display-flex"},Object(r.createElement)("span",null,b||Object(c.__)("Import","wp-marketing-automations-crm"))),O&&Object(r.createElement)(a.Button,{onClick:ce,className:"bwf-ml-10",isSecondary:!0},O)))))}},710:function(e,t,n){},718:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(9),c=n(4),o=n(5),i=n(330),l=n(117),u=n(17);n(13);function s(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=e.title,n=e.setTitle,b=e.selected,m=e.setSelected,p=e.setStep,d=e.expfilter,O=f(Object(r.useState)(""),2),y=O[0],g=O[1],j=Object(u.h)(),v=Object(i.a)(),h=Object(r.useMemo)((function(){var e=[];return Object.entries(v).map((function(t){var n,r=f(t,2),a=r[0],c=r[1];n={key:a,label:c.labels.add},e.hasOwnProperty(c.group)?e[c.group].fields.push(n):e[c.group]={label:c.groupLabel,fields:[n]}})),e}),[v]);Object(r.useEffect)((function(){if(Object(o.isEmpty)(b)&&h.hasOwnProperty("contact_details")){var e=[];h.contact_details.fields.map((function(t){var n={};n[t.key]=t.label,e.push(n)})),m(e)}}),[]);var w=function(e){var t=!1;return b.find((function(n){var r=f(Object.entries(n)[0],2),a=r[0];r[1];e==a&&(t=!0)})),t},E=function(e,t){var n=0,c=!1;return h[e].fields.map((function(e){w(e.key)&&n++})),parseInt(h[e].fields.length)===parseInt(n)&&(c=!0),Object(r.createElement)("div",{className:"bwf-export-field-header-wrap"},Object(r.createElement)(a.CheckboxControl,{checked:c,className:"bwf-export-toggler",onChange:function(t){!function(e,t){var n=s(b);e?h[t].fields.map((function(e){if(!w(e.key)){var t={};t[e.key]=e.label,n.push(t)}})):h[t].fields.map((function(e){w(e.key)&&(n=n.filter((function(t){var n=f(Object.entries(t)[0],2),r=n[0];n[1];return r!==e.key})))})),m(n)}(t,e)}}),Object(r.createElement)("div",null,t,n>0&&Object(r.createElement)("span",{className:"bwf-p"}," ","( ",n," selected )")))},_=Object(r.createElement)("div",{className:"bwf-export-field-section"},Object(r.createElement)("div",{className:"bwf-export-field-header-wrap"},Object(r.createElement)("div",{className:"bwf-w-150 bwf-placeholder-temp"})),Object(r.createElement)("div",{className:"bwf-p-20 bwf-export-field-list"},Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:1}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:2}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:3}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:4}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:5}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:6}))),S=Object(r.createElement)(r.Fragment,null,["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"].map((function(e){return h.hasOwnProperty(e)?Object(r.createElement)("div",{className:"bwf-export-field-section"},E(e,h[e].label),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(r.createElement)("div",{className:"bwf-p-20 bwf-export-field-list"},e.map((function(e){return Object(r.createElement)(a.CheckboxControl,{label:e.label,className:"bwf-export-field",checked:w(e.key),onChange:function(t){if(t){var n=s(b),r={};r[e.key]=e.label,n.push(r),m(n)}else m(b.filter((function(t){var n=f(Object.entries(t)[0],2),r=n[0];n[1];return r!==e.key})))}})})))}(h[e].fields)):["woocommerce","contact_custom_fields"].includes(e)?"":_})));return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(c.__)("Fields","wp-marketing-automations-crm"))),Object(r.createElement)("div",{className:"bwfcrm-overview-wrap bwf-contact-export-step-one"},y&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l.a,null),Object(r.createElement)(a.Notice,{status:"error",onRemove:function(){return g("")}},y),Object(r.createElement)("div",{className:"bwf_clear_20"})),Object(r.createElement)("p",{className:"bwf-h4"},Object(c.__)("Export Name","wp-marketing-automations-crm")),Object(r.createElement)(a.TextControl,{type:"text",value:t,placeholder:Object(c.__)("Enter Name","wp-marketing-automations-crm"),onChange:function(e){n(e)}}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-field-wrapper"},Object(r.createElement)("p",{className:"bwf-h4"},Object(c.__)("Select fields","wp-marketing-automations-crm")),S),Object(r.createElement)("div",{className:"bwfcrm-export-buttons bwf-display-flex"},Object(r.createElement)("div",null),Object(r.createElement)(a.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,onClick:function(){Object(o.isEmpty)(t)?g(Object(c.__)("Title is required.","wp-marketing-automations-crm")):Object(o.isEmpty)(b)?g(Object(c.__)("Please select field to export.","wp-marketing-automations-crm")):(Object(o.isEmpty)(d)||Object(u.j)(d,"/",j),p(2))}},Object(r.createElement)("span",null,Object(c.__)("Next","wp-marketing-automations-crm"))))))}},741:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(561),c=n(548),o=n(9),i=n(16),l=n.n(i),u=n(7),s=n(4),f=(n(710),n(465)),b=n(543),m=n(111),p=n(17),d=n(18);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t=e.requestData,n=e.headersData.import_id,a=v(Object(r.useState)(null),2),c=a[0],i=a[1],O=v(Object(r.useState)(!0),2),g=O[0],h=O[1],w=c&&"log"in c?c.log:{},E=w.skipped,_=void 0===E?[]:E,S=w.failed,k=void 0===S?[]:S,C=w.succeed,x=void 0===C?[]:C,N=v(Object(r.useState)(null),2),P=N[0],F=N[1],A=Object(b.a)().showBackButton,T=v(Object(r.useState)(!1),2),I=T[0],D=T[1],R=Object(r.useRef)(null),B=location&&location.search?Object(d.parse)(location.search.substring(1)):{},M=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,a,c,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>0&&void 0!==o[0]&&o[0],e.prev=1,a=t&&"useExisting"in t&&t.useExisting?{}:t,!t.useExisting&&(a.start_import=r),e.next=6,l()({method:"POST",data:a,path:Object(u.g)("/import/csv/status/".concat(n))});case 6:c=e.sent,i(c.result),c.result&&"status"in c.result&&"success"===c.result.status&&(Object(u.w)()||(bwfcrm_contacts_data.first_contact_id=1),clearInterval(R.current),A(!0),D(!0)),h(!1),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(1),clearInterval(R.current),A(!0),F(e.t0),h(!1);case 18:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){j(c,r,a,o,i,"next",e)}function i(e){j(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.useEffect)((function(){return A(!1),window.scrollTo(0,0),M(!0),R.current=setInterval((function(){return M()}),5e3),function(){clearInterval(R.current),A(!0),h(!1)}}),[]),g?Object(r.createElement)(m.a,null):P||c&&!1 in c?Object(r.createElement)(o.Notice,{status:"error"},P&&"message"in P?P.message:Object(s.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations-crm")):c&&"percent"in c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(s.__)("Import Progress","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(s.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations-crm"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(f.a,{status:c.status,size:"lg",progress:parseInt(c.percent),text:Object(s.__)("".concat(c.percent,"%"),"wp-marketing-automations-crm")}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("p",null,"Skipped: ",parseInt(_)>0?_:0,", Failed:"," ",parseInt(k)>0?k:0,", Success:"," ",parseInt(x)>0?x:0)),I&&Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(o.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){Object(p.j)(y(y({},B),{},{path:"/contacts"}),"/contacts",B)}},Object(s.__)("Go To Contacts","wp-marketing-automations-crm")))):null},E=n(515),_=n(117);n(13);function S(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){Object(u.d)("CSV Importer");var t=k(Object(r.useState)(null),2),n=t[0],i=t[1],f=k(Object(r.useState)(null),2),b=f[0],p=f[1],d=k(Object(r.useState)(null),2),O=d[0],y=d[1],g=k(Object(r.useState)(!1),2),j=g[0],v=g[1],h=Object(r.useContext)(u.b),C=(0,Object(E.a)().getExistingImports)().csv,x=e.step,N=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,(t=new FormData).append("csv",n),e.next=6,l()({method:"POST",body:t,path:Object(u.g)("/import/csv/upload")});case 6:r=e.sent,p(r.result),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),i(null),h(e.t0&&"message"in e.t0?e.t0.message:Object(s.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations-crm"));case 14:Object(u.M)(h,2e3),v(!1);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){S(c,r,a,o,i,"next",e)}function i(e){S(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){n&&N()}),[n]),Object(r.useEffect)((function(){C&&(p({import_id:C}),y({useExisting:!0}))}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==x&&!C&&!n&&!j&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(s.__)("Configuration","wp-marketing-automations-crm"))),Object(r.createElement)(c.a,{onFileSelected:function(e){return i(e)},filetypeArray:["text/csv","text/plain","application/csv","text/comma-separated-values","application/excel","application/vnd.ms-excel","application/vnd.msexcel","text/anytext","application/octet-stream","application/txt"],btnLabel:Object(s.__)("Drop your CSV file here OR","wp-marketing-automations-crm")})),j&&Object(r.createElement)(m.a,null),2==x&&b&&"import_id"in b&&!O&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_.a,null),Object(r.createElement)(a.a,{buttonAlignClass:"bwf-crm-btn-right-alignment",headersData:b,onRequestImport:function(t){y(t),e.setStep(3)},contactHeaderText:Object(s.__)("Contact Fields","wp-marketing-automation-crm")})),2==x&&!j&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(r.createElement)(o.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){e.setStep(1),e.setImporter(null)}},Object(r.createElement)("span",null,Object(s.__)("Back","wp-marketing-automations-crm"))))),3==x&&O&&b&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(s.__)("Confirmation","wp-marketing-automations-crm"))),Object(r.createElement)(w,{requestData:O,setStep:e.setStep,setImporter:e.setImporter,headersData:b}))))}},743:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(330),c=n(111),o=n(9),i=n(4),l=n(466),u=n(312),s=n(7),f=n(17),b=n(125),m=n(5),p=n(32),d=n(482),O=n(19),y=n(181),g=n(13),j=n(130),v=n(15),h=n.n(v),w=n(464),E=n(454),_=n(202);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C=Object(b.a)(Object(s.H)()).formatAmount,x=function(e){var t=e.setContactCount,n=function(e){var t=Object(m.isEmpty)(e.country)?"":_[e.country],n=Object(s.Y)([e.city,e.state,t],", ");return Object(m.isEmpty)(Object(m.trim)(n))?"":n},a=function(e){var t=n(e);return e.country||t?Object(r.createElement)(p.a,{justify:"start"},!Object(m.isEmpty)(e.country)&&Object(r.createElement)(p.c,null,Object(r.createElement)(d.a,{code:e.country,size:18})),Object(r.createElement)(p.c,null,t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",null,n(e)),Object(r.createElement)("br",null)))):"-"},c=function(e){return Object(r.createElement)(O.a,{href:"admin.php?page=autonami&path=/contact/"+e.id,className:"bwf-a-no-underline"},Object(r.createElement)(y.a,{contact:e,hideJoiningDate:!0}))},o=function(e){return Object(r.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email&&Object(r.createElement)(p.a,{justify:"start",align:"top"},Object(r.createElement)(p.c,null,Object(r.createElement)(g.a,{icon:"mail"})),Object(r.createElement)(p.c,null,Object(r.createElement)(O.a,{href:"mailto:"+e.email,className:"bwf-a-no-underline",type:"external"},e.email))),e.phone&&Object(r.createElement)(p.a,{justify:"start",align:"top"},Object(r.createElement)(p.c,null,Object(r.createElement)(g.a,{icon:"phone"})),Object(r.createElement)(p.c,null,Object(r.createElement)(O.a,{href:"tel:"+e.phone,className:"bwf-a-no-underline",type:"external"},e.phone))))},l=Object(w.a)(),u=l.getPageNumber,f=l.getPerPageCount,b=l.getTotalCount,v=l.getLoading,k=l.getContacts,x=Object(E.a)().fetch,N=e.query,P=k(),F=u(),A=f(),T=b(),I=v(),D=S(Object(r.useState)(!0),2),R=D[0],B=D[1];Object(r.useEffect)((function(){R&&T>0&&B(!1),t(T)}),[T]);var M=[{key:"contact",label:Object(i.__)("Contact","wp-marketing-automations-crm"),isLeftAligned:!0,required:!0},{key:"contact_details",label:Object(i.__)("Details","wp-marketing-automations-crm"),isLeftAligned:!0}];Object(s.X)()?(M.push({key:"total_spent",label:Object(i.__)("Total Spent","wp-marketing-automations-crm"),isLeftAligned:!0}),M.push({key:"last_order",label:Object(i.__)("Last Order","wp-marketing-automations-crm"),isLeftAligned:!0})):M.push({key:"column_location",label:Object(i.__)("Location","wp-marketing-automations-crm"),isLeftAligned:!0});var q=function(e){var t=e.wc,n=t.total_order_count,a=t.total_order_value;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-c-listing-total-spent"},a&&n?Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},C(a)," |"," ",n," ",Object(i.__)(parseInt(n)>1?"orders":"order","wp-marketing-automations-crm")):"-"))},L=function(e){var t=e.wc.l_order_date;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,t&&"0000-00-00"!=t?Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(s.B)(t)):"-"))},U=P.map((function(e){var t=function(e){return Object(m.merge)({id:0,email:"-",first_name:"",last_name:"",creation_date:"",fields:{marketing_status:"0",first_order_date:"",country:"",city:"",state:"",phone:""},wc:{id:1,l_order_date:"",total_order_count:0,total_order_value:0,total_purchased_items:0}},e)}(e),r=[{display:c(t),value:Object(s.Y)([t.first_name,t.last_name]," ")},{display:o(t),value:Object(i.__)("Email: "+t.email+", Phone: "+t.phone,"wp-marketing-automations-crm")}];return Object(s.X)()?(r.push({display:q(t),value:""}),r.push({display:L(t),value:""})):r.push({display:a(t),value:n(t)}),r})),$=function(e){e!==A&&x(N,0,e,!0,!1,"",!1)},G=h()("bwfcrm-contacts-list",{"has-search":!0}),H=parseInt(T)>0?" ("+parseInt(T)+")":"";return Object(r.createElement)(j.a,{className:G,title:Object(i.__)("Contacts ","wp-marketing-automations-crm")+H,rows:U,headers:M,query:{paged:F},rowsPerPage:A,totalRows:T,isLoading:I,onPageChange:function(e,t){x(N,(e-1)*A,A,!0,!1,"",!1)},onQueryChange:function(e){return"per_page"!==e?function(){}:$},showMenu:!1,emptyMessage:Object(i.__)("No contacts found","wp-marketing-automations-crm")})};x.defaultProps={contacts:[]};var N=x;function P(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.default=function(e){var t=e.setStep,n=e.setExportFilter,b=e.contactCount,p=e.setContactCount,d=Object(a.a)(),O=Object(f.h)(),y=O.page,g=O.path,j=(O.filter,P(O,["page","path","filter"])),v=Object(E.a)().fetch;return Object(r.useEffect)((function(){v(j,0,10,!0,!1,"",!1)}),[O]),!0===d?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(c.a,null),Object(r.createElement)("div",{className:"bwf_clear_20"})):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(i.__)("Contacts","wp-marketing-automations-crm"))),Object(r.createElement)("div",{className:"bwf-export-filter-wrapper"},Object(r.createElement)("div",{className:"bwf-display-flex",style:{justifyContent:"space-between"}},Object(r.createElement)("div",{className:"bwf-h3 bwf-w-300"},Object(i.__)("Segment Contacts","wp-marketing-automations-crm")),Object(r.createElement)(l.c,{addAdvance:!1})),Object(r.createElement)("div",{className:"bwf-p-0"},Object(r.createElement)(u.a,{siteLocale:"en-US",currency:Object(s.X)()?bwfcrm_contacts_data.currency:{},config:{title:Object(i.__)("Select Rules","wp-marketing-automations-crm"),filters:d,footerComponent:function(e){return Object(r.createElement)(l.a,{filter:e.data,config:e.config})},enableGrouping:!0},path:"/export",query:O}))),Object(r.createElement)("div",{className:"bwf-export-table-wrapper"},Object(r.createElement)(N,{setContactCount:p})),Object(r.createElement)("div",{className:"bwf-p-20"},Object(r.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(r.createElement)(o.Button,{className:"bwfcrm-export-prev bwf-display-flex",isSecondary:!0,onClick:function(){Object(m.isEmpty)(j)||Object(f.j)({page:y,path:g},"/",{}),n(j),t(1)}},Object(r.createElement)("span",null,Object(i.__)("Previous","wp-marketing-automations-crm"))),Object(r.createElement)(o.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,disabled:!(b>0),onClick:function(){Object(m.isEmpty)(j)||Object(f.j)({page:y,path:g},"/",{}),n(j),b>0&&t(3)}},Object(r.createElement)("span",null,Object(i.__)("Next","wp-marketing-automations-crm"))))))}}}]);