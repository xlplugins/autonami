(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{111:function(e,t,a){"use strict";var c=a(0),n=a(4),r=a(15),s=a.n(r),l=a(9),i=a(33),m=a(8),o=a.n(m),b=a(94),u=(a(138),function(e){var t=e.id,a=e.instanceId,r=e.isVisible,m=e.label,o=e.popoverContents,b=e.remove,u=e.screenReaderLabel,d=e.setState,p=e.className;if(u=u||m,!m)return null;m=Object(i.decodeEntities)(m);var f=s()("bwf-tag",p,{"has-remove":!!b}),O="bwf-tag-label-".concat(a),j=Object(c.createElement)(c.Fragment,null,Object(c.createElement)("span",{className:"screen-reader-text"},u),Object(c.createElement)("span",{"aria-hidden":"true"},m));return Object(c.createElement)("span",{className:f},o?Object(c.createElement)(l.Button,{className:"bwf-tag-text",id:O,onClick:function(){return d((function(){return{isVisible:!0}}))}},j):Object(c.createElement)("span",{className:"bwf-tag-text",id:O},j),o&&r&&Object(c.createElement)(l.Popover,{onClose:function(){return d((function(){return{isVisible:!1}}))}},o),b&&Object(c.createElement)(l.Button,{className:"bwf-tag-remove",onClick:function(){return b(t,m)},label:Object(n.sprintf)(Object(n.__)("Remove %s","wp-marketing-automations-crm"),m),"aria-describedby":O},Object(c.createElement)(l.Dashicon,{icon:"dismiss",size:20})))});u.propTypes={id:o.a.oneOfType([o.a.number,o.a.string]),label:o.a.string.isRequired,popoverContents:o.a.node,remove:o.a.func,screenReaderLabel:o.a.string},t.a=Object(b.withState)({isVisible:!1})(Object(b.withInstanceId)(u))},138:function(e,t,a){},243:function(e,t,a){"use strict";var c=a(0),n=a(4),r=a(8),s=a.n(r),l=a(111),i=(a(256),a(13)),m=function(e){var t=e.items;return Object(c.createElement)(l.a,{className:"bwf-view-more-list",label:Object(c.createElement)("span",{className:"bwf-display-flex"},Object(c.createElement)("span",{className:"bwf-view-more-label"},Object(n.sprintf)(Object(n.__)("+%d ","bwf-admin"),t.length-1)),Object(c.createElement)(i.a,{icon:"tailless-arrow-down"})),popoverContents:Object(c.createElement)("ul",{className:"bwf-view-more-list__popover"},t.map((function(e,t){return Object(c.createElement)("li",{key:t,className:"bwf-view-more-list__popover__item"},e)})))})};m.propTypes={items:s.a.arrayOf(s.a.node)},m.defaultProps={items:[]},t.a=m},256:function(e,t,a){},765:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(4),r=a(5),s=a(15),l=a.n(s),i=a(124),m=a(247),o=a(366),b=a(7),u=a(130),d=a(204),p=a(243),f=a(325),O=a(13);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],c=!0,n=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(c=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);c=!0);}catch(e){n=!0,r=e}finally{try{c||null==l.return||l.return()}finally{if(n)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,c=new Array(t);a<t;a++)c[a]=e[a];return c}var _=Object(i.a)(Object(b.G)()).formatAmount;t.default=function(e){var t=Object(o.a)(),a=m.a.getContact(),s=m.a.getOrdersLimit(),i=m.a.getOrdersOffset(),w=m.a.getOrderContactId(),g=m.a.getOrderPage(),E=m.a.getSubscriptions(),v=m.a.getSubscriptionLoading(),y=m.a.getSubscriptionsLimit(),h=m.a.getSubscriptionsTotal(),N=m.a.getSubscriptionsOffset(),k=m.a.getSubscriptionPage();Object(c.useEffect)((function(){a&&"id"in a&&parseInt(a.id)!==parseInt(w)&&(t.fetchOrders(parseInt(a.id),i,s),a&&!Object(r.isEmpty)(a.wcs)&&t.fetchSubscription(parseInt(a.id),N,y))}),[a]);var A,C=m.a.getOrders(),S=m.a.getOrderLoading(),I=m.a.getOrdersTotal(),P=a&&a.wc&&a.wc.purchased_products?a.wc.purchased_products:[],L=a&&a.wc&&a.wc.purchased_products_cats?a.wc.purchased_products_cats:[],D=a&&a.wc&&a.wc.purchased_products_tags?a.wc.purchased_products_tags:[],F=a&&a.wc&&a.wc.used_coupons?a.wc.used_coupons:[],T=l()("bwfcrm-contacts-orders",{"has-search":!0}),R=[{key:"column_date",label:Object(n.__)("Date","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"column_order_id",label:Object(n.__)("Order ID","wp-marketing-automations-crm"),isLeftAligned:!1},{key:"column_status",label:Object(n.__)("Status","wp-marketing-automations-crm"),isLeftAligned:!1},{key:"column_products",label:Object(n.__)("Products","wp-marketing-automations-crm"),isLeftAligned:!1},{key:"column_net_sale",label:Object(n.__)("Revenue","wp-marketing-automations-crm"),isLeftAligned:!1}],x=[{key:"date",label:Object(n.__)("Created On","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"sub_id",label:Object(n.__)("Subscription ID","wp-marketing-automations-crm"),isLeftAligned:!1},{key:"renew_date",label:Object(n.__)("Next Renewal Date","wp-marketing-automations-crm"),isLeftAligned:!1},{key:"status",label:Object(n.__)("Status","wp-marketing-automations-crm"),isLeftAligned:!1},{key:"total_renewals",label:Object(n.__)("Total Renewal","wp-marketing-automations-crm"),isLeftAligned:!1},{key:"total",label:Object(n.__)("Total","wp-marketing-automations-crm"),isLeftAligned:!1}],M=function(e,t){var a,n,s,l=[{display:Object(b.A)(e.date),value:e.date},{display:Object(c.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?post="+e.id+"&action=edit"},"#"+e.id),value:e.id}];return"subscription"==t&&l.push({display:e.next_renewal_date?Object(b.A)(e.next_renewal_date):"-",value:""}),l.push({display:e.status,value:e.status}),"subscription"==t&&l.push({display:e.total_renewal?e.total_renewal:"0",value:""}),"order"==t&&l.push({display:(a=e.items,n="",s=[],Object.entries(a).map((function(e){var t=j(e,2),a=t[0],l=t[1];Object(r.isEmpty)(n)&&(n=Object(c.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?action=edit&post="+a},l)),s.push(Object(c.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?action=edit&post="+a},l))})),Object(c.createElement)(c.Fragment,null,!Object(r.isEmpty)(n)&&n,!Object(r.isEmpty)(s)&&s.length>1&&Object(c.createElement)(p.a,{items:s}))),value:""}),l.push({display:_(e.total),value:e.total}),l},J=Object(r.isArray)(C)?C.map((function(e){return M(e,"order")})):[],V=Object(r.isArray)(E)?E.map((function(e){return M(e,"subscription")})):[],q=function(e,c){var n=(c-1)*s;"order"==e?t.fetchOrders(parseInt(a.id),n,s):"subscription"==e&&t.fetchSubscription(parseInt(a.id),n,y)},H=function(e,t){return"per_page"!==t?function(){}:"order"==e?B:"subscription"==e?G:void 0},B=function(e){e!==s&&t.fetchOrders(parseInt(a.id),0,e)},G=function(e){e!==y&&t.fetchSubscription(parseInt(a.id),0,e)},Q=function(){return Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"bwf-c-s-list"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(n.__)("Total Spend","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},a&&_(a.wc.total_order_value))),Object(c.createElement)("div",{className:"bwf-c-s-list"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(n.__)("AOV","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},a&&function(){var e="";if(a.wc){var t,n=a.wc.aov_contact?parseFloat(a.wc.aov_contact):0,r=a.wc.aov_store?parseFloat(a.wc.aov_store):0;t=Number.isFinite(n)&&Number.isFinite(r)?0===r?0:Math.round((n-r)/r*100):null,e=n?t>0?Object(c.createElement)("div",null,_(n),Object(c.createElement)("span",{className:"bwf-c-s-hl bwf-c-s-hl-g"},t,"%")):Object(c.createElement)("div",null,_(n),Object(c.createElement)("span",{className:"bwf-c-s-hl bwf-c-s-hl-r"},t,"%")):"-"}return e}())),Object(c.createElement)("div",{className:"bwf-c-s-list"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(n.__)("Details","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},S?Object(c.createElement)(d.a,{caption:Object(n.__)("Orders","wp-marketing-automations-crm"),className:T,headers:R}):Object(r.isEmpty)(J)?"-":Object(c.createElement)(u.a,{className:T,title:"",rows:J,headers:R,query:{paged:g},rowsPerPage:s,totalRows:I,isLoading:S,showMenu:!1,rowHeader:!0,onPageChange:function(e){return q("order",e)},onQueryChange:function(e){return H("order",e)},emptyMessage:Object(n.__)("No orders found","wp-marketing-automations-crm")}),Object(c.createElement)("div",{className:"bwf_clear_20"}))))};return Object(c.createElement)("div",{className:"bwf-c-s-data"},Object(c.createElement)(f.a,{items:(A=[{key:0,label:Object(n.__)("Products","wp-marketing-automations-crm"),display:Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"bwf-c-s-list bwf-c-s-list-items"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(n.__)("Items","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value bwf-c-s-inline-p"},Object(r.isEmpty)(P)?"-":P.map((function(e){return Object(c.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?post="+parseInt(e.id)+"&action=edit"},e.name)})))),Object(c.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-terms"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(n.__)("Categories","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},Object(r.isEmpty)(L)?"-":Object(c.createElement)(c.Fragment,null,Object(c.createElement)("ul",null,L.map((function(e){return Object(c.createElement)("li",{key:e.id},Object(c.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"term.php?taxonomy=product_cat&post_type=product&tag_ID="+e.id},Object(c.createElement)("span",null,e.name)))})))))),Object(c.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-terms"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(n.__)("Tags","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},Object(r.isEmpty)(D)?"-":Object(c.createElement)(c.Fragment,null,Object(c.createElement)("ul",null,D.map((function(e){return Object(c.createElement)("li",{key:e.id},Object(c.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"term.php?taxonomy=product_tag&post_type=product&tag_ID="+e.id},Object(c.createElement)("span",null,e.name)))})))))))},{key:1,label:Object(n.__)("Marketing","wp-marketing-automations-crm"),display:Object(c.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-coupons"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(n.__)("Coupons","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},Object(r.isEmpty)(F)?"-":Object(c.createElement)(c.Fragment,null,Object(c.createElement)("ul",null,F.map((function(e){return Object(c.createElement)("li",null,Object(c.createElement)("span",{className:"bwf-mr-5"},Object(c.createElement)(O.a,{icon:"coupon"})),Object(c.createElement)("span",null,e))}))))))},{key:2,label:Object(n.__)("Orders","wp-marketing-automations-crm"),display:Q()}],a&&!Object(r.isEmpty)(a.wcs)&&A.push({key:3,label:Object(n.__)("Subscription","wp-marketing-automations-crm"),display:Object(c.createElement)("div",{className:"bwf-c-s-list"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(n.__)("Details","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},v?Object(c.createElement)(d.a,{caption:Object(n.__)("Subscription","wp-marketing-automations-crm"),className:T,headers:x}):Object(r.isEmpty)(V)?"-":Object(c.createElement)(u.a,{className:T,title:"",rows:V,headers:x,query:{paged:k},rowsPerPage:y,totalRows:h,isLoading:v,showMenu:!1,rowHeader:!0,onPageChange:function(e,t){return q("subscription",e)},onQueryChange:function(e){return H("subscription",e)},emptyMessage:Object(n.__)("No subscriptions found","wp-marketing-automations-crm")}),Object(c.createElement)("div",{className:"bwf_clear_20"})))}),A)}))}},769:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(325),r=a(4),s=a(124),l=a(7),i=a(52),m=a(130),o=a(5),b=a(243);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],c=!0,n=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(c=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);c=!0);}catch(e){n=!0,r=e}finally{try{c||null==l.return||l.return()}finally{if(n)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,c=new Array(t);a<t;a++)c[a]=e[a];return c}t.default=function(){var e=u(Object(c.useState)(!1),2),t=e[0],a=e[1],d=Object(s.a)(Object(l.G)()).formatAmount,p=[{key:"column_date",label:Object(r.__)("Date","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"column_order_id",label:Object(r.__)("Order ID","wp-marketing-automations-crm"),isLeftAligned:!1},{key:"column_status",label:Object(r.__)("Status","wp-marketing-automations-crm"),isLeftAligned:!1},{key:"column_products",label:Object(r.__)("Products","wp-marketing-automations-crm"),isLeftAligned:!1},{key:"column_net_sale",label:Object(r.__)("Revenue","wp-marketing-automations-crm"),isLeftAligned:!1}],f=[{date:"2020-03-11 13:00:00",first_name:"John",id:1321,item_count:2,items:{235:"Product 1",347:"Product 2"},last_name:"Doe",status:"Completed",total:"24.51"},{date:"2020-03-16 06:54:00",first_name:"John",id:1322,item_count:2,items:{235:"Product 1"},last_name:"Doe",status:"Completed",total:"20"},{date:"2020-03-17 14:23:00",first_name:"John",id:1323,item_count:2,items:{347:"Product 2"},last_name:"Doe",status:"Completed",total:"30.02"},{date:"2020-03-20 09:45:00",first_name:"John",id:1324,item_count:2,items:{235:"Product 1",347:"Product 2"},last_name:"Doe",status:"Completed",total:"24.51"},{date:"2020-03-21 21:34:00",first_name:"John",id:1325,item_count:3,items:{235:"Product 1",347:"Product 2"},last_name:"Doe",status:"Completed",total:"34.51"}].map((function(e){var t,a,n;return[{display:Object(l.A)(e.date),value:e.date},{display:Object(c.createElement)("a",{className:"bwf-a-no-underline",href:"#"},"#"+e.id),value:e.id},{display:e.status,value:e.status},{display:(t=e.items,a="",n=[],Object.entries(t).map((function(e){var t=u(e,2),r=(t[0],t[1]);Object(o.isEmpty)(a)&&(a=Object(c.createElement)("a",{className:"bwf-a-no-underline",href:"#"},r)),n.push(Object(c.createElement)("a",{className:"bwf-a-no-underline",href:"#"},r))})),Object(c.createElement)(c.Fragment,null,!Object(o.isEmpty)(a)&&a,!Object(o.isEmpty)(n)&&n.length>1&&Object(c.createElement)(b.a,{items:n}))),value:""},{display:d(e.total),value:e.total}]}));return Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"bwf-c-s-data"},Object(c.createElement)(n.a,{items:[{key:0,label:Object(r.__)("Products","wp-marketing-automations-crm"),display:Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"bwf-c-s-list bwf-c-s-list-items"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("Items","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value bwf-c-s-inline-p"},Object(c.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},"Product 1"),Object(c.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},"Product 2"))),Object(c.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-terms"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("Categories","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},Object(c.createElement)("ul",null,Object(c.createElement)("li",{key:0},Object(c.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},Object(c.createElement)("span",null,"Category 1"))),Object(c.createElement)("li",{key:2},Object(c.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},Object(c.createElement)("span",null,"Category 2")))))),Object(c.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-terms"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("Tags","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},Object(c.createElement)("ul",null,Object(c.createElement)("li",{key:0},Object(c.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},Object(c.createElement)("span",null,"Tag 1"))),Object(c.createElement)("li",{key:2},Object(c.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},Object(c.createElement)("span",null,"Tag 2")))))))},{key:1,label:Object(r.__)("Marketing","wp-marketing-automations-crm"),display:Object(c.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-coupons"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("Coupons","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},Object(c.createElement)("ul",null,Object(c.createElement)("li",null,Object(c.createElement)("span",{className:"dashicons dashicons-tag"}),Object(c.createElement)("span",null,"Coupon 1")),Object(c.createElement)("li",null,Object(c.createElement)("span",{className:"dashicons dashicons-tag"}),Object(c.createElement)("span",null,"Coupon 2")))))},{key:2,label:Object(r.__)("Orders","wp-marketing-automations-crm"),display:Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"bwf-c-s-list"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("Total Spend","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},d(135))),Object(c.createElement)("div",{className:"bwf-c-s-list"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("AOV","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},Object(c.createElement)("div",null,d(89),Object(c.createElement)("span",{className:"bwf-c-s-hl bwf-c-s-hl-g"},56,"%")))),Object(c.createElement)("div",{className:"bwf-c-s-list"},Object(c.createElement)("div",{className:"bwf-c-s-label"},Object(r.__)("Details","wp-marketing-automations-crm")),Object(c.createElement)("div",{className:"bwf-c-s-po-value"},Object(c.createElement)(m.a,{className:"bwfcrm-contacts-orders",title:"",rows:f,headers:p,query:{paged:1},rowsPerPage:10,totalRows:5,isLoading:!1,showMenu:!1,rowHeader:!0}),Object(c.createElement)("div",{className:"bwf_clear_20"}))))}]})),Object(c.createElement)(i.a,{isOpen:t,onRequestClose:function(){return a(!1)}}))}}}]);