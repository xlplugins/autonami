(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{117:function(e,t,n){"use strict";var r=n(0),a=n(8),c=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,e);var t,n,a,c=s(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=c.call(this,e)).scrollTo=t.scrollTo.bind(p(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){setTimeout(this.scrollTo,250)}},{key:"scrollTo",value:function(){var e=this.props.offset;this.ref.current?window.scrollTo(0,parseInt(e,10)):setTimeout(this.scrollTo,250)}},{key:"render",value:function(){var e=this.props.children;return this.ref=Object(r.createRef)(),Object(r.createElement)("div",{ref:this.ref},e)}}])&&i(t.prototype,n),a&&i(t,a),o}(r.Component);f.propTypes={offset:c.a.string},f.defaultProps={offset:"0"},t.a=f},224:function(e,t,n){"use strict";var r=n(0);n(257);t.a=function(e){return Object(r.useEffect)((function(){setTimeout((function(){e.removeMessage()}),5e3)}),[e.message]),Object(r.createElement)(r.Fragment,null,e.message&&Object(r.createElement)("div",{id:"bwfcrm-message-notice"},Object(r.createElement)("span",{className:"bwfcrm-message-text"},e.message)))}},257:function(e,t,n){},478:function(e,t,n){"use strict";var r=n(0),a=n(9),c=n(15),o=n.n(c);n(479);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t=e.icon,n=e.children,c=e.isSelected,s=e.upperText,u=e.upperTextColor,p=e.onLowerClick,b=e.lowerText,f=e.lowerTextColor,m=e.onClick,d=e.isDisabled,y=e.alterButton,O=void 0!==y&&y,j=c?{isPrimary:!0}:{isSecondary:!0};d&&(j.disabled=!0);var g=o()(l({"bwf-c-upper-banner":!0},u,!0)),w=o()(l({"bwf-c-lower-banner":!0},f,!0)),h=function(e){p(),e.preventDefault()};return Object(r.createElement)("div",{className:o()("bwf-c-big-icon-button",{"bwf-alter-button":O})},s&&Object(r.createElement)("span",{className:g},s),Object(r.createElement)(a.Button,i({icon:t},j,{onClick:m||function(){},className:"bwf-display-flex"}),Object(r.createElement)("span",null,n)),b&&Object(r.createElement)("span",{onClick:h||function(){},className:w},b))}},479:function(e,t,n){},719:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(5),c=n(4),o=n(16),i=n.n(o),l=n(9),s=n(17),u=n(7),p=n(176),b=n(459),f=n(18),m=n(224),d=n(478),y=n(117),O=n(13);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=location&&location.search?Object(f.parse)(location.search.substring(1)):{},n=Object(b.a)(),o=v(Object(r.useState)(!0),2),j=o[0],w=o[1],E=v(Object(r.useState)({}),2),_=E[0],k=E[1],P=v(Object(r.useState)(!0),2),S=P[0],T=P[1],N=v(Object(r.useState)({message:"",type:1}),2),x=N[0],C=N[1],I=v(Object(r.useState)(!1),2),R=I[0],B=I[1],D=v(Object(r.useState)(!1),2),A=D[0],M=(D[1],n.setCampaignValues),F=n.setExclude,J=(Object(u.f)(),function(){var e=!0;!Object(a.isEmpty)(_.title)&&[1,2,3].includes(parseInt(_.type))&&(e=!1),!e&&2==_.type&&A&&(e=!0),e||3!=_.type||Object(u.W)()||(e=!0),T(e)}),W=p.a.getCampaignId(),q=p.a.getCampaignData(),H=p.a.getExcludes(),L=!!(!(!q||!q.parent)&&q.parent);Object(r.useEffect)((function(){q&&W>0&&e.campaignId==W&&(k({title:q.title,description:q.description,type:q.type,isPromotional:!q.data||!q.data.hasOwnProperty("is_promotional")||q.data.is_promotional,abType:q.data&&q.data.hasOwnProperty("ab_type")?q.data.ab_type:"standard"}),w(!1)),0==e.campaignId&&(k({title:"",description:"",type:0,isPromotional:!1,abType:!1}),w(!1))}),[W]),Object(r.useEffect)((function(){J()}),[_,A]);var U=function(){var n,r=(n=regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(S){n.next=18;break}if(e.setPending(!0),c=void 0,c={title:q.title,description:q.description,type:q.type,isPromotional:q.data&&q.data.hasOwnProperty("is_promotional")?q.data.is_promotional:null,abType:q.data&&q.data.hasOwnProperty("ab_type")?q.data.ab_type:null},JSON.stringify(c)==JSON.stringify(_)){n.next=14;break}if(!(W>0)){n.next=12;break}return n.prev=4,n.next=7,i()({path:Object(u.g)("/broadcast/".concat(W)),method:"POST",data:{data:{title:_.title,description:_.description,type:_.type,promotional:_.isPromotional,ab_type:_.abType,modified_by:Object(u.n)(),exclude:H},step:1},headers:{"Content-Type":"application/json"}}).then((function(e){if(200==e.code){M("data",g(g({},q),{},{title:e.result.title,description:e.result.description,type:e.result.type,data:e.result.data})),C({message:e.message,type:1});var n=q.data&&!Object(a.isNull)(q.data)&&q.data.hasOwnProperty("filters")?q.data.filters:{};Object(a.isEmpty)(n)||Object(s.j)(n,"/",t),M("step",2)}}));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),C({message:n.t0.message,type:0});case 12:n.next=17;break;case 14:r=q.data&&q.data.hasOwnProperty("filters")?q.data.filters:{},Object(a.isEmpty)(r)||Object(s.j)(r,"/",t),M("step",2);case 17:e.setPending(!1);case 18:case"end":return n.stop()}var c}),n,null,[[4,9]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var c=n.apply(e,t);function o(e){h(c,r,a,o,i,"next",e)}function i(e){h(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(y.a,null),j||Object(a.isEmpty)(_)?Object(r.createElement)("div",{className:"bwf-crm-campaign-preview bwf-placeholder-content"},[0,1,2,3,4].map((function(e){return Object(r.createElement)("div",{className:"bwf-crm-campaign-field",key:e},Object(r.createElement)("div",{className:"is-placeholder long",style:{width:"20%"}}),Object(r.createElement)("div",{className:"is-placeholder long",style:{width:"100%"}}))}))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l.Card,{className:"bwf-campaign-step-div bwf-card-wrap bwf-campaign-step-1"},Object(r.createElement)("div",{className:"bwf-card-header"},Object(r.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Information","wp-marketing-automations-crm"))),Object(r.createElement)("div",{className:"bwf-card-bg-wrap"},Object(r.createElement)(l.TextControl,{value:_.title,label:Object(c.__)("Name","wp-marketing-automations-crm"),className:"bwf-campaign-input-field",placeholder:Object(c.__)("Enter Name","wp-marketing-automations-crm"),onChange:function(e){k(g(g({},_),{},{title:e.trim()}))}}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",null,Object(r.createElement)(l.Flex,{gap:5,justify:"start",align:"start"},Object(r.createElement)(l.FlexItem,null,Object(r.createElement)("p",{className:"bwf-c-input-label"},Object(c.__)("Type","wp-marketing-automations-crm")),Object(r.createElement)(d.a,{isSelected:"standard"===_.abType,onClick:function(){k(g(g({},_),{},{abType:"standard"}))},alterButton:!0},Object(c.__)("Standard","wp-marketing-automations-crm")),Object(r.createElement)(d.a,{isSelected:"ab"===_.abType,onClick:function(){k(g(g({},_),{},{abType:"ab"}))},alterButton:!0},Object(c.__)("A/B Test","wp-marketing-automations-crm"))))),Object(r.createElement)("div",{className:"bwf_clear_20"}),!L&&Object(r.createElement)(l.CheckboxControl,{className:"bwf-crm-campaign-toggle",label:Object(c.__)("Send it to all contacts including unsubscribers","wp-marketing-automations-crm"),help:[Object(c.__)("This allows you to send the email to all your contacts, even if their status is unsubscribed or unverified.","wp-marketing-automations-crm"),Object(r.createElement)("br",null),Object(c.__)("On the default more, your broadcast will be sent only to the subscribed contacts","wp-marketing-automations-crm")],checked:!_.isPromotional,onChange:function(e){F([]),k(g(g({},_),{},{isPromotional:!e}))}}),R&&Object(r.createElement)(l.Modal,{title:Object(c.__)("Configure SMS Setting","wp-marketing-automations-crm"),onRequestClose:function(){return B(!1)},style:{minWidth:"500px",height:"fit-content"},className:"bwf-crm-merge-tag-model"},Object(r.createElement)("p",null,Object(r.createElement)(O.a,{icon:"profile"})),Object(r.createElement)("a",{href:"admin.php?page=autonami&tab=connector",className:"bwf-a-no-underline"},Object(c.__)("Click Here to go configuration page","wp-marketing-automations-crm")),Object(r.createElement)("p",null,Object(r.createElement)(l.Button,{isPrimary:!0,onClick:function(){return B(!1)}},Object(c.__)("Cancel","wp-marketing-automations-crm")))),Object(r.createElement)(m.a,{message:x.message,type:x.type,removeMessage:function(){return C({message:"",type:1})}})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-crm-stepper-navigation bwf_text_right"},Object(r.createElement)(l.Button,{isPrimary:!0,className:"bwf-crm-navigation-next bwf-big-button",disabled:S,onClick:function(){J(),U()}},Object(r.createElement)("span",null,Object(c.__)("Next","wp-marketing-automations-crm")))))))}}}]);