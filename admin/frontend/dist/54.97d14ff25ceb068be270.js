(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{109:function(e,t,n){"use strict";var r=n(0);n(133);t.a=function(e){var t=e.size,n=void 0===t?"xl":t;return Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"bwf-spin-loader bwf-spin-loader-".concat(n)}),Object(r.createElement)("div",{className:"bwf_clear_30"}))}},112:function(e,t,n){"use strict";var r=n(24),a=n(48);t.a=function(e){var t=Object(r.b)(),n=Object(a.a)(e),o=n.setLoading,c=n.fetch,i=n.clearError,u=n.setStateProp;return{setLoading:function(e){return t(o(e))},fetch:function(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(c(e,n,r,a))},clearError:function(){return t(i())},setStateProp:function(e,n){return t(u(e,n))}}}},114:function(e,t,n){"use strict";var r=n(112),a=n(44);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(r.a)("menu").setStateProp,t=(0,Object(a.a)().getActive)();return{setActive:function(n,r){return e("active",c(c({},t),{},i({},n,r)))},setActiveMultiple:function(t){return e("active",t)},setBackLink:function(t){return e("backLink",t)},setL2Title:function(t){return e("l2Title",t)},setL2PostTitle:function(t){return e("l2PostTitle",t)},setL2Nav:function(t){return e("l2Nav",t)},setL2NavType:function(t){return e("l2NavType",t)},setL2Content:function(t){return e("l2Content",t)},setL2NavAlign:function(t){return e("l2NavAlign",t)},setPageHeader:function(t){return e("pageHeader",t)},setBackLinkLabel:function(t){return e("backLinkLabel",t)},setPageCountData:function(t){return e("pageCountData",t)},resetHeaderMenu:function(){e("backLink",""),e("l2Title",""),e("l2PostTitle",""),e("l2Nav",{}),e("l2NavType",""),e("active",{leftNav:"",rightNav:""}),e("l2Content",""),e("l2NavAlign","left"),e("pageHeader","")},setContactL2Menu:function(){return e("l2Nav")}}}},118:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},120:function(e,t,n){"use strict";var r=n(0);n(135);t.a=function(e){return Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf_align_center"},Object(r.createElement)("div",{className:"bwf-w-100",dangerouslySetInnerHTML:{__html:bwfcrm_contacts_data.icons.success}})))}},121:function(e,t,n){"use strict";var r=n(0);n(136);t.a=function(e){return Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf_align_center"},Object(r.createElement)("div",{className:"bwf-w-100",dangerouslySetInnerHTML:{__html:bwfcrm_contacts_data.icons.error}})))}},123:function(e,t,n){"use strict";var r=n(0),a=n(4),o=n(5),c=n(8),i=n.n(c),u=n(15),s=n.n(u),l=(n(134),n(160));function f(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t,n,o,c=g(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=c.call(this,e)).state={options:[]},t.appendFreeTextSearch=t.appendFreeTextSearch.bind(j(t)),t.fetchOptions=t.fetchOptions.bind(j(t)),t.updateSelected=t.updateSelected.bind(j(t)),t}return t=i,(n=[{key:"getAutocompleter",value:function(){return this.props.autocompleter&&"object"===p(this.props.autocompleter)?this.props.autocompleter:{}}},{key:"getFormattedOptions",value:function(e,t){var n=this.getAutocompleter(),r=[];return e.forEach((function(e){var a={key:n.getOptionIdentifier(e),label:n.getOptionLabel(e,t),keywords:n.getOptionKeywords(e).filter(Boolean),value:e};r.push(a)})),r}},{key:"fetchOptions",value:function(e,t){var n=this;return this.props.bwfEnableEmptySearch||t?this.getAutocompleter().options(t).then(function(){var e,r=(e=regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getFormattedOptions(r,t),n.setState({options:a}),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){b(o,r,a,c,i,"next",e)}function i(e){b(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return r.apply(this,arguments)}}()):[]}},{key:"updateSelected",value:function(e){var t=this.props.onChange,n=this.getAutocompleter();t(e.map((function(e){return!e.notFound&&(e.value?n.getOptionCompletion(e.value):e)})).filter(Boolean))}},{key:"appendFreeTextSearch",value:function(e,t){var n=this.props.allowFreeTextSearch;if(!t||!t.length)return[];if(!n)return e.length>0?e:[{label:Object(a.__)("Not Found","wp-marketing-automations-crm"),key:"",notFound:!0}];var r=this.getAutocompleter();return[].concat(f(r.getFreeTextOptions(t,e)),f(e))}},{key:"render",value:function(){var e=this.getAutocompleter(),t=this.props,n=t.className,a=t.inlineTags,o=t.placeholder,c=t.selected,i=t.showClearButton,u=t.staticResults,f=t.disabled,m=(t.multiple,this.state.options),b=e.inputType?e.inputType:"text";return Object(r.createElement)("div",null,Object(r.createElement)(l.a,{className:s()("bwf-search",n,{"is-static-results":u}),disabled:f,hideBeforeSearch:!1,inlineTags:a,isSearchable:!0,label:o,getSearchExpression:e.getSearchExpression,multiple:!0,placeholder:o,onChange:this.updateSelected,onFilter:this.appendFreeTextSearch,onSearch:this.fetchOptions,options:m,remove:this.props.onRemoveTag,searchDebounceTime:500,searchInputType:b,selected:c,showClearButton:i,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm}))}}])&&d(t.prototype,n),o&&d(t,o),i}(r.Component);h.propTypes={allowFreeTextSearch:i.a.bool,className:i.a.string,onChange:i.a.func,autocompleter:i.a.object,placeholder:i.a.string,selected:i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,label:i.a.string})),inlineTags:i.a.bool,showClearButton:i.a.bool,staticResults:i.a.bool,disabled:i.a.bool,bwfMaintainSingleTerm:i.a.bool,bwfEnableEmptySearch:i.a.bool},h.defaultProps={allowFreeTextSearch:!1,onChange:o.noop,selected:[],inlineTags:!1,showClearButton:!1,staticResults:!1,disabled:!1,bwfMaintainSingleTerm:!1,bwfEnableEmptySearch:!1},t.a=h},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){"use strict";var r=n(0),a=n(109),o=n(120),c=n(121),i=n(9),u=n(4);t.a=function(e){var t=e.confirmText,n=void 0===t?"":t,s=e.confirmButtonText,l=void 0===s?"":s,f=e.cancelButtonText,m=void 0===f?"":f,b=e.onConfirm,p=void 0===b?function(){}:b,d=e.isLoading,O=void 0!==d&&d,g=e.successMessage,v=void 0===g?"":g,j=e.errorMessage,y=void 0===j?"":j,h=e.onRequestClose,w=e.isOpen,_=void 0!==w&&w,k=e.confirmDescription,E=void 0===k?"":k,S=e.isDelete,P=void 0!==S&&S;Object(r.useEffect)((function(){(v||y)&&setTimeout((function(){h&&h()}),2e3)}),[v,y]);return _?Object(r.createElement)(i.Modal,{title:"",onRequestClose:function(){return h()},className:"bwf-c-s-delete-model bwf-admin-modal bwf-admin-modal-small bwf-admin-modal-no-header"},P&&Object(r.createElement)("div",{className:"bwf-h4"},Object(u.__)("Delete","wp-marketing-automations-crm")),O&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(a.a,null)),!!v&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(o.a,null),Object(r.createElement)("div",{className:"bwf-h1"},v)),!!y&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(c.a,null),Object(r.createElement)("div",{className:"bwf-h1"},y)),!O&&!v&&!y&&Object(r.createElement)("div",{className:"bwf-t-center bwf-form-buttons"},P?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-h2"},Object(u.__)("Are you sure?","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf_clear_15"}),Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},Object(u.__)("Once you delete this item. It will no longer available.","wp-marketing-automations-crm"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-h1"},n),!!E&&Object(r.createElement)("p",null,E)),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:P?"bwf_text_right":""},Object(r.createElement)(i.Button,{isTertiary:!0,style:{marginRight:"20px"},onClick:function(){h&&h()}},m),Object(r.createElement)(i.Button,{isPrimary:!0,onClick:function(){p&&p()},className:P?"bwf-delete-btn":""},l)))):null}},146:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},186:function(e,t,n){"use strict";var r=n(118),a=n(25),o=n(0);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.a=function(e){var t=e.icon,n=e.size,i=void 0===n?24:n,u=Object(a.a)(e,["icon","size"]);return Object(o.cloneElement)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:i,height:i},u))}},195:function(e,t,n){"use strict";var r=n(0),a=n(93),o=Object(r.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(r.createElement)(a.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"}));t.a=o},196:function(e,t,n){"use strict";var r=n(0),a=n(93),o=Object(r.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(r.createElement)(a.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"}));t.a=o},202:function(e,t,n){"use strict";var r=n(0),a=n(93),o=Object(r.createElement)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(a.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"}));t.a=o},203:function(e,t,n){"use strict";var r=n(0),a=n(93),o=Object(r.createElement)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)(a.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));t.a=o},461:function(e,t,n){"use strict";var r=n(114),a=n(0),o=n(4),c=n(7),i=function(e){var t={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:"admin.php?page=autonami-automations&edit=".concat(e)},engagement:{name:Object(o.__)("Engagement","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(e,"/engagement")}};return Object(c.V)()&&(t.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(e,"/orders")}),t};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],f=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},m=f.automation_nav,b=Object(r.a)(),p=b.setActiveMultiple,d=b.resetHeaderMenu,O=b.setL2NavType,g=b.setL2Nav,v=b.setBackLink,j=b.setL2Title,y=b.setL2Content,h=b.setBackLinkLabel,w=b.setL2NavAlign,_=b.setPageHeader;return Object(a.useEffect)((function(){d(),!c&&O("menu"),g(s?i(s):m),p({leftNav:"automations",rightNav:e}),n&&v(n),n&&s&&v("admin.php?page=autonami-automations&edit=".concat(s)),c&&h(Object(o.__)("All Automations","wp-marketing-automations-crm")),s&&h(Object(o.__)("Back to Automation","wp-marketing-automations-crm")),s&&w("right"),t&&j(t),!n&&u&&y(u),_("Automations"),l&&g({})}),[e]),!0}},468:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return O}));var r=n(0);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e){var t=i(Object(r.useState)({}),2),n=t[0],a=t[1],u=Object.keys(n).length>0&&Object.keys(n).reduce((function(e,t){return e&&n[t]}),!0);Object(r.useEffect)((function(){var t={};if(e)for(var n in e)t[n]=!1;a(t)}),[e]);var s=Object(r.useCallback)((function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=o(o({},n),{},c({},e,t));a(r)}}),[n]),l=Object(r.useMemo)((function(){var e={};for(var t in n){var r={selected:n[t],checked:n[t],onChange:s(t)};e[t]=r}return e}),[n]),f=Object(r.useCallback)((function(){var e={};for(var t in n)e[t]=!u;a(e)}),[n,u]);return{singleSelectProps:l,selectAllProps:{selected:u,checked:u,onChange:f},floatingBarProps:{items:e,selected:n},resetSelection:Object(r.useCallback)((function(){var e={};for(var t in n)e[t]=!1;a(e)}),[n])}},l=n(9),f=n(4),m=n(13),b=(n(492),n(493),function(e){var t=e.number,n=void 0===t?0:t;return Object(r.createElement)("span",{class:"bwf-count-badge"},n)});function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=function(e){var t=e.selected,n=void 0===t?{}:t,a=e.items,o=void 0===a?{}:a,c=e.actions,i=void 0===c?[]:c,u=e.onAction,s=p(Object(r.useState)(!1),2),d=s[0],O=s[1],g=function(e){return e.length>0?{"grid-template-columns":e.reduce((function(e){return"".concat(e," auto")}),"")}:{}}(i),v=Object.keys(n).reduce((function(e,t){return n[t]?e+1:e}),0);Object(r.useEffect)((function(){O(v>0)}),[v]);var j=Object.keys(o).filter((function(e){return n[e]})).map((function(e){return o[e]})),y=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(b,{number:v}),Object(r.createElement)("b",{style:{marginLeft:"5px"}},Object(f.__)("Items Selected","wp-marketing-automations-crm")));return d&&Object(r.createElement)("div",{className:"bwf-floating-action-bar-outer"},Object(r.createElement)("div",{className:"bwf-floating-action-bar"},Object(r.createElement)("div",{className:"bwf-floating-action-bar-wrapper"},Object(r.createElement)("span",{className:"bwf-floating-action-bar-count"},y),Object(r.createElement)("div",{className:"bwf-floating-action-bar-actions",style:g},i.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.createElement)("span",{title:e.hint?e.hint:"",onClick:function(){return!!u&&u(e.id,j)}},Object(r.createElement)(m.a,{icon:e.icon}))}))),Object(r.createElement)(l.Button,{isSecondary:!0,onClick:function(){return O(!1)}},Object(f.__)("Close","wp-marketing-automations-crm")))))}},492:function(e,t,n){},493:function(e,t,n){},562:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(2),a=n(1),o=n.n(a),c=n(10),i=n(3),u=n(11),s=n(57),l=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.setOptions(n),r.bindMethods(),r.updateResult(),r}Object(u.a)(t,e);var n=t.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},n.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},n.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,Object(r.a)({},this.options,{variables:void 0!==e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:Object(s.b)();this.currentResult=Object(r.a)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},n.notify=function(e){var t=this;c.a.batch((function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)}))}))},t}(n(21).a),f=n(98);function m(e,t,n){var a=o.a.useRef(!1),u=o.a.useState(0)[1],s=Object(i.k)(e,t,n),m=Object(f.b)(),b=o.a.useRef();b.current?b.current.setOptions(s):b.current=new l(m,s);var p=b.current.getCurrentResult();o.a.useEffect((function(){a.current=!0;var e=b.current.subscribe(c.a.batchCalls((function(){a.current&&u((function(e){return e+1}))})));return function(){a.current=!1,e()}}),[]);var d=o.a.useCallback((function(e,t){b.current.mutate(e,t).catch(i.i)}),[]);if(p.error&&b.current.options.useErrorBoundary)throw p.error;return Object(r.a)({},p,{mutate:d,mutateAsync:p.mutate})}},697:function(e,t,n){},782:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(117),o=n(4),c=n(130),i=n(46);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var m=function(){var e=Object(i.a)("taskHistoryList"),t=e.getStateProp;return s(s({},f(e,["getStateProp"])),{},{getTaskHistory:function(){return t("tasks")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getCompletedCount:function(){return t("completed")},getScheduledCount:function(){return t("scheduled")},getPausedCount:function(){return t("paused")},getFailedCount:function(){return t("failed")},getPageCountData:function(){return t("countData")}})},b=n(112),p=n(7);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var j=function(){var e=Object(b.a)("taskHistoryList"),t=e.fetch,n=e.setStateProp;return O(O({},v(e,["fetch","setStateProp"])),{},{fetch:function(e,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=n.s,i=n.automation,u=n.action,s={offset:r,limit:a,status:e,action_slug:u,automation_id:i,search:o||c};t("GET",Object(p.g)("/automations/task-history"),s)},setTaskListValues:function(e,t){n(e,t)}})},y=n(5),h=n(45),w=n(47),_=n(31),k=n(9),E=n(137),S=n(16),P=n.n(S),C=n(15),T=n.n(C),x=(n(697),n(20)),N=n(13),A=n(139),L=n(123);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=function(e){var t=e.onSearch,n=R(Object(r.useState)([]),2),a=n[0],c=n[1];return Object(r.createElement)(L.a,{autocompleter:A.d,multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:a,onChange:function(e){c(e),t(Object(y.isEmpty)(e)?"":e[0].key)},placeholder:Object(o.__)("Search","wp-marketing-automations-crm"),showClearButton:!0,disabled:!1,bwfMaintainSingleTerm:!0})},I=n(468),B=n(562);function F(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}var q=function(e){var t=e.isOpen,n=e.tasks,a=e.onSuccess,c=e.onError,i=e.onRequestClose,u=Object(B.a)(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P()({path:Object(p.g)("/automations/tasks/"),method:"POST",headers:{"X-HTTP-Method-Override":"DELETE"},data:{task_ids:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){F(o,r,a,c,i,"next",e)}function i(e){F(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return u.reset()}),2500),a&&a()},onError:function(){setTimeout((function(){return u.reset()}),2500),c&&c()}});return Object(r.createElement)(E.a,{confirmText:Object(o.__)("Are you sure you want to delete the tasks","wp-marketing-automations-crm"),confirmButtonText:Object(o.__)("Delete","wp-marketing-automations-crm"),cancelButtonText:Object(o.__)("Cancel","wp-marketing-automations-crm"),onConfirm:function(){return u.mutate(n.map((function(e){return e.id})))},isLoading:u.isLoading,successMessage:u.isSuccess&&Object(o.__)("Tasks Deleted!","wp-marketing-automations-crm"),errorMessage:u.isError&&(u.error&&u.error.message?u.error.message:Object(o.__)("Unable to delete tasks","wp-marketing-automations-crm")),onRequestClose:function(){return!!i&&i()},isOpen:t,confirmDescription:Object(o.__)("This action is irreversible","wp-marketing-automations-crm"),isDelete:!0})};function H(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}var U=function(e){var t=e.isOpen,n=e.tasks,a=e.onSuccess,c=e.onError,i=e.onRequestClose,u=e.screenType,s=Object(B.a)(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P()({path:Object(p.g)("/automations/execute-tasks/"),method:"POST",data:{task_ids:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){H(o,r,a,c,i,"next",e)}function i(e){H(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return s.reset()}),2500),a&&a()},onError:function(){setTimeout((function(){return s.reset()}),2500),c&&c()}});return Object(r.createElement)(E.a,{confirmText:"failed"===u?Object(o.__)("Do you want to reschedule the selected tasks?","wp-marketing-automations-crm"):Object(o.__)("Do you want to execute the selected tasks?","wp-marketing-automations-crm"),confirmButtonText:"failed"===u?Object(o.__)("Reschedule","wp-marketing-automations-crm"):Object(o.__)("Execute","wp-marketing-automations-crm"),cancelButtonText:Object(o.__)("Cancel","wp-marketing-automations-crm"),onConfirm:function(){return s.mutate(n.map((function(e){return e.id})))},isLoading:s.isLoading,successMessage:s.isSuccess&&("failed"===u?Object(o.__)("Tasks Rescheduled!","wp-marketing-automations-crm"):Object(o.__)("Tasks Executed!","wp-marketing-automations-crm")),errorMessage:s.isError&&(s.error&&s.error.message?s.error.message:"failed"===u?Object(o.__)("Unable to reschedule tasks","wp-marketing-automations-crm"):Object(o.__)("Unable to execute tasks","wp-marketing-automations-crm")),onRequestClose:function(){return!!i&&i()},isOpen:t})};function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=e.floatingBarProps,n=void 0===t?{}:t,a=e.resetSelection,c=e.onSuccess,i=e.screenType,u=e.screenTypeId,s=G(Object(r.useState)([]),2),l=s[0],f=s[1],m=G(Object(r.useState)(!1),2),b=m[0],p=m[1],d=G(Object(r.useState)(!1),2),O=d[0],g=d[1],v=function(){a&&a(),f([])};Object(r.useEffect)((function(){v()}),[i]);var j,y,h=Object(r.useCallback)((function(e,t){switch(e){case"delete":f(t),p(!0);break;case"execute":f(t),g(!0)}}),[]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(I.a,z({actions:(j=i,y=[{id:"delete",icon:"trash",hint:Object(o.__)("Delete Tasks","wp-marketing-automations-crm")}],"completed"!==j&&y.push({id:"execute",icon:"play",hint:"failed"===j?Object(o.__)("Reschedule","wp-marketing-automations-crm"):Object(o.__)("Execute","wp-marketing-automations-crm")}),y),onAction:h},n)),Object(r.createElement)(q,{tasks:l,isOpen:b,onSuccess:function(){c&&c("delete",l),v()},onError:v,onRequestClose:function(){return p(!1)}}),Object(r.createElement)(U,{tasks:l,isOpen:O,onSuccess:function(){c&&c("execute",l),v()},onError:v,onRequestClose:function(){return g(!1)},screenType:i,screenTypeId:u}))};function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Q(e,t,n,r,a,o,c){try{var i=e[o](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function K(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Q(o,r,a,c,i,"next",e)}function i(e){Q(o,r,a,c,i,"throw",e)}c(void 0)}))}}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||X(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e){var t=e.type,n=e.query,a=n.automation,i=n.action,u=j(),s=m(),l=u.fetch,f=u.setTaskListValues,b=s.getTaskHistory,d=s.getPageNumber,O=s.getPerPageCount,g=s.getTotalCount,v=s.getOffset,S=s.getLoadingStatus,C=s.getCompletedCount,A=s.getFailedCount,L=s.getPausedCount,R=s.getScheduledCount,M=W(Object(r.useState)({loading:!1,status:!1}),2),B=M[0],F=M[1],q=W(Object(r.useState)([]),2),H=q[0],U=q[1],z=W(Object(r.useState)([]),2),G=z[0],V=z[1],Q=W(Object(r.useState)(!1),2),Y=Q[0],Z=Q[1],ee=W(Object(r.useState)({}),2),te=ee[0],ne=ee[1],re=[],ae=W(Object(r.useState)([]),2),oe=(ae[0],ae[1]),ce=b(),ie=O(),ue=v(),se=g(),le=d(),fe=S(),me=R(),be=A(),pe=C(),de=L(),Oe="t_0";Object(y.isEmpty)(t)||("paused"===t?Oe="t_1":"completed"===t?Oe="l_1":"failed"===t&&(Oe="l_0")),Object(r.useEffect)((function(){oe([]),l(Oe,n,ue,ie)}),[ue,ie,t,a,i]);var ge=function(){var e=K(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P()({path:Object(p.g)("/automations/task-filters"),method:"GET"}).then((function(e){200==e.code&&(e.result.hasOwnProperty("automations")&&U(Object.entries(e.result.automations).map((function(e){var t=W(e,2),n=t[0];return{label:t[1],value:n}}))),e.result.hasOwnProperty("actions")&&V(e.result.actions&&Object.entries(e.result.actions).map((function(e){var t=W(e,2),n=t[0];return{label:t[1],value:n}}))))}));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){ge()}),[]);var ve=function(e){e!==ie&&f("limit",e)},je=function(){var e=K(regeneratorRuntime.mark((function e(t,r){var a,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="",c="","delete"===r?(a=Object(p.g)("/automations/tasks"),c="DELETE"):"execute"===r?(a=Object(p.g)("/automations/execute-tasks"),c="POST"):"run"===r&&(a=Object(p.g)("/automations/run-tasks"),c="POST"),F({status:!0,loading:!0}),!(Array.isArray(t)&&!Object(y.isEmpty)(t)||"run"===r&&parseInt(t)>0)){e.next=17;break}return e.prev=5,e.next=8,P()({path:a,method:c,data:{task_ids:t}}).then((function(e){if(200===e.code)F({status:!0,success:e.message.msg?e.message.msg:e.message}),setTimeout((function(){l(Oe,n,0,ie)}),1e3);else{var t=e&&e.message&&e.message.msg?e.message.msg:"";t=!t&&e&&e.message?e.message:t,F({status:!0,error:t||Object(o.__)("Error in task processing","wp-marketing-automations-crm")})}}));case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(5),i=!(i=e.t0&&e.t0.message&&e.t0.message.msg?e.t0.message.msg:"")&&e.t0&&e.t0.message?e.t0.message:i,F({status:!0,error:i||Object(o.__)("Error in task processing","wp-marketing-automations-crm")});case 15:e.next=18;break;case 17:F({status:!0,error:Object(o.__)("No Task Selected","wp-marketing-automations-crm")});case 18:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t,n){return e.apply(this,arguments)}}(),ye=Object(r.useMemo)((function(){var e={};if(Array.isArray(ce)){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=X(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}(ce);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.id]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[ce]),he=Object(I.b)(ye),we=he.singleSelectProps,_e=he.selectAllProps,ke=he.floatingBarProps,Ee=he.resetSelection,Se=ce?ce.map((function(e){var t,n=[{display:Object(r.createElement)(k.CheckboxControl,J({"aria-label":Object(o.__)("Select","wp-marketing-automations-crm")},we[e.id])),value:e.id},{display:(t=e,Object(r.createElement)(h.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations-crm"),menuPosition:"bottom right",renderContent:function(e){var n=e.onToggle;return Object(r.createElement)(r.Fragment,null,["t_0","t_1"].includes(Oe)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(w.a,{isClickable:!0,onInvoke:function(){je(t.id,"run"),n()}},Object(r.createElement)(_.a,{justify:"flex-start"},Object(r.createElement)(_.c,null,Object(r.createElement)(N.a,{icon:"play"})),Object(r.createElement)(_.c,null,Object(o.__)("Run now","wp-marketing-automations-crm"))))),Object(r.createElement)(w.a,{isClickable:!0,onInvoke:function(){F({status:!0,confirmText:Object(o.__)("Are you sure you want to delete this task ?","wp-marketing-automations-crm"),buttonConfirm:Object(o.__)("Confirm","wp-marketing-automations-crm"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations-crm"),onConfirm:function(){return je([t.id],"delete")}}),n()}},Object(r.createElement)(_.a,{justify:"flex-start"},Object(r.createElement)(_.c,null,Object(r.createElement)(N.a,{icon:"trash"})),Object(r.createElement)(_.c,null,Object(o.__)("Delete","wp-marketing-automations-crm")))))}})),value:""},{display:"#"+e.id,value:""},{display:e.task_integration+" : "+e.task_integration_action,value:e.task_integration},{display:e.task_details?Object(r.createElement)("ul",{dangerouslySetInnerHTML:{__html:e.task_details}}):"-",value:""},{display:e.automation_name?Object(r.createElement)("a",{href:e.automation_url,className:"bwf-a-no-underline"},e.automation_name):"-",value:e.automation_name},{display:e.task_date?Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.task_date}}):"-",value:""},{display:Object(r.createElement)("div",{onClick:function(){ne(e),Z(!0)}},Object(r.createElement)(N.a,{icon:"view"})),value:""}];return re.push(e.id),n})):[],Pe=Object(r.createElement)(r.Fragment,null,Object(o.__)("Scheduled","wp-marketing-automations-crm"),parseInt(me)>0?Object(r.createElement)("span",{className:"bwf-crm-btn-group-count"},me):""),Ce=Object(r.createElement)(r.Fragment,null,Object(o.__)("Completed","wp-marketing-automations-crm"),parseInt(pe)>0?Object(r.createElement)("span",{className:"bwf-crm-btn-group-count"},pe):""),Te=Object(r.createElement)(r.Fragment,null,Object(o.__)("Failed","wp-marketing-automations-crm"),parseInt(be)>0?Object(r.createElement)("span",{className:"bwf-crm-btn-group-count"},be):""),xe=Object(r.createElement)(r.Fragment,null,Object(o.__)("Paused","wp-marketing-automations-crm"),parseInt(de)>0?Object(r.createElement)("span",{className:"bwf-crm-btn-group-count"},de):""),Ne=T()("bwfcrm-task-list-table",{"has-search":!0}),Ae=[{cellClassName:"is-checkbox-column",key:"id",label:Object(r.createElement)(k.CheckboxControl,J({"aria-label":Object(o.__)("Select","wp-marketing-automations-crm")},_e)),required:!0},{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30"},{key:"task",label:Object(o.__)("Task","wp-marketing-automations-crm"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-100"},{key:"actions",label:Object(o.__)("Action","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"data",label:Object(o.__)("Data","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"automation",label:Object(o.__)("Automation","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"date",label:Object(o.__)("Date","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"view",label:"",isLeftAligned:!0,cellClassName:"bwf-w-60"}],Le=Object(r.createElement)("div",{className:"bwf-page-filters bwf-display-flex bwf-flex"},Object(r.createElement)(k.SelectControl,{className:"bwf-w-300 bwf-mr-10",value:a||"",options:[{label:Object(o.__)("Select Automation","wp-marketing-automations-crm"),value:""}].concat(H),onChange:function(e){if(e)Object(x.j)({automation:e},"/",n);else{var t=n;delete t.automation,Object(x.j)({},"/",t)}}}),Object(r.createElement)(k.SelectControl,{className:"bwf-w-300 bwf-mr-10",value:i||"",options:[{label:Object(o.__)("Select Action","wp-marketing-automations-crm"),value:""}].concat(G),onChange:function(e){if(e)Object(x.j)({action:e},"/",n);else{var t=n;delete t.action,Object(x.j)({},"/",t)}}}));Object(o.__)("Delete Contacts","wp-marketing-automations-crm");return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(k.ButtonGroup,null,Object(r.createElement)(k.Button,{isPrimary:!t||"scheduled"===t,isSecondary:t&&"scheduled"!==t,onClick:function(){return Object(x.j)({path:"/automations/task-history/scheduled"},"/",n)}},Pe),Object(r.createElement)(k.Button,{isPrimary:t&&"paused"===t,isSecondary:t&&"paused"!==t,onClick:function(){return Object(x.j)({path:"/automations/task-history/paused"},"/",n)}},xe),Object(r.createElement)(k.Button,{isPrimary:t&&"completed"===t,isSecondary:t&&"completed"!==t,onClick:function(){return Object(x.j)({path:"/automations/task-history/completed"},"/",n)}},Ce),Object(r.createElement)(k.Button,{isPrimary:t&&"failed"===t,isSecondary:t&&"failed"!==t,onClick:function(){return Object(x.j)({path:"/automations/task-history/failed"},"/",n)}},Te)),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(c.a,{rows:Se,className:Ne,headers:Ae,query:{paged:le},rowsPerPage:ie,totalRows:se,isLoading:fe,onPageChange:function(e,t){f("offset",(e-1)*ie)},onQueryChange:function(e){return"per_page"!==e?function(){}:ve},rowHeader:!0,showMenu:!1,actions:[Object(r.createElement)("div",{className:"bwf-flex"},Le),Object(r.createElement)(D,{query:n,onSearch:function(e){l(Oe,n,0,ie,e)}})],emptyMessage:Object(o.__)("No tasks found","wp-marketing-automations-crm")}),Y&&Object(r.createElement)(k.Modal,{title:"Details",onRequestClose:function(){return Z(!1)},className:"bwf-message-preview-modal bwf-admin-modal bwf-admin-modal-medium bwf-task-model"},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-150 bwf_bold bwf_align_center"},Object(o.__)("Automation","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf_align_center"},te.automation_name)),Object(r.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-150 bwf_bold bwf_align_center"},Object(o.__)("Event","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf_align_center"},te.automation_source+" : "+te.automation_event)),Object(r.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-150 bwf_bold bwf_align_center"},Object(o.__)("Action","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf_align_center"},te.task_integration+(te.task_integration_action?" : ".concat(te.task_integration_action):""))),Object(r.createElement)("div",{className:"bwf-p-15 bwf-bb-grey bwf-task-details"},Object(r.createElement)("ul",{className:"bwf_align_center",dangerouslySetInnerHTML:{__html:te.task_details}})),!Object(y.isEmpty)(te.task_message)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-h3 bwf-pt-15"},Object(o.__)("Notes","wp-marketing-automations-crm")),Object.entries(te.task_message).map((function(e){var t=W(e,2),n=t[0],a=t[1];return Object(r.createElement)("div",{className:"bwf-p-15"},Object(r.createElement)("div",{className:"bwfcrm-task_notes_card"},a),Object(r.createElement)("div",{className:"bwfcrm-task_notes_time"},Object(r.createElement)("i",null,n)))}))))),Object(r.createElement)(E.a,{confirmText:B.confirmText,confirmButtonText:B.buttonConfirm,cancelButtonText:B.buttonCancel,onConfirm:B.onConfirm,isLoading:B.loading,successMessage:B.success,errorMessage:B.error,onRequestClose:function(){return F({status:!1})},isOpen:B.status,isDelete:"Are you sure you want to delete this task ?"==B.confirmText}),Object(r.createElement)($,{floatingBarProps:ke,resetSelection:Ee,onSuccess:function(){return l(Oe,n,0,ie)},screenType:t,screenTypeId:Oe}))},ee=n(461),te=n(44),ne=n(114);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=(0,m().getPageCountData)(),n=Object(te.a)().getPageCountData,o=Object(ne.a)().setPageCountData,c=n();Object(r.useEffect)((function(){o(ae(ae({},c),t))}),[t]),Object(ee.a)("task-history","","","","",0),Object(p.d)("Task History");var i=e.match.params.type,u=Object(x.h)();return Object(r.createElement)(a.a,null,Object(r.createElement)("div",{className:"bwfcrm-task-list"},Object(r.createElement)(Z,{query:u,type:i})))}}}]);