(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{501:function(e,t,n){"use strict";var r=n(114),a=n(0);t.a=function(e,t,n){var i=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},o=Object(r.a)(),c=o.setActiveMultiple,l=o.resetHeaderMenu,s=o.setL2NavType,u=o.setL2Nav,b=o.setBackLink,f=o.setL2Title,m=o.setPageHeader;return Object(a.useEffect)((function(){l(),!t&&s("menu"),!t&&u(i.settings_nav),c({leftNav:"settings",rightNav:e}),t&&b(t),n&&f(n),m("Settings")}),[e,n]),!0}},694:function(e,t,n){},808:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(501),i=n(4),o=n(9),c=n(514),l=n(5),s=n(15),u=n.n(s),b=n(591),f=(n(694),n(7));function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=e.fields,n=void 0===t?[]:t,a=e.values,s=void 0===a?{}:a,y=e.submit_text,g=void 0===y?Object(i.__)("Save Settings","funnel-builder"):y,v=e.validate,p=void 0===v?function(){return{}}:v,O=e.onSubmitCallback,h=void 0===O?l.noop:O,j=e.setSettingFieldSchema;if(Object(l.isEmpty)(n))return null;var w=d(Object(r.useState)(n[0].key),2),S=w[0],_=w[1],E=d(Object(r.useState)(""),2),A=E[0],k=E[1],P=d(Object(r.useState)(!1),2),N=P[0],F=P[1],C=function(e,t,n){var r=!1,a=t.fields,i=t.relation,o=void 0===i?"OR":i;o=o.toUpperCase();try{var c=null;if("OR"===o){if(a&&Array.isArray(a))for(var l=0;l<a.length;l++){c=e[a[l].id];var s=void 0===a[l].value||a[l].value;if(c==s)return!0}}else"AND"==o&&a&&Array.isArray(a)&&(r=a.every((function(t){c=e[t.id];var n=void 0===t.value||t.value;return c==n})))}catch(e){console.log(e)}return r},I=function(e){F(!0),k("");var t=Object.assign({},e);n.forEach((function(e){Object(l.isNull)(e)||e.fields.forEach((function(e){if("select"===e.type&&e.multiple&&Array.isArray(t[e.id])&&!Object(l.isEmpty)(t[e.id])&&"object"===m(t[e.id][0])){var n=[];t[e.id].forEach((function(e){n.push(e.key)})),t[e.id]=n}}))})),h(t,F,e)};return Object(r.createElement)(r.Fragment,null,A&&Object(r.createElement)(o.Notice,{status:"error",className:"bwf--settings-error",isDismissible:!0,onRemove:function(e){k("")}},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:A}})),Object(r.createElement)("div",{className:"component--bwf-settings-form"},Object(r.createElement)("div",{className:"bwf--settings-tab-list"},n.map((function(e){if(!Object(l.isNull)(e))return e.hasOwnProperty("isProSection")&&e.isProSection&&!Object(f.P)()||e.hasOwnProperty("isWooSection")&&e.isWooSection&&!Object(f.V)()||e.hasOwnProperty("isConnectorSection")&&e.isConnectorSection&&!Object(f.M)()||e.hasOwnProperty("showSection")&&!e.showSection?"":Object(r.createElement)("div",{key:e.key,onClick:function(){_(e.key)},className:u()("tab--title",{"active--tab":S===e.key})},e.label)}))),Object(r.createElement)("div",{className:"bwf--settings-tab-content"},Object(r.createElement)(c.a,{onSubmitCallback:function(e){I(e)},initialValues:s,validate:p},(function(e){var t=e.getInputProps,a=e.values,c=e.errors,s=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,n.map((function(e){if(!Object(l.isNull)(e))return Object(r.createElement)("fieldset",{key:"fieldset--"+e.key,className:u()("tab--content",{"active--content":S===e.key})},e.heading&&Object(r.createElement)("legend",{className:"tab--heading"},e.heading),e.fields.map((function(n,i){return n.hasOwnProperty("isProField")&&n.isProField&&!Object(f.P)()||n.hasOwnProperty("isWooField")&&n.isWooField&&!Object(f.V)()||n.hasOwnProperty("isConnectorField")&&n.isConnectorField&&!Object(f.M)()||n.hasOwnProperty("showField")&&!e.showField?"":Object(r.createElement)(r.Fragment,{key:i},(Object(l.isEmpty)(n.toggler)||C(a,n.toggler))&&n.wrap_before&&Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:n.wrap_before}}),n.type?Object(r.createElement)(r.Fragment,null,!1!==n.show&&(Object(l.isEmpty)(n.toggler)||C(a,n.toggler))&&Object(r.createElement)(b.a,{input:n,formProps:t(n.id),values:a,setSettingFieldSchema:j})):n.hint?Object(r.createElement)(r.Fragment,{dangerouslySetInnerHTML:{__html:n.hint},className:u()(n.class)}):null,(Object(l.isEmpty)(n.toggler)||C(a,n.toggler))&&n.wrap_after&&Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:n.wrap_after}}))})))})),Object(r.createElement)("div",{className:"submit-btn-wrap"},Object(r.createElement)(o.Button,{isPrimary:!0,onClick:Object.keys(c).length?function(){!function(e){var t="";"object"===m(e)&&Object.values(e).forEach((function(e){t+="<p>"+e+"</p>"})),k(t),jQuery("#wpbody").length&&jQuery("#wpbody")[0].scrollIntoView()}(c)}:s,disabled:N,isBusy:N},N?Object(i.__)("Saving","funnel-builder")+"...":g)))})))))},v=n(16),p=n.n(v);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(){Object(a.a)("general",!1,""),Object(f.d)("Settings");var e=Object(r.useContext)(f.b),t=bwfanParams,n=t.bwfan_global_settings_schema,o=void 0===n?{}:n,c=t.bwfan_global_settings,s=void 0===c?{}:c,u=O(Object(r.useState)(o),2),b=u[0],m=u[1],d=O(Object(r.useState)(s),2),y=d[0],v=d[1],h=[];b.forEach((function(e){Array.isArray(e.tabs)&&e.tabs.forEach((function(e){Object(l.isNull)(e)||Array.isArray(e.fields)&&e.fields.forEach((function(e){e.required&&h.push({id:e.id,label:e.label})}))}))}));var j=function(t,n,r){try{p()({path:Object(f.g)("/settings"),method:"POST",data:{bwfan_global_settings:t}}).then((function(t){if(200===t.code){e(t.message);var n=t.result;n&&(window.bwfanParams.bwfan_global_settings=r,window.bwfanParams.bwfan_global_settings_schema=n.schema,v(n.values),m(n.schema))}else e(t.message)})).catch((function(t){console.log(t),e(t.message)})).finally((function(){n(!1),Object(f.K)(e,5e3)}))}catch(t){console.log(t),e(t.message),Object(f.K)(e,5e3),n(!1)}},w=function(e){var t={};return h.forEach((function(n){Object(l.isEmpty)(e[n.id])&&(t[n.id]=n.label+Object(i.__)(" field is required !","wp-marketing-automations"))})),t};return Object(r.createElement)(r.Fragment,null,b.map((function(e){return Object(r.createElement)(g,{key:"setting-tab--"+e.key,fields:e.tabs,values:y,onSubmitCallback:j,validate:w,setSettingFieldSchema:m})})))}}}]);