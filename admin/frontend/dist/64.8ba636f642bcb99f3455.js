(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{114:function(e,t,r){"use strict";var a=r(112),n=r(44);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.a=function(){var e=Object(a.a)("menu").setStateProp,t=(0,Object(n.a)().getActive)();return{setActive:function(r,a){return e("active",i(i({},t),{},s({},r,a)))},setActiveMultiple:function(t){return e("active",t)},setBackLink:function(t){return e("backLink",t)},setL2Title:function(t){return e("l2Title",t)},setL2PostTitle:function(t){return e("l2PostTitle",t)},setL2Nav:function(t){return e("l2Nav",t)},setL2NavType:function(t){return e("l2NavType",t)},setL2Content:function(t){return e("l2Content",t)},setL2NavAlign:function(t){return e("l2NavAlign",t)},setPageHeader:function(t){return e("pageHeader",t)},setBackLinkLabel:function(t){return e("backLinkLabel",t)},setPageCountData:function(t){return e("pageCountData",t)},resetHeaderMenu:function(){e("backLink",""),e("l2Title",""),e("l2PostTitle",""),e("l2Nav",{}),e("l2NavType",""),e("active",{leftNav:"",rightNav:""}),e("l2Content",""),e("l2NavAlign","left"),e("pageHeader","")},setContactL2Menu:function(){return e("l2Nav")}}}},137:function(e,t,r){"use strict";var a=r(0),n=r(109),c=r(120),i=r(121),s=r(9),o=r(4);t.a=function(e){var t=e.confirmText,r=void 0===t?"":t,l=e.confirmButtonText,u=void 0===l?"":l,m=e.cancelButtonText,b=void 0===m?"":m,p=e.onConfirm,f=void 0===p?function(){}:p,d=e.isLoading,O=void 0!==d&&d,w=e.successMessage,j=void 0===w?"":w,v=e.errorMessage,g=void 0===v?"":v,y=e.onRequestClose,h=e.isOpen,_=void 0!==h&&h,E=e.confirmDescription,k=void 0===E?"":E,N=e.isDelete,C=void 0!==N&&N;Object(a.useEffect)((function(){(j||g)&&setTimeout((function(){y&&y()}),2e3)}),[j,g]);return _?Object(a.createElement)(s.Modal,{title:"",onRequestClose:function(){return y()},className:"bwf-c-s-delete-model bwf-admin-modal bwf-admin-modal-small bwf-admin-modal-no-header"},C&&Object(a.createElement)("div",{className:"bwf-h4"},Object(o.__)("Delete","wp-marketing-automations-crm")),O&&Object(a.createElement)("div",{className:"bwf-t-center"},Object(a.createElement)("div",{className:"bwf_clear_20"}),Object(a.createElement)(n.a,null)),!!j&&Object(a.createElement)("div",{className:"bwf-t-center"},Object(a.createElement)(c.a,null),Object(a.createElement)("div",{className:"bwf-h1"},j)),!!g&&Object(a.createElement)("div",{className:"bwf-t-center"},Object(a.createElement)(i.a,null),Object(a.createElement)("div",{className:"bwf-h1"},g)),!O&&!j&&!g&&Object(a.createElement)("div",{className:"bwf-t-center bwf-form-buttons"},C?Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-h2"},Object(o.__)("Are you sure?","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf_clear_15"}),Object(a.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},Object(o.__)("Once you delete this item. It will no longer available.","wp-marketing-automations-crm"))):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-h1"},r),!!k&&Object(a.createElement)("p",null,k)),Object(a.createElement)("div",{className:"bwf_clear_20"}),Object(a.createElement)("div",{className:C?"bwf_text_right":""},Object(a.createElement)(s.Button,{isTertiary:!0,style:{marginRight:"20px"},onClick:function(){y&&y()}},b),Object(a.createElement)(s.Button,{isPrimary:!0,onClick:function(){f&&f()},className:C?"bwf-delete-btn":""},u)))):null}},205:function(e,t,r){"use strict";function a(e){return e<10?"has-".concat(e,"-items"):"has-10-items"}r.d(t,"a",(function(){return a}))},248:function(e,t,r){},249:function(e,t,r){"use strict";var a=r(0),n=r(9),c=r(4),i=r(15),s=r.n(i),o=r(171),l=r.n(o),u=r(5),m=r(8),b=r.n(m),p=r(18),f=r(31),d=function(e){var t,r=e.delta,i=e.href,o=e.hrefType,m=e.isOpen,b=e.label,d=e.onToggle,O=e.prevLabel,w=e.prevValue,j=e.reverseTrend,v=e.selected,g=e.value,y=e.onLinkClickCallback,h=e.tileIcon,_=s()("bwf-summary-item-container",{"is-dropdown-button":d,"is-dropdown-expanded":m}),E=s()("bwf-summary-item",{"is-selected":v,"is-good-trend":j?r<0:r>0,"is-bad-trend":j?r>0:r<0}),k=r>0?Object(c.sprintf)(Object(c.__)("Up %d%% from %s","wp-marketing-automations-crm"),r,O):Object(c.sprintf)(Object(c.__)("Down %d%% from %s","wp-marketing-automations-crm"),Math.abs(r),O);r||(k=Object(c.sprintf)(Object(c.__)("No change from %s","wp-marketing-automations-crm"),O));var N={className:E,"aria-current":v?"page":null};if(d||i){var C=!!d;t=C?n.Button:p.a,C?(N.onClick=d,N["aria-expanded"]=m):(N.href=i,N.role="menuitem",N.onClick=y,N.type=o)}else t="div";return Object(a.createElement)("li",{className:_},Object(a.createElement)(t,N,Object(a.createElement)(f.a,{gap:"5",align:"center"},Object(a.createElement)(f.b,null,Object(a.createElement)("div",{className:"bwf-summary-item-label"},Object(a.createElement)(n.__experimentalText,{variant:"body.small"},b)),Object(a.createElement)("div",{className:"bwf-summary-item-data"},Object(a.createElement)("div",{className:"bwf-summary-item-value"},Object(a.createElement)(n.__experimentalText,{variant:"title.small"},Object(u.isNil)(g)?Object(c.__)("-","wp-marketing-automations-crm"):g)),r&&Object(a.createElement)(n.Tooltip,{text:Object(u.isNil)(w)?Object(c.__)("-","wp-marketing-automations-crm"):"".concat(O," ").concat(w),position:"top center"},Object(a.createElement)("div",{className:"bwf-summary-item-delta",role:"presentation","aria-label":k},Object(a.createElement)(n.__experimentalText,{variant:"caption"},Object(u.isNil)(r)?Object(c.__)("-","wp-marketing-automations-crm"):Object(c.sprintf)(Object(c.__)("%d%%","wp-marketing-automations-crm"),r))))),d?Object(a.createElement)(l.a,{className:"bwf-summary-toggle",icon:"chevron-down",size:24}):null),h&&Object(a.createElement)(f.c,null,h))))};d.propTypes={delta:b.a.number,href:b.a.string,hrefType:b.a.oneOf(["wp-admin","wc-admin","external"]).isRequired,isOpen:b.a.bool,label:b.a.string.isRequired,onToggle:b.a.func,prevLabel:b.a.string,prevValue:b.a.oneOfType([b.a.number,b.a.string]),reverseTrend:b.a.bool,selected:b.a.bool,value:b.a.oneOfType([b.a.number,b.a.string]),onLinkClickCallback:b.a.func},d.defaultProps={href:"",hrefType:"wc-admin",isOpen:!1,prevLabel:Object(c.__)("Previous Period:","wp-marketing-automations-crm"),reverseTrend:!1,selected:!1,onLinkClickCallback:u.noop},t.a=d},259:function(e,t,r){"use strict";var a=r(0),n=r(4),c=r(9),i=r(8),s=r.n(i),o=r(95),l=r(15),u=r.n(l),m=r(5),b=r(205);var p=function(e){var t,r,i,s=e.label,o=e.orientation,l=e.itemCount,p=e.items,f=Object(m.uniqueId)("bwf-summary-helptext-"),d=Object(b.a)(l),O=u()("bwf-summary",(i="horizontal"===o,(r=d)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t));return Object(a.createElement)(c.NavigableMenu,{"aria-label":s,"aria-describedby":f,orientation:o,stopNavigationEvents:!0},Object(a.createElement)("p",{id:f,className:"screen-reader-text"},Object(n.__)("List of data points available for filtering. Use arrow keys to cycle through the list. Click a data point for a detailed report.","wp-marketing-automations-crm")),Object(a.createElement)("ul",{className:O},p))};p.propTypes={label:s.a.string,orientation:s.a.oneOf(["vertical","horizontal"]).isRequired,items:s.a.node.isRequired,itemCount:s.a.number.isRequired};var f=p,d=(r(248),function(e){var t=e.children,r=e.isDropdownBreakpoint,n=e.label,i=t({}),s=a.Children.count(i)||1,o=r?"vertical":"horizontal",l=Object(a.createElement)(f,{label:n,orientation:o,itemCount:s,items:i});if(!r||s<2)return l;var u=i.find((function(e){return!!e.props.selected}));return u?Object(a.createElement)(c.Dropdown,{className:"bwf-summary",position:"bottom",headerTitle:n,renderToggle:function(e){var t=e.isOpen,r=e.onToggle;return Object(a.cloneElement)(u,{onToggle:r,isOpen:t})},renderContent:function(e){return Object(a.createElement)(f,{label:n,orientation:o,itemCount:s,items:t(e)})}}):l});d.propTypes={children:s.a.func.isRequired,label:s.a.string},d.defaultProps={label:Object(n.__)("Performance Indicators","wp-marketing-automations-crm")};t.a=Object(o.withViewportMatch)({isDropdownBreakpoint:"< large"})(d)},331:function(e,t,r){"use strict";var a=r(0),n=r(4),c=r(9),i=r(109),s=(r(365),r(5)),o=r(7);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,c=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var m={rich:Object(n.__)("Rich Text","wp-marketing-automations-crm"),wc:Object(n.__)("WooCommerce","wp-marketing-automations-crm"),html:Object(n.__)("HTML","wp-marketing-automations-crm"),editor:Object(n.__)("Editor","wp-marketing-automations-crm")};t.a=function(e){var t=e.isOpen,r=e.onRequestClose,u=e.error,b=e.isLoading,p=e.body,f=e.subject,d=e.preHeader,O=e.utm,w=e.type,j=e.conversation,v=e.sourceType,g=e.mode,y=e.template,h=l(Object(a.useState)(!1),2),_=h[0],E=h[1],k={1:Object(n.__)("Email","wp-marketing-automations-crm"),2:Object(n.__)("SMS","wp-marketing-automations-crm"),3:Object(n.__)("WhatsApp","wp-marketing-automations-crm")},N=3==parseInt(v)||4==parseInt(v)||5==parseInt(v)?Object(n.__)("Sent By","wp-marketing-automations-crm"):Object(n.__)("Name","wp-marketing-automations-crm");Object(a.useEffect)((function(){E(!1)}),[]);var C,S,I=function(){r&&r(),E(!1)};return t?Object(a.createElement)(c.Modal,{title:Object(n.__)("Details","wp-marketing-automations-crm"),onRequestClose:I,className:"bwf-admin-modal bwf-message-preview-modal bwf-admin-modal-xl"},u&&Object(a.createElement)(c.Notice,{status:"error",onRemove:I},u),b&&Object(a.createElement)(i.a,null),!b&&p&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-form-fields"},Object(a.createElement)("div",{className:"bwf-message-wrap"},Object(a.createElement)("div",{className:"bwf-h4"},k[g]),Object(a.createElement)("div",{className:"bwf-section"},!Object(s.isEmpty)(j)&&j.hasOwnProperty("source")&&Object(a.createElement)(a.Fragment,null,j.source.hasOwnProperty("type")&&"Direct by"!=j.source.type&&Object(a.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(a.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},Object(n.__)("Source","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf_align_center"},j.source.type?j.source.type:"-")),Object(a.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(a.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},N),Object(a.createElement)("div",{className:"bwf_align_center"},j.source.hasOwnProperty("name")&&j.source.name?j.source.name:"-"))),!!f&&Object(a.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(a.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},Object(n.__)("Subject","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf_align_center"},f," ",!!j&&!!j.c_status&&Object(a.createElement)(a.Fragment,null,function(e){switch(parseInt(e)){case 1:return Object(a.createElement)("span",{className:"bwfcrm-cs-status-square bwfcrm-cs-status-draft"},Object(n.__)("Draft","wp-marketing-automations-crm"));case 3:return Object(a.createElement)("span",{className:"bwfcrm-cs-status-square bwfcrm-cs-status-failed"},Object(n.__)("Failed","wp-marketing-automations-crm"));case 4:return Object(a.createElement)("span",{className:"bwfcrm-cs-status-square bwfcrm-cs-status-bounced"},Object(n.__)("Bounced","wp-marketing-automations-crm"))}}(j.c_status)))),!!d&&Object(a.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(a.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},Object(n.__)("Mail Pre-header","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf_align_center"},d)),1===parseInt(g)&&!!w&&Object(a.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(a.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},Object(n.__)("Mail Type","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf_align_center"},m[w])),!!O&&Object.keys(O).length>0&&(C=O,(S=[]).push(Object(n.__)("Source","wp-marketing-automations-crm")+": "+C.source),S.push(Object(n.__)("Medium","wp-marketing-automations-crm")+": "+C.medium),C.hasOwnProperty("name")&&!Object(s.isEmpty)(C.name)&&S.push(Object(n.__)("Name","wp-marketing-automations-crm")+": "+C.name),C.hasOwnProperty("content")&&!Object(s.isEmpty)(C.content)&&S.push(Object(n.__)("Content","wp-marketing-automations-crm")+": "+C.content),C.hasOwnProperty("term")&&!Object(s.isEmpty)(C.term)&&S.push(Object(n.__)("Term","wp-marketing-automations-crm")+": "+C.term),Object(a.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(a.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},Object(n.__)("UTM Details","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf_align_center"},Object(a.createElement)("div",{className:"bwf-p"},S.join(" | "))))),([2,3].includes(parseInt(g))||_)&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(a.createElement)("div",{className:"bwf-output-email",style:[2,3].includes(parseInt(g))?{whiteSpace:"pre-wrap"}:{}},p))),1===parseInt(g)&&Object(a.createElement)("div",{className:"bwf-p-15 bwf-t-center"},Object(a.createElement)("a",{className:"bwf-model-link",onClick:function(){return E(!_)}},_?Object(n.__)("Less Details","wp-marketing-automations-crm"):Object(n.__)("More Details","wp-marketing-automations-crm")))),!!j&&!!j.c_status&&2===parseInt(j.c_status)&&!Object(s.isEmpty)(y.timeline)&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf_clear_20"}),Object(a.createElement)("div",{className:"bwf-h4"},Object(n.__)("Timeline","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf-section"},Object.entries(y.timeline).map((function(e){var t=l(e,2),r=t[0],n=t[1];return Object(a.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(a.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},n),Object(a.createElement)("div",{className:"bwf_align_center"},Object(o.B)(r)))})))))))):null}},362:function(e,t,r){"use strict";var a=r(114),n=r(0),c=r(4),i=r(20),s=r(17),o=r(176),l=r(7),u=function(e,t,r){return decodeURIComponent(Object(i.f)(e,t,r))};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",b=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,p=location&&location.search?Object(s.parse)(location.search.substring(1)):{},f=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},d=f.broadcasts_nav,O=o.a.getCampaignData(),w=o.a.getCampaignId(),j={overview:{name:Object(c.__)("Overview","wp-marketing-automations-crm"),link:u({},"/broadcast/".concat(w,"/overview"),p)},analytics:{name:Object(c.__)("Analytics","wp-marketing-automations-crm"),link:u({},"/broadcast/".concat(w,"/analytics"),p)},recipient:{name:Object(c.__)("Engagements","wp-marketing-automations-crm"),link:u({},"/broadcast/".concat(w,"/engagements"),p)}};Object(l.V)()&&(j.orders={name:Object(c.__)("Orders","wp-marketing-automations-crm"),link:u({},"/broadcast/".concat(w,"/orders"),p)});var v=Object(a.a)(),g=v.setActiveMultiple,y=v.resetHeaderMenu,h=v.setL2NavType,_=v.setL2Nav,E=v.setBackLink,k=v.setL2Title,N=v.setL2Content,C=v.setBackLinkLabel,S=v.setL2NavAlign,I=v.setPageHeader;return Object(n.useEffect)((function(){y(),i?(h("menu"),_(j)):(!r&&h("menu"),!r&&_(d)),g({leftNav:"broadcasts",rightNav:e}),r&&1===b&&(C("Email Broadcasts"),E(u({},"/broadcasts/email",p))),r&&2===b&&(C("SMS Broadcasts"),E(u({},"/broadcasts/sms",p))),r&&3===b&&(C("WhatsApp Broadcasts"),E(u({},"/broadcasts/whatsapp",p))),t?k(t):i&&k(O.title),i&&S("left"),!r&&m&&N(m),I("Broadcasts")}),[e,b]),!0}},365:function(e,t,r){},488:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(0);var n=function(e,t){var r=Object(a.useRef)();Object(a.useEffect)((function(){r.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){r.current()}),t);return function(){return clearInterval(e)}}}),[t])}},562:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var a=r(2),n=r(1),c=r.n(n),i=r(10),s=r(3),o=r(11),l=r(57),u=function(e){function t(t,r){var a;return(a=e.call(this)||this).client=t,a.setOptions(r),a.bindMethods(),a.updateResult(),a}Object(o.a)(t,e);var r=t.prototype;return r.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},r.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},r.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},r.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},r.getCurrentResult=function(){return this.currentResult},r.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},r.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,Object(a.a)({},this.options,{variables:void 0!==e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},r.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:Object(l.b)();this.currentResult=Object(a.a)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},r.notify=function(e){var t=this;i.a.batch((function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)}))}))},t}(r(21).a),m=r(98);function b(e,t,r){var n=c.a.useRef(!1),o=c.a.useState(0)[1],l=Object(s.k)(e,t,r),b=Object(m.b)(),p=c.a.useRef();p.current?p.current.setOptions(l):p.current=new u(b,l);var f=p.current.getCurrentResult();c.a.useEffect((function(){n.current=!0;var e=p.current.subscribe(i.a.batchCalls((function(){n.current&&o((function(e){return e+1}))})));return function(){n.current=!1,e()}}),[]);var d=c.a.useCallback((function(e,t){p.current.mutate(e,t).catch(s.i)}),[]);if(f.error&&p.current.options.useErrorBoundary)throw f.error;return Object(a.a)({},f,{mutate:d,mutateAsync:f.mutate})}},725:function(e,t,r){},738:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(9),c=r(4),i=r(176),s=r(460),o=r(7),l=(r(725),r(259)),u=r(249),m=r(18),b=r(47),p=r(31),f=r(13),d=r(45);function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var j=function(e){var t=e.campaign,r=e.pauseUnpauseBroadcast,i=t&&t.type?parseInt(t.type):1,s=Object(o.i)();return Object(a.createElement)(n.Card,{className:"bwf-crm-campaign-stats-overview"},Object(a.createElement)(n.CardHeader,{className:"bwf-crm-overview-report-header"},Object(a.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Overview","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf-display-flex"},Object(a.createElement)("span",{className:"bwf-broadcast-status"},Object(a.createElement)("span",{className:"bwf-broadcast-s-"+t.status},t.status&&s.hasOwnProperty(t.status)?s[t.status].label:t.status)),[3,6].includes(parseInt(t.status))&&Object(a.createElement)(d.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations-crm"),menuPosition:"bottom right",renderContent:function(e){var n=e.onToggle;return Object(a.createElement)(b.a,{isClickable:!0,onInvoke:function(){r(t.id,3===parseInt(t.status)?6:3),n()}},Object(a.createElement)(p.a,{justify:"flex-start"},Object(a.createElement)(p.c,null,Object(a.createElement)(f.a,{icon:3===parseInt(t.status)?"pause":"play",color:"#000"})),Object(a.createElement)(p.c,null,3===parseInt(t.status)?Object(c.__)("Pause","wp-marketing-automations-crm"):Object(c.__)("Resume","wp-marketing-automations-crm"))))}}))),Object(a.createElement)(n.CardBody,{className:"bwf-crm-campaign-stats-overview-card bwf-crm-hide-delta"},Object(a.createElement)(l.a,{key:1},(function(){return[Object(a.createElement)(u.a,{isHomescreen:!0,key:4,value:Number.isInteger(parseInt(t.count))?parseInt(t.count):0,label:Object(c.__)("Contacts","wp-marketing-automations-crm")}),Object(a.createElement)(u.a,{isHomescreen:!0,key:1,value:Number.isInteger(parseInt(t.sent))?parseInt(t.sent):0,label:Object(c.__)("Sent","wp-marketing-automations-crm")})].concat(O(1===i?[Object(a.createElement)(u.a,{isHomescreen:!0,key:2,value:(Number.isInteger(parseFloat(t.open_count))?parseFloat(t.open_rate):0)+" %",label:Object(c.__)("Open Rate","wp-marketing-automations-crm")})]:[]),[Object(a.createElement)(u.a,{isHomescreen:!0,key:3,value:(Number.isInteger(parseFloat(t.click_count))?parseFloat(t.click_rate):0)+" %",label:Object(c.__)("Click Rate","wp-marketing-automations-crm")}),Object(a.createElement)(u.a,{isHomescreen:!0,key:4,value:Number.isInteger(parseInt(t.unsubs))?parseInt(t.unsubs):0,label:Object(c.__)("Unsubscribe","wp-marketing-automations-crm")})])}))),Object(a.createElement)(n.CardFooter,null,Object(a.createElement)(m.a,{href:"admin.php?page=autonami&path=/broadcast/"+t.id+"/analytics",type:"bwf-crm",className:"bwf-a-no-underline"},Object(c.__)("View Details","wp-marketing-automations-crm"))))},v=r(362),g=r(117),y=r(331),h=r(16),_=r.n(h),E=r(137),k=r(5),N=r(368),C=r(488),S=r(1),I=r(562),T=r(20);function R(e,t,r,a,n,c,i){try{var s=e[c](i),o=s.value}catch(e){return void r(e)}s.done?t(o):Promise.resolve(o).then(a,n)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var c=e.apply(t,r);function i(e){R(c,a,n,i,s,"next",e)}function s(e){R(c,a,n,i,s,"throw",e)}i(void 0)}))}}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,c=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var x=function(){var e=A(Object(a.useState)(!1),2),t=e[0],r=e[1],l=i.a.getCampaignData(),u=Object(s.a)().resetCampaign,m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;setTimeout((function(){e&&(u(e),Object(T.j)({path:"/broadcast/"+e.id,page:"autonami"},"/",{})),r(!1)}),2e3)},b=Object(I.a)(function(){var e=P(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()({path:Object(o.g)("/broadcast/"),method:"POST",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){return m(e.result)},onError:function(){return m()}}),p=Object(S.useCallback)(P(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(!0),t={title:Object(c.__)("Send to Unopen","wp-marketing-automations-crm"),description:"",type:l.type,created_by:Object(o.n)(),createUnopen:l.id},b.mutate(t);case 3:case"end":return e.stop()}}),e)}))),[l]);return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(E.a,{onRequestClose:function(){r(!1),b.reset()},isLoading:b.isLoading,successMessage:b.isSuccess&&Object(c.__)("Unopen Broadcast created. Redirecting to the broadcast","wp-marketing-automations-crm"),errorMessage:b.isError&&(b.error&&b.error.message?b.error.message:Object(c.__)("Unable to create unopen broadcast","wp-marketing-automations-crm")),isOpen:t}),Object(a.createElement)(n.Button,{isSecondary:!0,onClick:p},Object(c.__)("Send to Unopen","wp-marketing-automations-crm")))},L=function(){var e=i.a.getCampaignData();return 4===parseInt(e.status)&&1===parseInt(e.type)&&!e.is_unopen_grandchild&&Object(a.createElement)(n.Card,{className:"bwf-crm-overview-detail-wrap bwf-card-display-block"},Object(a.createElement)(n.CardHeader,{className:"bwf-crm-overview-report-header"},Object(c.__)("Actions","wp-marketing-automations-crm")),Object(a.createElement)(n.CardBody,null,Object(a.createElement)("div",{className:"bwf-report-row",key:1},Object(a.createElement)("div",{className:"bwf-report-row-label bwf-report-row-full"},Object(c.__)("Send to contacts who haven't opened the emails yet.","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf_clear_20"}),Object(a.createElement)("div",null,Object(a.createElement)(x,null)))))};function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e,t,r,a,n,c,i){try{var s=e[c](i),o=s.value}catch(e){return void r(e)}s.done?t(o):Promise.resolve(o).then(a,n)}function q(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var c=e.apply(t,r);function i(e){H(c,a,n,i,s,"next",e)}function s(e){H(c,a,n,i,s,"throw",e)}i(void 0)}))}}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,c=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}t.default=function(e){var t=e.campaignType,r=i.a.getCampaignData(),l=Object(o.j)(),u=Object(s.a)(),m=u.setCampaignValues,b=u.setEditableMode,p=F(Object(a.useState)(!1),2),f=p[0],d=p[1],O=F(Object(a.useState)({loading:!1,status:!1}),2),w=O[0],h=O[1];Object(v.a)("overview","",!0,!0,!1,t);var S=function(){var e=q(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_()({path:Object(o.g)("/broadcast/".concat(r.id,"/overview-stats")),method:"GET"}).then((function(e){200===e.code&&(e.hasOwnProperty("result")&&m("data",D(D({},r),e.result)))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();Object(C.a)((function(){3===parseInt(r.status)&&S()}),5e3);var I,T,R,P=function(){var e=q(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h({status:!0,loading:!0}),e.prev=1,e.next=4,_()({path:Object(o.g)("/broadcast/".concat(t,"/pause-unpause")),method:"POST",data:{status:parseInt(a)},headers:{"X-HTTP-Method-Override":"POST"}}).then((function(e){if(200==e.code){h({status:!0,success:e.message});var t=r;t.status=a,m("data",t)}}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),h({status:!0,error:e.t0.message});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(g.a,null),r&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwfcrm-overview-wrap"},5===parseInt(r.status)&&Object(a.createElement)(n.Notice,{className:"bwf-error-notice",status:"warning",isDismissible:!1},Object(a.createElement)("b",null,Object(c.__)("Halt Reason: ","wp-marketing-automations-crm")),r.data&&r.data.halt_reason?r.data.halt_reason:Object(c.__)("Unknwon error occurred","wp-marketing-automations-crm")),Object(a.createElement)(j,{campaign:r,pauseUnpauseBroadcast:P}),Object(a.createElement)("div",{className:"bwf_clear_20"}),Object(a.createElement)(n.Card,{className:"bwf-crm-overview-detail-wrap"},Object(a.createElement)(n.CardHeader,{className:"bwf-crm-overview-report-header"},Object(a.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Details","wp-marketing-automations-crm"))),Object(a.createElement)(n.CardBody,null,Object(a.createElement)("div",{className:"bwf-report-row",key:1},Object(a.createElement)("div",{className:"bwf-report-row-label"},Object(c.__)("Title","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf-report-row-value"},r.title)),Object(a.createElement)("div",{className:"bwf-report-row",key:2},Object(a.createElement)("div",{className:"bwf-report-row-label"},Object(c.__)("Type","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf-report-row-value"},l[r.type].label)),Object(a.createElement)("div",{className:"bwf-report-row",key:4},Object(a.createElement)("div",{className:"bwf-report-row-label"},Object(c.__)("Sent on","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf-report-row-value"},r.execution_time?Object(o.B)(Object(o.q)(r.execution_time)):" - ")),r.description&&Object(a.createElement)("div",{className:"bwf-report-row",key:5},Object(a.createElement)("div",{className:"bwf-report-row-label"},Object(c.__)("Description","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf-report-row-value"},r.description)),r.data.hasOwnProperty("filters")&&!Object(k.isEmpty)(r.data.filters)&&Object(a.createElement)("div",{className:"bwf-report-row",key:2},Object(a.createElement)("div",{className:"bwf-report-row-label"},Object(c.__)("Segments","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf-report-row-value"},Object(N.b)(r.data.filters))),r.data&&r.data.content&&r.data.content.map((function(e,t){return Object(a.createElement)("div",{className:"bwf-report-row",key:6},Object(a.createElement)("div",{className:"bwf-report-row-label"},r.data.content.length>1?Object(c.__)("Content #","wp-marketing-automations-crm")+(parseInt(t)+1):Object(c.__)("Content","wp-marketing-automations-crm")),Object(a.createElement)("div",{className:"bwf-report-row-value bwf-report-value-modal"},1===parseInt(r.type)&&e.subject&&Object(a.createElement)("span",null,e.subject),Object(a.createElement)(n.Button,{isSecondary:!0,className:"bwf-a-no-underline",onClick:function(){d(!0),h(e)}},Object(c.__)("View details","wp-marketing-automations-crm"))))})),parseInt(r.status)<3&&Object(a.createElement)("div",{className:"bwf-report-row",key:6},Object(a.createElement)("div",{className:"bwf-report-row-label"}),Object(a.createElement)("div",{className:"bwf-report-row-value bwf-report-value-modal"},Object(a.createElement)(n.Button,{isSecondary:!0,className:"bwf-a-no-underline",onClick:function(){return b(!0)}},Object(c.__)("Edit Broadcast","wp-marketing-automations-crm")))),(I=w,T="",R=!0,3==t&&I.hasOwnProperty("whatsAppImage")&&I.whatsAppImage&&I.hasOwnProperty("whatsAppImageSetting")&&I.whatsAppImageSetting.hasOwnProperty("position")&&!Object(k.isEmpty)(I.whatsAppImageSetting.position)&&I.whatsAppImageSetting.hasOwnProperty("imageURL")&&!Object(k.isEmpty)(I.whatsAppImageSetting.imageURL)&&(T="before"===I.whatsAppImageSetting.position?Object(a.createElement)(a.Fragment,null,Object(a.createElement)("img",{src:I.whatsAppImageSetting.imageURL,width:50,height:50}),Object(a.createElement)("div",{dangerouslySetInnerHTML:{__html:I.body}})):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{dangerouslySetInnerHTML:{__html:I.body}}),Object(a.createElement)("img",{src:I.whatsAppImageSetting.imageURL,width:50,height:50})),R=!1),R&&(T=Object(a.createElement)("div",{dangerouslySetInnerHTML:{__html:"editor"===I.type?I.editor.body:I.body}})),Object(a.createElement)(y.a,{isOpen:f,isLoading:!1,onRequestClose:function(){return d(!1)},subject:1===parseInt(r.type)&&I.subject,preHeader:1===parseInt(r.type)&&I.preheader,body:T,type:I.type,sourceType:2,mode:r.type,utm:I.utm})),Object(a.createElement)(E.a,{confirmText:w.confirmText,confirmButtonText:w.buttonConfirm,cancelButtonText:w.buttonCancel,onConfirm:w.onConfirm,isLoading:w.loading,successMessage:w.success,errorMessage:w.error,onRequestClose:function(){return h({status:!1})},isOpen:w.status}))),Object(a.createElement)("div",{className:"bwf_clear_20"}),Object(a.createElement)(L,null))))}}}]);