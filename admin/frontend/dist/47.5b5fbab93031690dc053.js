(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{117:function(e,t,r){"use strict";var n=r(0),a=r(8),o=r.n(a);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,e);var t,r,a,o=u(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).scrollTo=t.scrollTo.bind(f(t)),t}return t=i,(r=[{key:"componentDidMount",value:function(){setTimeout(this.scrollTo,250)}},{key:"scrollTo",value:function(){var e=this.props.offset;this.ref.current?window.scrollTo(0,parseInt(e,10)):setTimeout(this.scrollTo,250)}},{key:"render",value:function(){var e=this.props.children;return this.ref=Object(n.createRef)(),Object(n.createElement)("div",{ref:this.ref},e)}}])&&c(t.prototype,r),a&&c(t,a),i}(n.Component);m.propTypes={offset:o.a.string},m.defaultProps={offset:"0"},t.a=m},119:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},125:function(e,t,r){"use strict";var n=r(52),a=r.n(n),o=r(0),i=r(4),c=(r(119),r(144));var l=r(147);function u(e,t){var r=e.precision,n=void 0===r?null:r,a=e.decimalSeparator,o=void 0===a?".":a,i=e.thousandSeparator,u=void 0===i?",":i;if("number"!=typeof t&&(t=parseFloat(t)),isNaN(t))return"";if(n=parseInt(n),isNaN(n)){var s=t.toString().split("."),f=Object(c.a)(s,2)[1];n=f?f.length:0}return l(t,n,o,u)}var s=r(98),f=r.n(s);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=function(e){var t;function r(e){var r=m(m({},{code:"USD",symbol:"$",symbolPosition:"left",thousandSeparator:",",decimalSeparator:".",precision:2}),e);t={code:r.code.toString(),symbol:r.symbol.toString(),symbolPosition:r.symbolPosition.toString(),decimalSeparator:r.decimalSeparator.toString(),priceFormat:a(r),thousandSeparator:r.thousandSeparator.toString(),precision:parseInt(r.precision,10)}}function n(e){var r=u(t,e);if(""===r)return r;var n=t,a=n.priceFormat,o=n.symbol;return Object(i.sprintf)(a,o,r)}function a(e){if(e.priceFormat)return t=e.priceFormat.toString(),(r=document.createElement("DIV")).innerHTML=t,r.textContent||r.innerText||"";var t,r;switch(e.symbolPosition){case"left":return"%1$s%2$s";case"right":return"%2$s%1$s";case"left_space":return"%1$s&nbsp;%2$s";case"right_space":return"%2$s&nbsp;%1$s"}return"%1$s%2$s"}return r(e),{getCurrencyConfig:function(){return m({},t)},setCurrency:r,formatAmount:n,formatCurrency:function(e){return f()("Currency().formatCurrency",{version:"5.0.0",alternative:"Currency().formatAmount",plugin:"WooCommerce",hint:"`formatAmount` accepts the same arguments as formatCurrency"}),n(e)},getPriceFormat:a,formatDecimal:function(e){if("number"!=typeof e&&(e=parseFloat(e)),Number.isNaN(e))return 0;var r=t.precision;return Math.round(e*Math.pow(10,r))/Math.pow(10,r)},formatDecimalString:function(e){if("number"!=typeof e&&(e=parseFloat(e)),Number.isNaN(e))return"";var r=t.precision;return e.toFixed(r)},render:function(e){return"number"!=typeof e&&(e=parseFloat(e)),e<0?Object(o.createElement)("span",{className:"is-negative"},n(e)):n(e)}}}},127:function(e,t,r){var n=r(197),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},129:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return u}));var n=r(0),a=r(8),o=r.n(a);function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=Object(n.createContext)(2);function l(e){return Object(n.createElement)(c.Consumer,null,(function(t){var r="h"+Math.min(t,6);return Object(n.createElement)(r,e)}))}function u(e){var t=e.component,r=e.children,a=i(e,["component","children"]),o=t||"div";return Object(n.createElement)(c.Consumer,null,(function(e){return Object(n.createElement)(c.Provider,{value:e+1},!1===t?r:Object(n.createElement)(o,a,r))}))}u.propTypes={component:o.a.oneOfType([o.a.func,o.a.string,o.a.bool]),children:o.a.node}},140:function(e,t,r){var n=r(162),a=r(227),o=r(228),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},141:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(142);function a(e,t){if(e){if("string"==typeof e)return Object(n.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n.a)(e,t):void 0}}},142:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"a",(function(){return n}))},144:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(141);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},147:function(e,t,r){"use strict";e.exports=function(e,t,r,n){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var a=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0,i=void 0===n?",":n,c=void 0===r?".":r,l="";return(l=(o?function(e,t){if(-1===(""+e).indexOf("e"))return+(Math.round(e+"e+"+t)+"e-"+t);var r=(""+e).split("e"),n="";return+r[1]+t>0&&(n="+"),(+(Math.round(+r[0]+"e"+n+(+r[1]+t))+"e-"+t)).toFixed(t)}(a,o).toString():""+Math.round(a)).split("."))[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(l[1]||"").length<o&&(l[1]=l[1]||"",l[1]+=new Array(o-l[1].length+1).join("0")),l.join(c)}},148:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},149:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},158:function(e,t,r){},162:function(e,t,r){var n=r(127).Symbol;e.exports=n},172:function(e,t,r){"use strict";function n(e){return function(t,r,n){if(t[r])return t[r].type&&t[r].type===e?void 0:new Error("Invalid ".concat(r," passed to ").concat(n,". Must be ")+"`"+e.name+"`")}}r.d(t,"a",(function(){return n}))},197:function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(53))},199:function(e,t,r){"use strict";var n=r(0),a=r(9),o=r(15),i=r.n(o),c=r(5),l=r(8),u=r.n(l),s=(r(158),function(e){var t=e.disabled,r=e.value,o=e.onChange,l=e.dateFormat,u=e.label,s=e.describedBy,f=e.error,p=e.onFocus,m=e.onKeyDown,b=e.errorPosition,d=i()("bwf-calendar-input",{"is-empty":0===r.length,"is-error":f}),y=Object(c.uniqueId)("_woo-dates-input");return Object(n.createElement)("div",{className:d},Object(n.createElement)("input",{type:"text",className:"bwf-calendar-input-text",value:r,onChange:o,"aria-label":u,id:y,"aria-describedby":"".concat(y,"-message"),placeholder:l.toLowerCase(),onFocus:p,onKeyDown:m,disabled:t}),f&&Object(n.createElement)(a.Popover,{className:"bwf-calendar-input-error",focusOnMount:!1,position:b},f),Object(n.createElement)(a.Dashicon,{icon:"calendar"}),Object(n.createElement)("p",{className:"screen-reader-text",id:"".concat(y,"-message")},f||s))});s.propTypes={disabled:u.a.bool,value:u.a.string,onChange:u.a.func.isRequired,dateFormat:u.a.string.isRequired,label:u.a.string.isRequired,describedBy:u.a.string.isRequired,error:u.a.string,errorPosition:u.a.string,onFocus:u.a.func,onKeyDown:u.a.func},s.defaultProps={disabled:!1,onFocus:function(){},errorPosition:"bottom center",onKeyDown:c.noop},t.a=s},207:function(e,t,r){"use strict";function n(e){return e<10?"has-".concat(e,"-items"):"has-10-items"}r.d(t,"a",(function(){return n}))},210:function(e,t,r){var n=r(140),a=r(149);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},223:function(e,t,r){"use strict";var n=r(48),a=r(55),o=Object(n.a)(a.b.cartAnalytics).getStateProp,i=Object(n.a)(a.b.contactAnalytics).getStateProp,c=Object(n.a)(a.b.emailAnalytics).getStateProp,l=Object(n.a)(a.b.emailTable).getStateProp,u=Object(n.a)(a.b.engagementAnalytics).getStateProp,s=Object(n.a)(a.b.directEmailTable).getStateProp,f={getCartAnalytics:function(){return o("data")},getCartAnalyticsLoading:function(){return o("isLoading")},getContactAnalytics:function(){return i("data")},getContactAnalyticsLoading:function(){return i("isLoading")},getEmailAnalytics:function(){return c("data")},getEmailAnalyticsLoading:function(){return c("isLoading")},getEmailTableList:function(){return l("data")},getEmailTableTotal:function(){return l("total")},getEmailTableOffset:function(){return l("offset")},getEmailTableLimit:function(){return l("limit")},getEmailTableLoading:function(){return l("isLoading")},getEmailTablePage:function(){return parseInt(l("offset"))/parseInt(l("limit"))+1},getEngagementAnalytics:function(){return u("data")},getEngagementAnalyticsLoading:function(){return u("isLoading")},getDirectEmailTableList:function(){return s("data")},getDirectEmailTableTotal:function(){return s("total")},getDirectEmailTableOffset:function(){return s("offset")},getDirectEmailTableLimit:function(){return s("limit")},getDirectEmailTableLoading:function(){return s("isLoading")},getDirectEmailTablePage:function(){return parseInt(s("offset"))/parseInt(s("limit"))+1}};t.a=f},227:function(e,t,r){var n=r(162),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,c=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,c),r=e[c];try{e[c]=void 0;var n=!0}catch(e){}var a=i.call(e);return n&&(t?e[c]=r:delete e[c]),a}},228:function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},249:function(e,t,r){},250:function(e,t,r){"use strict";var n=r(0),a=r(9),o=r(4),i=r(15),c=r.n(i),l=r(171),u=r.n(l),s=r(5),f=r(8),p=r.n(f),m=r(19),b=r(32),d=function(e){var t,r=e.delta,i=e.href,l=e.hrefType,f=e.isOpen,p=e.label,d=e.onToggle,y=e.prevLabel,h=e.prevValue,v=e.reverseTrend,g=e.selected,O=e.value,j=e.onLinkClickCallback,w=e.tileIcon,_=c()("bwf-summary-item-container",{"is-dropdown-button":d,"is-dropdown-expanded":f}),k=c()("bwf-summary-item",{"is-selected":g,"is-good-trend":v?r<0:r>0,"is-bad-trend":v?r>0:r<0}),E=r>0?Object(o.sprintf)(Object(o.__)("Up %d%% from %s","wp-marketing-automations-crm"),r,y):Object(o.sprintf)(Object(o.__)("Down %d%% from %s","wp-marketing-automations-crm"),Math.abs(r),y);r||(E=Object(o.sprintf)(Object(o.__)("No change from %s","wp-marketing-automations-crm"),y));var S={className:k,"aria-current":g?"page":null};if(d||i){var T=!!d;t=T?a.Button:m.a,T?(S.onClick=d,S["aria-expanded"]=f):(S.href=i,S.role="menuitem",S.onClick=j,S.type=l)}else t="div";return Object(n.createElement)("li",{className:_},Object(n.createElement)(t,S,Object(n.createElement)(b.a,{gap:"5",align:"center"},Object(n.createElement)(b.b,null,Object(n.createElement)("div",{className:"bwf-summary-item-label"},Object(n.createElement)(a.__experimentalText,{variant:"body.small"},p)),Object(n.createElement)("div",{className:"bwf-summary-item-data"},Object(n.createElement)("div",{className:"bwf-summary-item-value"},Object(n.createElement)(a.__experimentalText,{variant:"title.small"},Object(s.isNil)(O)?Object(o.__)("-","wp-marketing-automations-crm"):O)),r&&Object(n.createElement)(a.Tooltip,{text:Object(s.isNil)(h)?Object(o.__)("-","wp-marketing-automations-crm"):"".concat(y," ").concat(h),position:"top center"},Object(n.createElement)("div",{className:"bwf-summary-item-delta",role:"presentation","aria-label":E},Object(n.createElement)(a.__experimentalText,{variant:"caption"},Object(s.isNil)(r)?Object(o.__)("-","wp-marketing-automations-crm"):Object(o.sprintf)(Object(o.__)("%d%%","wp-marketing-automations-crm"),r))))),d?Object(n.createElement)(u.a,{className:"bwf-summary-toggle",icon:"chevron-down",size:24}):null),w&&Object(n.createElement)(b.c,null,w))))};d.propTypes={delta:p.a.number,href:p.a.string,hrefType:p.a.oneOf(["wp-admin","wc-admin","external"]).isRequired,isOpen:p.a.bool,label:p.a.string.isRequired,onToggle:p.a.func,prevLabel:p.a.string,prevValue:p.a.oneOfType([p.a.number,p.a.string]),reverseTrend:p.a.bool,selected:p.a.bool,value:p.a.oneOfType([p.a.number,p.a.string]),onLinkClickCallback:p.a.func},d.defaultProps={href:"",hrefType:"wc-admin",isOpen:!1,prevLabel:Object(o.__)("Previous Period:","wp-marketing-automations-crm"),reverseTrend:!1,selected:!1,onLinkClickCallback:s.noop},t.a=d},251:function(e,t,r){},252:function(e,t,r){},253:function(e,t,r){},254:function(e,t,r){"use strict";var n=r(0),a=r(9),o=r(34),i=r(8),c=r.n(i),l=r(15),u=r.n(l);r(317);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p=function(e){var t=e.labels,r=e.isOpen,i=f(e,["labels","isOpen"]),c=u()("bwf-dropdown-button",{"is-open":r,"is-multi-line":t.length>1});return Object(n.createElement)(a.Button,s({className:c,"aria-expanded":r},i),Object(n.createElement)("div",{className:"bwf-dropdown-button-labels"},t.map((function(e,t){return Object(n.createElement)("span",{key:t},Object(o.decodeEntities)(e))}))))};p.propTypes={labels:c.a.array.isRequired,isOpen:c.a.bool},t.a=p},258:function(e,t,r){"use strict";var n=r(0),a=r(4),o=r(15),i=r.n(o),c=r(780),l=r(5),u=r(171),s=r.n(u),f=r(9),p=r(809),m=r(461),b=r(8),d=r.n(b),y=r(97),h=r(17);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var a=k(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(i,e);var t,r,a,o=w(i);function i(){return g(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e=this.props.height;return Object(n.createElement)("div",{"aria-hidden":"true",className:"bwf-chart-placeholder",style:{height:e}},Object(n.createElement)(f.Spinner,null))}}])&&O(t.prototype,r),a&&O(t,a),i}(n.Component);E.propTypes={height:d.a.number},E.defaultProps={height:0};var S=E,T=r(129),P=(r(251),r(794)),R=r(775);r(252);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=M(e);if(t){var a=M(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return F(this,r)}}function F(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(c,e);var t,r,a,o=N(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).chartRef=Object(n.createRef)(),t}return t=c,(r=[{key:"componentDidMount",value:function(){this.drawUpdatedChart()}},{key:"shouldComponentUpdate",value:function(e){return this.props.className!==e.className||!Object(l.isEqual)(this.props.data,e.data)||!Object(l.isEqual)(this.props.orderedKeys,e.orderedKeys)||this.props.drawChart!==e.drawChart||this.props.height!==e.height||this.props.chartType!==e.chartType||this.props.width!==e.width}},{key:"componentDidUpdate",value:function(){this.drawUpdatedChart()}},{key:"componentWillUnmount",value:function(){this.deleteChart()}},{key:"delayedScroll",value:function(){var e=this.props.tooltip;return Object(l.throttle)((function(){e&&e.hide()}),300)}},{key:"deleteChart",value:function(){Object(R.a)(this.chartRef.current).selectAll("svg").remove()}},{key:"drawUpdatedChart",value:function(){(0,this.props.drawChart)(this.getContainer())}},{key:"getContainer",value:function(){var e=this.props,t=e.className,r=e.height,n=e.width;this.deleteChart();var a=Object(R.a)(this.chartRef.current).append("svg").attr("viewBox","0 0 ".concat(n," ").concat(r)).attr("height",r).attr("width",n).attr("preserveAspectRatio","xMidYMid meet");return t&&a.attr("class","".concat(t,"__viewbox")),a.append("g")}},{key:"render",value:function(){var e=this.props.className;return Object(n.createElement)("div",{className:i()("d3-base",e),ref:this.chartRef,onScroll:this.delayedScroll()})}}])&&D(t.prototype,r),a&&D(t,a),c}(n.Component);function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}I.propTypes={className:d.a.string,data:d.a.array,orderedKeys:d.a.array,tooltip:d.a.object,chartType:d.a.string};var V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.b;return"function"==typeof e?e:t(e)},K=function(e){return B(new Set(e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]))).filter((function(e){return"date"!==e}))},Y=r(803),H=r(785),U=r(795),z=r(26),$=r.n(z);function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(Y.a)().domain(e.filter((function(e){return e.visible})).map((function(e){return e.key}))).rangeRound([0,t.bandwidth()]).padding(r?0:.07)},J=function(e,t){return Object(H.a)().domain([$()(e[0],"YYYY-MM-DD HH:mm").toDate(),$()(e[e.length-1],"YYYY-MM-DD HH:mm").toDate()]).rangeRound([0,t])},X=function(e){var t=function(e){var t=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return e.forEach((function(e){for(var n=0,a=Object.entries(e);n<a.length;n++){var o=G(a[n],2),i=o[0],c=o[1];"date"!==i&&Number.isFinite(c.value)&&c.value>t&&(t=c.value),"date"!==i&&Number.isFinite(c.value)&&c.value<r&&(r=c.value)}})),{upper:t,lower:r}}(e),r=t.lower,n=t.upper,a=function(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))return 1;if(0===t&&0===e)return 1/3;var r=4/3*Math.max(-e,t),n=3*Math.pow(10,(Math.log(r)*Math.LOG10E+1|0)-2),a=Math.ceil(r/n)*n/3;return t<1&&e>-1?Math.round(4*a)/4:Math.ceil(a)}(r,n),o={lower:0,upper:0,step:a};return(Number.isFinite(r)||r<0)&&(o.lower=Math.floor(r/a)*a,o.lower===r&&0!==r&&(o.lower-=a)),(Number.isFinite(n)||n>0)&&(o.upper=Math.ceil(n/a)*a,o.upper===n&&0!==n&&(o.upper+=a)),o},Z=r(804),ee=function(e){for(var t=[],r=1;r<=Math.floor(Math.sqrt(e));r++)e%r==0&&(t.push(r),e/r!==r&&t.push(e/r));return t.sort((function(e,t){return e-t})),t},te=function(e,t,r,n){var a,o=function(e,t){if(e<783)return 7;if(e>=783&&e<=1130)return 12;if(e>1130&&e<=1365){if("time-comparison"===t)return 16;if("item-comparison"===t)return 12}else if(e>1365){if("time-comparison"===t)return 31;if("item-comparison"===t)return 16}return 16}(t,r);return(e.length>=63&&"day"===n||e.length>=9&&"week"===n)&&(e=(a=e).filter((function(e,t){return 0===t||$()(e).toDate().getMonth()!==$()(a[t-1]).toDate().getMonth()}))),e.length<=o||"hour"===n&&function(e){var t=$()(e[0]).toDate(),r=$()(e[e.length-1]).toDate();return t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}(e)&&t>783?e:function(e,t){for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r[0]!==e[0]&&r.unshift(e[0]),r}(e,function(e,t){for(var r=[],n=1;r.length<=3;)r=ee(e.length-n),n+=1;return r.find((function(r){return e.length/r<t}))}(e,o))},re=function(e,t,r,n){var a=$()(e).toDate(),o=0!==t?r[t-1]:r[t];return o=o instanceof Date?o:$()(o).toDate(),0===t?n(a):function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new RegExp([" |,"],"g"),n=e.split(r),a=t.split(r),o=new Array,i=e.length>t.length?n:a,c=0;c<i.length;c++)n[c]!==a[c]&&o.push(a[c]);return o}(n(o),n(a)).join(" ")};function ne(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oe=function(e,t,r){for(var n=[],a=0;a<e;a++){var o=(a+1)/e*t,i=r?Math.round(o):o;n[n.length-1]!==i&&n.push(i)}return n},ie=function(e,t,r){return[0].concat(ne(function(e,t){if(e>=0)return[];var r=Math.ceil(-e/t);return oe(r,e,e<-1)}(e,r)),ne(function(e,t){if(e<=0)return[];var r=Math.ceil(e/t);return oe(r,e,e>1)}(t,r)))},ce=function(e,t,r,n,a,o){!function(e,t,r,n){var a=r.yScale.range()[0],o=te(t.uniqueDates,r.xScale.range()[1],t.mode,t.interval);"line"===t.chartType&&(o=o.map((function(e){return $()(e).toDate()}))),e.append("g").attr("class","axis").attr("aria-hidden","true").attr("transform","translate(0, ".concat(a,")")).call(Object(Z.a)(r.xScale).tickValues(o).tickFormat((function(e,r){return"hour"===t.interval?n.xFormat(e instanceof Date?e:$()(e).toDate()):re(e,r,o,n.xFormat)}))),e.append("g").attr("class","axis axis-month").attr("aria-hidden","true").attr("transform","translate(0, ".concat(a+14,")")).call(Object(Z.a)(r.xScale).tickValues(o).tickFormat((function(e,t){return re(e,t,o,n.x2Format)}))),e.append("g").attr("class","pipes").attr("transform","translate(0, ".concat(a,")")).call(Object(Z.a)(r.xScale).tickValues(o).tickSize(5).tickFormat(""))}(e,t,r,n),function(e,t,r,n,a){var o=ie(t.yScale.domain()[0],t.yScale.domain()[1],t.step),i=t.xScale.range()[1],c=a?i+n.left+n.right/2-15:-n.left/2-15,l=t.yMin>=0||t.yMax>0?" with-positive-ticks":"";e.append("g").attr("class","grid"+l).attr("transform","translate(-".concat(n.left,", 0)")).call(Object(Z.b)(t.yScale).tickValues(o).tickSize(-i-n.left-n.right).tickFormat("")),e.append("g").attr("class","axis y-axis").attr("aria-hidden","true").attr("transform","translate("+c+", 12)").attr("text-anchor","start").call(Object(Z.b)(t.yScale).tickValues(0===t.yMax&&0===t.yMin?[o[0]]:o).tickFormat((function(e){return e>-1&&e<1&&r.yBelow1Format?r.yBelow1Format(e):r.yFormat(e)})))}(e,r,n,a,o),e.selectAll(".domain").remove(),e.selectAll(".axis .tick line").remove()},le=r(596),ue=r(788);function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var me=function(e,t,r,n,a,o){var i,c,u=n.yScale.range()[0],s=n.xScale.range()[1],f=(i=n.xScale,c=n.yScale,Object(ue.a)().x((function(e){return i($()(e.date).toDate())})).y((function(e){return c(e.value)}))),p=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,r.visibleKeys),m=e.append("g").attr("class","lines").selectAll(".line-g").data(p.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),b=function(e,t,r,n,a){var o=r.slice().reverse();return t.map((function(r,i){var c=Object(l.first)(e.filter((function(e){return e.date===r}))),u=a($()(r).toDate()),s=a(i>=1?$()(t[i-1]).toDate():$()(t[0]).toDate()),f=i<t.length-1?a($()(t[i+1]).toDate()):a($()(t[t.length-1]).toDate()),p=0===i?f-u:u-s,m=0===i?0:u-p/2;return p=0===i||i===t.length-1?p/2:p,{date:r,start:t.length>1?m:0,width:t.length>1?p:n,values:o.map((function(e){var t=e.key,n=c[t];return n?{key:t,value:n.value,date:r}:null})).filter(Boolean)}}))}(t,r.uniqueDates,r.visibleKeys,s,n.xScale),d=s<=1365||r.uniqueDates.length>50?2:3;d=s<=783?1.25:d;var y=s<=1365?4:6;r.uniqueDates.length>1&&m.append("path").attr("fill","none").attr("stroke-width",d).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",(function(e){return r.getColor(e.key)})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",(function(e){return f(e.values)}));s/r.uniqueDates.length>36&&m.selectAll("circle").data((function(e,t){return e.values.map((function(r){return fe(fe({},r),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",y).attr("fill",(function(e){return r.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",d+1).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("cx",(function(e){return n.xScale($()(e.date).toDate())})).attr("cy",(function(e){return n.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=a.screenReaderFormat(e.date instanceof Date?e.date:$()(e.date).toDate());return"".concat(t," ").concat(o.valueFormat(e.value))})).on("focus",(function(e,r,n){o.show(t.find((function(t){return t.date===e.date})),n[r].parentNode,le.b.target)})).on("blur",(function(){return o.hide()}));var h=e.append("g").attr("class","focusspaces").selectAll(".focus").data(b).enter().append("g").attr("class","focus"),v=h.append("g").attr("class","focus-grid").attr("opacity","0");v.append("line").attr("x1",(function(e){return n.xScale($()(e.date).toDate())})).attr("y1",0).attr("x2",(function(e){return n.xScale($()(e.date).toDate())})).attr("y2",u),v.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",y+2).attr("fill",(function(e){return r.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",d+2).attr("cx",(function(e){return n.xScale($()(e.date).toDate())})).attr("cy",(function(e){return n.yScale(e.value)})),h.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",u).attr("opacity",0).on("mouseover",(function(e,n,a){var i=(0===n||n===b.length-1)&&r.uniqueDates.length>1?0:.5;o.show(t.find((function(t){return t.date===e.date})),le.b.target,a[n].parentNode,i)})).on("mouseout",(function(){return o.hide()}))},be=[[],[.5],[.333,.667],[.2,.5,.8],[.12,.375,.625,.88],[0,.25,.5,.75,1]],de=function(e,t){return function(r){var n=e.length>5?5:e.length,a=Object(l.findIndex)(e,(function(e){return e.key===r})),o=a<=4?be[n][a]:0;return t(o)}};function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var he=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ref=null,this.chart=null,this.position="",this.title="",this.labelFormat="",this.valueFormat="",this.visibleKeys="",this.getColor=null,this.margin=24}var t,r,n;return t=e,(r=[{key:"calculateXPosition",value:function(e,t,r){var n=this.ref.getBoundingClientRect(),a=this.ref.parentNode.querySelector(".d3-base").getBoundingClientRect(),o=Math.max(a.left,t.left);if("below"===this.position)return Math.max(this.margin,Math.min(e.left+.5*e.width-n.width/2-o,a.width-n.width-this.margin));var i=e.left+e.width*r+this.margin-o;return i+n.width+this.margin>a.width?Math.max(this.margin,e.left+e.width*(1-r)-n.width-this.margin-o):i}},{key:"calculateYPosition",value:function(e,t){if("below"===this.position)return t.height;var r=this.ref.getBoundingClientRect(),n=e.top+this.margin-t.top;return n+r.height+this.margin>t.height?Math.max(0,e.top-r.height-this.margin-t.top):n}},{key:"calculatePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e.getBoundingClientRect(),n=this.chart.getBoundingClientRect();return"below"===this.position&&(t=0),{x:this.calculateXPosition(r,n,t),y:this.calculateYPosition(r,n)}}},{key:"hide",value:function(){Object(R.a)(this.chart).selectAll(".barfocus, .focus-grid").attr("opacity","0"),Object(R.a)(this.ref).style("visibility","hidden")}},{key:"getTooltipRowLabel",value:function(e,t){return e[t.key].labelDate?this.labelFormat($()(e[t.key].labelDate).toDate()):t.label||t.key}},{key:"show",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(this.visibleKeys.length){Object(R.a)(r).select(".focus-grid, .barfocus").attr("opacity","1");var o=this.calculatePosition(t,a),i=this.visibleKeys.map((function(t){return'\n\t\t\t\t\t<li class="key-row">\n\t\t\t\t\t\t<div class="key-container">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass="key-color"\n\t\t\t\t\t\t\t\tstyle="background-color: '.concat(n.getColor(t.key),'">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="key-key">').concat(n.getTooltipRowLabel(e,t),'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="key-value">').concat(n.valueFormat(e[t.key].value),"</span>\n\t\t\t\t\t</li>\n\t\t\t\t")})),c=this.title?this.title:this.labelFormat($()(e.date).toDate());Object(R.a)(this.ref).style("left",o.x+"px").style("top",o.y+"px").style("visibility","visible").html("\n\t\t\t\t<div>\n\t\t\t\t\t<h4>".concat(c,"</h4>\n\t\t\t\t\t<ul>\n\t\t\t\t\t").concat(i.join(""),"\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t"))}}}])&&ye(t.prototype,r),n&&ye(t,n),e}();function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ke(e);if(t){var a=ke(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return we(this,r)}}function we(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?_e(e):t}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ee=function(){return"rtl"===document.documentElement.dir},Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(c,e);var t,r,a,o=je(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).drawChart=t.drawChart.bind(_e(t)),t.getParams=t.getParams.bind(_e(t)),t.tooltipRef=Object(n.createRef)(),t}return t=c,(r=[{key:"getFormatParams",value:function(){var e=this.props,t=e.screenReaderFormat,r=e.xFormat,n=e.x2Format,a=e.yFormat,o=e.yBelow1Format;return{screenReaderFormat:V(t,P.a),xFormat:V(r,P.a),x2Format:V(n,P.a),yBelow1Format:V(o),yFormat:V(a)}}},{key:"getScaleParams",value:function(e){var t=this.props,r=t.data,n=t.height,a=t.orderedKeys,o=t.chartType,i=this.getMargin(),c=n-i.top-i.bottom,l=this.getWidth()-i.left-i.right,u=X(r),s=u.upper,f=u.lower,p=u.step,m=function(e,t,r){return Object(U.a)().domain([Math.min(t,0),0===r&&0===t?1:Math.max(r,0)]).rangeRound([e,0])}(c,f,s);if("line"===o)return{step:p,xScale:J(e,l),yMax:s,yMin:f,yScale:m};var b=this.shouldBeCompact(),d=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(Y.a)().domain(e).range([0,t]).paddingInner(r?0:.1)}(e,l,b);return{step:p,xGroupScale:Q(a,d,b),xScale:d,yMax:s,yMin:f,yScale:m}}},{key:"getParams",value:function(e){var t=this.props,r=t.chartType,n=t.colorScheme,a=t.data,o=t.interval,i=t.mode,c=t.orderedKeys||function(e){return K(e).map((function(t){return{key:t,focus:!0,total:e.reduce((function(e,r){return e+r[t].value}),0),visible:!0}})).sort((function(e,t){return t.total-e.total}))}(a),l=c.filter((function(e){return e.visible})),u=c.length>5?l:c;return{getColor:de(u,n),interval:o,mode:i,chartType:r,uniqueDates:e,visibleKeys:l}}},{key:"createTooltip",value:function(e,t,r){var n=this.props,a=n.tooltipLabelFormat,o=n.tooltipPosition,i=n.tooltipTitle,c=n.tooltipValueFormat,l=new he;l.ref=this.tooltipRef.current,l.chart=e,l.position=o,l.title=i,l.labelFormat=V(a,P.a),l.valueFormat=V(c),l.visibleKeys=r,l.getColor=t,this.tooltip=l}},{key:"drawChart",value:function(e){var t=this.props,r=t.data,n=t.dateParser,a=t.chartType,o=this.getMargin(),i=function(e,t){var r=Object(P.b)(t);return B(new Set(e.map((function(e){return e.date})))).sort((function(e,t){return r(e)-r(t)}))}(r,n),c=this.getFormatParams(),l=this.getParams(i),u=this.getScaleParams(i),s=e.attr("id","chart").append("g").attr("transform","translate(".concat(o.left,", ").concat(o.top,")"));this.createTooltip(s.node(),l.getColor,l.visibleKeys),ce(s,l,u,c,o,Ee()),"line"===a&&me(s,r,l,u,c,this.tooltip),"bar"===a&&function(e,t,r,n,a,o){var i=n.yScale.range()[0],c=e.append("g").attr("class","bars").selectAll("g").data(t).enter().append("g").attr("transform",(function(e){return"translate(".concat(n.xScale(e.date),", 0)")})).attr("class","bargroup").attr("role","region").attr("aria-label",(function(e){return"item-comparison"===r.mode?a.screenReaderFormat(e.date instanceof Date?e.date:$()(e.date).toDate()):null}));c.append("rect").attr("class","barfocus").attr("x",0).attr("y",0).attr("width",n.xGroupScale.range()[1]).attr("height",i).attr("opacity","0").on("mouseover",(function(e,r,n){o.show(t.find((function(t){return t.date===e.date})),le.b.target,n[r].parentNode)})).on("mouseout",(function(){return o.hide()}));var l=n.yScale(0);c.selectAll(".bar").data((function(e){return r.visibleKeys.map((function(t){return{key:t.key,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,label:t.label,visible:t.visible,date:e.date}}))})).enter().append("rect").attr("class","bar").attr("x",(function(e){return n.xGroupScale(e.key)})).attr("y",(function(e){return Math.min(l,n.yScale(e.value))})).attr("width",n.xGroupScale.bandwidth()).attr("height",(function(e){return Math.abs(l-n.yScale(e.value))})).attr("fill",(function(e){return r.getColor(e.key)})).attr("pointer-events","none").attr("tabindex","0").attr("aria-label",(function(e){var n=e.label||e.key;if("time-comparison"===r.mode){var i=t.find((function(t){return t.date===e.date}));n=a.screenReaderFormat($()(i[e.key].labelDate).toDate())}return"".concat(n," ").concat(o.valueFormat(e.value))})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).on("focus",(function(e,r,n){var a=e.value>0?le.b.target:le.b.target.parentNode;o.show(t.find((function(t){return t.date===e.date})),a,n[r].parentNode)})).on("blur",(function(){return o.hide()}))}(s,r,l,u,c,this.tooltip)}},{key:"shouldBeCompact",value:function(){var e=this.props,t=e.data,r=e.chartType,n=e.width;if("bar"!==r)return!1;var a=this.getMargin(),o=n-a.left-a.right,i=t&&t.length?Object.keys(t[0]).length-1:0;return o<t.length*(i+1)}},{key:"getMargin",value:function(){var e=this.props.margin;return Ee()?{bottom:e.bottom,left:e.right,right:e.left,top:e.top}:e}},{key:"getWidth",value:function(){var e=this.props,t=e.data,r=e.chartType,n=e.width;if("bar"!==r)return n;var a=this.getMargin(),o=t&&t.length?Object.keys(t[0]).length-1:0,i=this.shouldBeCompact()?t.length*o:t.length*(o+1);return Math.max(n,i+a.left+a.right)}},{key:"getEmptyMessage",value:function(){var e=this.props,t=e.baseValue,r=e.data,a=e.emptyMessage;if(a&&function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<e.length;r++)for(var n=0,a=Object.entries(e[r]);n<a.length;n++){var o=L(a[n],2),i=o[0],c=o[1];if("date"!==i&&!Object(l.isNil)(c.value)&&c.value!==t)return!1}return!0}(r,t))return Object(n.createElement)("div",{className:"d3-chart__empty-message"},a)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.data,a=e.height,o=e.orderedKeys,c=e.chartType,l=this.getWidth();return Object(n.createElement)("div",{className:i()("d3-chart__container",t),style:{height:a}},this.getEmptyMessage(),Object(n.createElement)("div",{className:"d3-chart__tooltip",ref:this.tooltipRef}),Object(n.createElement)(I,{className:i()(t),data:r,drawChart:this.drawChart,height:a,orderedKeys:o,tooltip:this.tooltip,chartType:c,width:l}))}}])&&ge(t.prototype,r),a&&ge(t,a),c}(n.Component);Se.propTypes={baseValue:d.a.number,className:d.a.string,colorScheme:d.a.func,data:d.a.array.isRequired,dateParser:d.a.string.isRequired,emptyMessage:d.a.string,height:d.a.number,interval:d.a.oneOf(["hour","day","week","month","quarter","year"]),margin:d.a.shape({bottom:d.a.number,left:d.a.number,right:d.a.number,top:d.a.number}),mode:d.a.oneOf(["item-comparison","time-comparison"]),screenReaderFormat:d.a.oneOfType([d.a.string,d.a.func]),orderedKeys:d.a.array,tooltipLabelFormat:d.a.oneOfType([d.a.string,d.a.func]),tooltipValueFormat:d.a.oneOfType([d.a.string,d.a.func]),tooltipPosition:d.a.oneOf(["below","over"]),tooltipTitle:d.a.string,chartType:d.a.oneOf(["bar","line"]),width:d.a.number,xFormat:d.a.oneOfType([d.a.string,d.a.func]),x2Format:d.a.oneOfType([d.a.string,d.a.func]),yBelow1Format:d.a.oneOfType([d.a.string,d.a.func]),yFormat:d.a.oneOfType([d.a.string,d.a.func])},Se.defaultProps={baseValue:0,data:[],dateParser:"%Y-%m-%dT%H:%M:%S",height:200,margin:{bottom:30,left:40,right:0,top:20},mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",tooltipPosition:"over",tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",chartType:"line",width:600,xFormat:"%Y-%m-%d",x2Format:"",yBelow1Format:".3~f",yFormat:".3~s"};var Te=Se,Pe=r(96);function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Fe(e);if(t){var a=Fe(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Ne(this,r)}}function Ne(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(l,e);var t,r,o,c=xe(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=c.call(this)).listRef=Object(n.createRef)(),e.state={isScrollable:!1},e}return t=l,(r=[{key:"componentDidMount",value:function(){this.updateListScroll(),window.addEventListener("resize",this.updateListScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateListScroll)}},{key:"updateListScroll",value:function(){if(this&&this.listRef){var e=this.listRef.current,t=e.scrollHeight-e.scrollTop<=e.offsetHeight;this.setState({isScrollable:!t})}}},{key:"render",value:function(){var e=this.props,t=e.colorScheme,r=e.data,o=e.handleLegendHover,c=e.handleLegendToggle,l=e.interactive,u=e.legendDirection,s=e.legendValueFormat,f=e.instanceId,p=e.totalLabel,m=this.state.isScrollable,b=r.filter((function(e){return e.visible})),d=b.length,y="column"===u&&r.length>5&&p,h=r.length>5?b:r;return Object(n.createElement)("div",{className:i()("bwf-legend","bwf-legend-direction-".concat(u),{"has-total":y,"is-scrollable":m},this.props.className)},Object(n.createElement)("ul",{className:"bwf-legend-list",ref:this.listRef,onScroll:y?this.updateListScroll:null},r.map((function(e){return Object(n.createElement)("li",{className:i()("bwf-legend-item",{"bwf-legend-item-checked":e.visible}),key:e.key,id:"bwf-legend-".concat(f,"__item__").concat(e.key),onMouseEnter:o,onMouseLeave:o,onBlur:o,onFocus:o},Object(n.createElement)("button",{onClick:c,id:"bwf-legend-".concat(f,"__item-button__").concat(e.key),disabled:e.visible&&d<=1||!e.visible&&d>=5||!l,title:d>=5?Object(a.sprintf)(Object(a.__)("You may select up to %d items.","wp-marketing-automations-crm"),5):""},Object(n.createElement)("div",{className:"bwf-legend-item-container"},Object(n.createElement)("span",{className:i()("bwf-legend-item-checkmark",{"bwf-legend-item-checkmark-checked":e.visible}),style:e.visible?{color:de(h,t)(e.key)}:null}),Object(n.createElement)("span",{className:"bwf-legend-item-title"},e.label),Object(n.createElement)("span",{className:"bwf-legend-item-total"},V(s)(e.total)))))}))),y&&Object(n.createElement)("div",{className:"bwf-legend-total"},p))}}])&&Ce(t.prototype,r),o&&Ce(t,o),l}(n.Component);Me.propTypes={className:d.a.string,colorScheme:d.a.func,data:d.a.array.isRequired,handleLegendToggle:d.a.func,handleLegendHover:d.a.func,interactive:d.a.bool,legendDirection:d.a.oneOf(["row","column"]),legendValueFormat:d.a.oneOfType([d.a.string,d.a.func]),totalLabel:d.a.string,instanceId:d.a.number},Me.defaultProps={interactive:!0,legendDirection:"row",legendValueFormat:","};var Ie=Object(Pe.withInstanceId)(Me);r(253);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ue(e);if(t){var a=Ue(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Ye(this,r)}}function Ye(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?He(e):t}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){switch(t){case"left_space":return[e+" ",""];case"right":return["",e];case"right_space":return[""," "+e];case"left":default:return[e,""]}}var $e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(b,e);var t,r,o,u=Ke(b);function b(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=u.call(this,e)).chartBodyRef=Object(n.createRef)();var r=t.getDataKeys();return t.state={focusedKeys:[],visibleKeys:r.slice(0,5),width:0},t.prevDataKeys=r.sort(),t.handleTypeToggle=t.handleTypeToggle.bind(He(t)),t.handleLegendToggle=t.handleLegendToggle.bind(He(t)),t.handleLegendHover=t.handleLegendHover.bind(He(t)),t.updateDimensions=t.updateDimensions.bind(He(t)),t.getVisibleData=Object(m.a)(t.getVisibleData),t.getOrderedKeys=Object(m.a)(t.getOrderedKeys),t.setInterval=t.setInterval.bind(He(t)),t}return t=b,(r=[{key:"getDataKeys",value:function(){var e=this.props,t=e.data,r=e.filterParam,n=e.mode,a=e.query;if("item-comparison"===n){var o=r?Object(h.e)(a[r]):[];return this.getOrderedKeys([],[],o).map((function(e){return e.key}))}return K(t)}},{key:"componentDidUpdate",value:function(){var e=this.props.data;if(e&&e.length){var t=K(e).sort();if(!Object(l.isEqual)(t,this.prevDataKeys)){var r=this.getDataKeys();this.prevDataKeys=t,this.setState({visibleKeys:r.slice(0,5)})}}}},{key:"componentDidMount",value:function(){this.updateDimensions(),this.setD3DefaultFormat(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"setD3DefaultFormat",value:function(){var e=this.props.currency,t=e.symbol,r=e.symbolPosition,n=e.decimalSeparator,a=e.thousandSeparator;Object(c.a)({decimal:n,thousands:a,grouping:[3],currency:ze(t,r)})}},{key:"getOrderedKeys",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=this.props,a=n.data,o=n.legendTotals,i=n.mode;if(!a||0===a.length)return[];var c=a.reduce((function(e,t){return Object.entries(t).forEach((function(t){var r=Be(t,2),n=r[0],a=r[1];"date"===n||e[n]||(e[n]=a.label)})),e}),{}),l=Object.entries(c).map((function(r){var n=Be(r,2),i=n[0],c=n[1];return{focus:0===e.length||e.includes(i),key:i,label:c,total:o&&void 0!==o[i]?o[i]:a.reduce((function(e,t){return e+t[i].value}),0),visible:t.includes(i)}}));return"item-comparison"===i?l.sort((function(e,t){return t.total-e.total})).filter((function(e){return e.total>0||r.includes(parseInt(e.key,10))})):l}},{key:"handleTypeToggle",value:function(e){if(this.props.chartType!==e){var t=this.props,r=t.path,n=t.query;Object(h.j)({chartType:e},r,n)}}},{key:"handleLegendToggle",value:function(e){if(this.props.interactiveLegend){var t=e.currentTarget.id.split("_").pop(),r=this.state,n=r.focusedKeys,a=r.visibleKeys;a.includes(t)?this.setState({focusedKeys:Object(l.without)(n,t),visibleKeys:Object(l.without)(a,t)}):this.setState({focusedKeys:n.concat([t]),visibleKeys:a.concat([t])})}}},{key:"handleLegendHover",value:function(e){if("mouseleave"===e.type||"blur"===e.type)this.setState({focusedKeys:[]});else if("mouseenter"===e.type||"focus"===e.type){var t=e.currentTarget.id.split("__").pop();this.setState({focusedKeys:[t]})}}},{key:"updateDimensions",value:function(){this.setState({width:this.chartBodyRef.current.offsetWidth})}},{key:"getVisibleData",value:function(e,t){var r=t.filter((function(e){return e.visible}));return e.map((function(e){var t={date:e.date};return r.forEach((function(r){t[r.key]=e[r.key]})),t}))}},{key:"setInterval",value:function(e){var t=this.props,r=t.path,n=t.query;Object(h.j)({interval:e},r,n)}},{key:"renderIntervalSelector",value:function(){var e=this.props,t=e.interval,r=e.allowedIntervals;if(!r||r.length<1)return null;var o={hour:Object(a.__)("By hour","wp-marketing-automations-crm"),day:Object(a.__)("By day","wp-marketing-automations-crm"),week:Object(a.__)("By week","wp-marketing-automations-crm"),month:Object(a.__)("By month","wp-marketing-automations-crm"),quarter:Object(a.__)("By quarter","wp-marketing-automations-crm"),year:Object(a.__)("By year","wp-marketing-automations-crm")};return Object(n.createElement)(f.SelectControl,{value:t,options:r.map((function(e){return{value:e,label:o[e]}})),onChange:this.setInterval})}},{key:"getChartHeight",value:function(){var e=this.props,t=e.isViewportLarge;return e.isViewportMobile?180:t?300:220}},{key:"getLegendPosition",value:function(){var e=this.props,t=e.legendPosition,r=e.mode,n=e.isViewportWide;return t||(n&&"time-comparison"===r?"top":n&&"item-comparison"===r?"side":"bottom")}},{key:"render",value:function(){var e=this.state,t=e.focusedKeys,r=e.visibleKeys,o=e.width,c=this.props,u=c.baseValue,m=c.chartType,b=c.data,d=c.dateParser,y=c.emptyMessage,v=c.filterParam,g=c.interactiveLegend,O=c.interval,j=c.isRequesting,w=c.isViewportLarge,_=c.itemsLabel,k=c.mode,E=c.query,P=c.screenReaderFormat,R=c.showHeaderControls,C=c.title,D=c.tooltipLabelFormat,x=c.tooltipValueFormat,N=c.tooltipTitle,F=c.valueType,M=c.xFormat,I=c.x2Format,L=c.yBelow1Format,B=c.yFormat,A=c.hideTypeSelect,q=v?Object(h.e)(E[v]):[],V=this.getOrderedKeys(t,r,q),K=j?null:this.getVisibleData(b,V),Y=this.getLegendPosition(),H="top"===Y?"row":"column",U="side"===Y?"row":"column",z=this.getChartHeight(),$=j?null:Object(n.createElement)(Ie,{colorScheme:p.a,data:V,handleLegendHover:this.handleLegendHover,handleLegendToggle:this.handleLegendToggle,interactive:g,legendDirection:H,legendValueFormat:x,totalLabel:Object(a.sprintf)(_,V.length)}),G=B,W=L;if(!B)switch(F){case"average":G=",.0f";break;case"currency":G="$.3~s",W="$.3~f";break;case"number":G=",.0f"}return Object(n.createElement)("div",{className:"bwf-chart"},R&&Object(n.createElement)("div",{className:"bwf-chart-header"},Object(n.createElement)(T.a,{className:"bwf-chart-title"},C),"top"===Y&&$,this.renderIntervalSelector(),!A&&Object(n.createElement)(f.NavigableMenu,{className:"bwf-chart-types",orientation:"horizontal",role:"menubar"},Object(n.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"line"===m}),title:Object(a.__)("Line chart","wp-marketing-automations-crm"),"aria-checked":"line"===m,role:"menuitemradio",tabIndex:"line"===m?0:-1,onClick:Object(l.partial)(this.handleTypeToggle,"line")},Object(n.createElement)(s.a,{icon:"line-graph"})),Object(n.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"bar"===m}),title:Object(a.__)("Bar chart","wp-marketing-automations-crm"),"aria-checked":"bar"===m,role:"menuitemradio",tabIndex:"bar"===m?0:-1,onClick:Object(l.partial)(this.handleTypeToggle,"bar")},Object(n.createElement)(s.a,{icon:"stats-alt"})))),Object(n.createElement)(T.b,{component:!1},Object(n.createElement)("div",{className:i()("bwf-chart-body","bwf-chart-body-".concat(U)),ref:this.chartBodyRef},"side"===Y&&$,j&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{className:"screen-reader-text"},Object(a.__)("Your requested data is loading","wp-marketing-automations-crm")),Object(n.createElement)(S,{height:z})),!j&&o>0&&Object(n.createElement)(Te,{baseValue:u,chartType:m,colorScheme:p.a,data:K,dateParser:d,height:z,emptyMessage:y,interval:O,margin:{bottom:50,left:80,right:30,top:0},mode:k,orderedKeys:V,screenReaderFormat:P,tooltipLabelFormat:D,tooltipValueFormat:x,tooltipPosition:w?"over":"below",tooltipTitle:N,valueType:F,width:"row"===U?o-320:o,xFormat:M,x2Format:I,yBelow1Format:W,yFormat:G})),"bottom"===Y&&Object(n.createElement)("div",{className:"bwf-chart-footer"},$)))}}])&&qe(t.prototype,r),o&&qe(t,o),b}(n.Component);$e.propTypes={allowedIntervals:d.a.array,baseValue:d.a.number,chartType:d.a.oneOf(["bar","line"]),data:d.a.array.isRequired,dateParser:d.a.string.isRequired,emptyMessage:d.a.string,filterParam:d.a.string,itemsLabel:d.a.string,mode:d.a.oneOf(["item-comparison","time-comparison"]),path:d.a.string,query:d.a.object,interactiveLegend:d.a.bool,interval:d.a.oneOf(["hour","day","week","month","quarter","year"]),intervalData:d.a.object,isRequesting:d.a.bool,legendPosition:d.a.oneOf(["bottom","side","top"]),legendTotals:d.a.object,screenReaderFormat:d.a.oneOfType([d.a.string,d.a.func]),showHeaderControls:d.a.bool,title:d.a.string,tooltipLabelFormat:d.a.oneOfType([d.a.string,d.a.func]),tooltipValueFormat:d.a.oneOfType([d.a.string,d.a.func]),tooltipTitle:d.a.string,valueType:d.a.string,xFormat:d.a.string,x2Format:d.a.string,yBelow1Format:d.a.string,yFormat:d.a.string,currency:d.a.object},$e.defaultProps={baseValue:0,chartType:"line",data:[],dateParser:"%Y-%m-%dT%H:%M:%S",interactiveLegend:!0,interval:"day",isRequesting:!1,mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",showHeaderControls:!0,tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",xFormat:"%d",x2Format:"%b %Y",currency:{symbol:"$",symbolPosition:"left",decimalSeparator:".",thousandSeparator:","}};t.a=Object(y.withViewportMatch)({isViewportMobile:"< medium",isViewportLarge:">= large",isViewportWide:">= wide"})($e)},259:function(e,t,r){"use strict";var n=r(0),a=r(4),o=r(9),i=r(8),c=r.n(i),l=r(97),u=r(15),s=r.n(u),f=r(5),p=r(207);var m=function(e){var t,r,i,c=e.label,l=e.orientation,u=e.itemCount,m=e.items,b=Object(f.uniqueId)("bwf-summary-helptext-"),d=Object(p.a)(u),y=s()("bwf-summary",(i="horizontal"===l,(r=d)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t));return Object(n.createElement)(o.NavigableMenu,{"aria-label":c,"aria-describedby":b,orientation:l,stopNavigationEvents:!0},Object(n.createElement)("p",{id:b,className:"screen-reader-text"},Object(a.__)("List of data points available for filtering. Use arrow keys to cycle through the list. Click a data point for a detailed report.","wp-marketing-automations-crm")),Object(n.createElement)("ul",{className:y},m))};m.propTypes={label:c.a.string,orientation:c.a.oneOf(["vertical","horizontal"]).isRequired,items:c.a.node.isRequired,itemCount:c.a.number.isRequired};var b=m,d=(r(249),function(e){var t=e.children,r=e.isDropdownBreakpoint,a=e.label,i=t({}),c=n.Children.count(i)||1,l=r?"vertical":"horizontal",u=Object(n.createElement)(b,{label:a,orientation:l,itemCount:c,items:i});if(!r||c<2)return u;var s=i.find((function(e){return!!e.props.selected}));return s?Object(n.createElement)(o.Dropdown,{className:"bwf-summary",position:"bottom",headerTitle:a,renderToggle:function(e){var t=e.isOpen,r=e.onToggle;return Object(n.cloneElement)(s,{onToggle:r,isOpen:t})},renderContent:function(e){return Object(n.createElement)(b,{label:a,orientation:l,itemCount:c,items:t(e)})}}):u});d.propTypes={children:c.a.func.isRequired,label:c.a.string},d.defaultProps={label:Object(a.__)("Performance Indicators","wp-marketing-automations-crm")};t.a=Object(l.withViewportMatch)({isDropdownBreakpoint:"< large"})(d)},314:function(e,t,r){},317:function(e,t,r){},318:function(e,t,r){},319:function(e,t,r){},326:function(e,t,r){"use strict";var n=r(0),a=r(4),o=r(9),i=r(8),c=r.n(i),l=(r(335),r(15)),u=r.n(l),s=r(26),f=r.n(s),p=r(128),m=r(5);r(314);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var a=j(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(i,e);var t,r,a,o=g(i);function i(){return y(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e=this.props,t=e.className,r=e.options,a=e.selected,o=e.onSelect,i=e.name,c=e.legend;return Object(n.createElement)("fieldset",{className:"bwf-segment-selection"},Object(n.createElement)("legend",{className:"screen-reader-text"},c),Object(n.createElement)("div",{className:u()(t,"bwf-segment-selection-container")},r.map((function(e){var t=e.value,r=e.label;if(!t||!r)return null;var c=Object(m.uniqueId)("".concat(t,"_"));return Object(n.createElement)("div",{className:"bwf-segment-selection-item",key:t},Object(n.createElement)("input",{className:"bwf-segment-selection-input",type:"radio",name:i,id:c,checked:a===t,onChange:Object(m.partial)(o,d({},i,t))}),Object(n.createElement)("label",{htmlFor:c},Object(n.createElement)("span",{className:"bwf-segment-selection-label"},r)))}))))}}])&&h(t.prototype,r),a&&h(t,a),i}(n.Component);w.propTypes={className:c.a.string,options:c.a.arrayOf(c.a.shape({value:c.a.string.isRequired,label:c.a.string.isRequired})).isRequired,selected:c.a.string,onSelect:c.a.func.isRequired,name:c.a.string.isRequired,legend:c.a.string.isRequired};var _=w;function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var a=C(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(c,e);var t,r,o,i=P(c);function c(){return E(this,c),i.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){var e=this.props,t=e.onSelect,r=e.compare;return Object(n.createElement)(_,{options:p.h,selected:r,onSelect:t,name:"compare",legend:Object(a.__)("compare to","wp-marketing-automations-crm")})}}])&&S(t.prototype,r),o&&S(t,o),c}(n.Component);D.propTypes={onSelect:c.a.func.isRequired,compare:c.a.string};var x=D,N=(r(315),r(316),r(336)),F=r(97),M=(r(158),r(199)),I={calendarLabel:Object(a.__)("Calendar","wp-marketing-automations-crm"),closeDatePicker:Object(a.__)("Close","wp-marketing-automations-crm"),focusStartDate:Object(a.__)("Interact with the calendar and select start and end dates.","wp-marketing-automations-crm"),clearDate:Object(a.__)("Clear Date","wp-marketing-automations-crm"),clearDates:Object(a.__)("Clear Dates","wp-marketing-automations-crm"),jumpToPrevMonth:Object(a.__)("Move backward to switch to the previous month.","wp-marketing-automations-crm"),jumpToNextMonth:Object(a.__)("Move forward to switch to the next month.","wp-marketing-automations-crm"),enterKey:Object(a.__)("Enter key","wp-marketing-automations-crm"),leftArrowRightArrow:Object(a.__)("Right and left arrow keys","wp-marketing-automations-crm"),upArrowDownArrow:Object(a.__)("up and down arrow keys","wp-marketing-automations-crm"),pageUpPageDown:Object(a.__)("page up and page down keys","wp-marketing-automations-crm"),homeEnd:Object(a.__)("Home and end keys","wp-marketing-automations-crm"),escape:Object(a.__)("Escape key","wp-marketing-automations-crm"),questionMark:Object(a.__)("Question mark","wp-marketing-automations-crm"),selectFocusedDate:Object(a.__)("Select the date in focus.","wp-marketing-automations-crm"),moveFocusByOneDay:Object(a.__)("Move backward (left) and forward (right) by one day.","wp-marketing-automations-crm"),moveFocusByOneWeek:Object(a.__)("Move backward (up) and forward (down) by one week.","wp-marketing-automations-crm"),moveFocusByOneMonth:Object(a.__)("Switch months.","wp-marketing-automations-crm"),moveFocustoStartAndEndOfWeek:Object(a.__)("Go to the first or last day of a week.","wp-marketing-automations-crm"),returnFocusToInput:Object(a.__)("Return to the date input field.","wp-marketing-automations-crm"),keyboardNavigationInstructions:Object(a.__)("Press the down arrow key to interact with the calendar and select a date.","wp-marketing-automations-crm"),chooseAvailableStartDate:function(e){var t=e.date;return Object(a.sprintf)(Object(a.__)("Select %s as a start date.","wp-marketing-automations-crm"),t)},chooseAvailableEndDate:function(e){var t=e.date;return Object(a.sprintf)(Object(a.__)("Select %s as an end date.","wp-marketing-automations-crm"),t)},chooseAvailableDate:function(e){return e.date},dateIsUnavailable:function(e){var t=e.date;return Object(a.sprintf)(Object(a.__)("%s is not selectable.","wp-marketing-automations-crm"),t)},dateIsSelected:function(e){var t=e.date;return Object(a.sprintf)(Object(a.__)("Selected. %s","wp-marketing-automations-crm"),t)}};function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=H(e);if(t){var a=H(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return K(this,r)}}function K(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(c,e);var t,r,o,i=V(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).onDatesChange=t.onDatesChange.bind(Y(t)),t.onFocusChange=t.onFocusChange.bind(Y(t)),t.onInputChange=t.onInputChange.bind(Y(t)),t.nodeRef=Object(n.createRef)(),t.keepFocusInside=t.keepFocusInside.bind(Y(t)),t}return t=c,(r=[{key:"keepFocusInside",value:function(e,t){if(this.nodeRef.current){var r=this.props.losesFocusTo;if("container"!==e||!t.target||!t.target.classList.contains("DayPickerNavigation_button")&&!t.target.classList.contains("CalendarDay")||t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay"))){if("onPrevMonthClick"===e||"onNextMonthClick"===e){var n=this.nodeRef.current.querySelector(".DayPickerNavigation_button");n&&n.focus()}}else{if(t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay")))return;if(t.relatedTarget&&r&&r.contains(t.relatedTarget))return;var a=this.nodeRef.current.querySelector(".DayPicker_focusRegion");a&&a.focus()}}}},{key:"onDatesChange",value:function(e){var t=e.startDate,r=e.endDate,n=this.props,a=n.onUpdate,o=n.shortDateFormat;a({after:t,before:r,afterText:t?t.format(o):"",beforeText:r?r.format(o):"",afterError:null,beforeError:null})}},{key:"onFocusChange",value:function(e){this.props.onUpdate({focusedInput:e||"startDate"})}},{key:"onInputChange",value:function(e,t){var r,n=t.target.value,a=this.props,o=a.after,i=a.before,c=a.shortDateFormat,l=Object(p.k)(e,n,i,o,c),u=l.date,s=l.error;this.props.onUpdate((B(r={},e,u),B(r,e+"Text",n),B(r,e+"Error",n.length>0?s:null),r))}},{key:"setTnitialVisibleMonth",value:function(e,t){return function(){var r=t||f()();return e?r.clone().subtract(1,"month"):r}}},{key:"render",value:function(){var e=this,t=this.props,r=t.after,o=t.before,i=t.focusedInput,c=t.afterText,l=t.beforeText,s=t.afterError,f=t.beforeError,p=t.shortDateFormat,b=t.isViewportMobile,d=t.isViewportSmall,y=t.isInvalidDate,h=b&&!d;return Object(n.createElement)("div",{className:u()("bwf-calendar",{"is-mobile":b})},Object(n.createElement)("div",{className:"bwf-calendar-inputs"},Object(n.createElement)(M.a,{value:c,onChange:Object(m.partial)(this.onInputChange,"after"),dateFormat:p,label:Object(a.__)("Start Date","wp-marketing-automations-crm"),error:s,describedBy:Object(a.sprintf)(Object(a.__)("Date input describing a selected date range's start date in format %s","wp-marketing-automations-crm"),p),onFocus:function(){return e.onFocusChange("startDate")}}),Object(n.createElement)("div",{className:"bwf-calendar-inputs-to"},Object(a.__)("to","wp-marketing-automations-crm")),Object(n.createElement)(M.a,{value:l,onChange:Object(m.partial)(this.onInputChange,"before"),dateFormat:p,label:Object(a.__)("End Date","wp-marketing-automations-crm"),error:f,describedBy:Object(a.sprintf)(Object(a.__)("Date input describing a selected date range's end date in format %s","wp-marketing-automations-crm"),p),onFocus:function(){return e.onFocusChange("endDate")}})),Object(n.createElement)("div",{className:"bwf-calendar-react-dates",ref:this.nodeRef,onBlur:Object(m.partial)(this.keepFocusInside,"container"),tabIndex:-1},Object(n.createElement)(N.DayPickerRangeController,{onNextMonthClick:Object(m.partial)(this.keepFocusInside,"onNextMonthClick"),onPrevMonthClick:Object(m.partial)(this.keepFocusInside,"onPrevMonthClick"),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:i,startDate:r,endDate:o,orientation:"horizontal",numberOfMonths:h?2:1,isOutsideRange:function(e){return y&&y(e.toDate())},minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:"rtl"===document.documentElement.dir,initialVisibleMonth:this.setTnitialVisibleMonth(h,o),phrases:I})))}}])&&A(t.prototype,r),o&&A(t,o),c}(n.Component);U.propTypes={after:c.a.object,afterError:c.a.string,afterText:c.a.string,before:c.a.object,beforeError:c.a.string,beforeText:c.a.string,focusedInput:c.a.string,isInvalidDate:c.a.func,onUpdate:c.a.func.isRequired,shortDateFormat:c.a.string.isRequired,losesFocusTo:c.a.instanceOf(Element)};var z=Object(F.withViewportMatch)({isViewportMobile:"< medium",isViewportSmall:"< small"})(U),$=r(129);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ee(e);if(t){var a=ee(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Z(this,r)}}function Z(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(c,e);var t,r,o,i=X(c);function c(){return W(this,c),i.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){var e=this.props,t=e.onSelect,r=e.period;return Object(n.createElement)(_,{options:Object(m.filter)(p.i,(function(e){return"custom"!==e.value})),selected:r,onSelect:t,name:"period",legend:Object(a.__)("select a preset period","wp-marketing-automations-crm")})}}])&&Q(t.prototype,r),o&&Q(t,o),c}(n.Component);te.propTypes={onSelect:c.a.func.isRequired,period:c.a.string};var re=te;function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ue(e);if(t){var a=ue(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ce(this,r)}}function ce(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?le(e):t}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(l,e);var t,r,i,c=ie(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=c.call(this)).onTabSelect=e.onTabSelect.bind(le(e)),e.controlsRef=Object(n.createRef)(),e}return t=l,(r=[{key:"onTabSelect",value:function(e){var t=this.props,r=t.onUpdate,n=t.period;"period"===e&&"custom"===n&&r({period:"today"})}},{key:"isFutureDate",value:function(e){return f()().isBefore(f()(e),"day")}},{key:"render",value:function(){var e=this,t=this.props,r=t.period,i=t.compare,c=t.hideCompare,l=t.after,s=t.before,f=t.onUpdate,p=t.onClose,m=t.onSelect,b=t.isValidSelection,d=t.resetCustomValues,y=t.focusedInput,h=t.afterText,v=t.beforeText,g=t.afterError,O=t.beforeError,j=t.shortDateFormat;return Object(n.createElement)("div",null,Object(n.createElement)($.a,{className:"screen-reader-text",tabIndex:"0"},Object(a.__)("Select date range and comparison","wp-marketing-automations-crm")),Object(n.createElement)($.b,{component:!1},Object(n.createElement)($.a,{className:"bwf-filters-date-text"},Object(a.__)("select a date range","wp-marketing-automations-crm")),Object(n.createElement)(o.TabPanel,{tabs:[{name:"period",title:Object(a.__)("Presets","wp-marketing-automations-crm"),className:"bwf-filters-date-tab"},{name:"custom",title:Object(a.__)("Custom","wp-marketing-automations-crm"),className:"bwf-filters-date-tab"}],className:"bwf-filters-date-tabs",activeClass:"is-active",initialTabName:"custom"===r?"custom":"period",onSelect:this.onTabSelect},(function(t){return Object(n.createElement)(n.Fragment,null,"period"===t.name&&Object(n.createElement)(re,{onSelect:f,period:r}),"custom"===t.name&&Object(n.createElement)(z,{after:l,before:s,onUpdate:f,isInvalidDate:e.isFutureDate,focusedInput:y,afterText:h,beforeText:v,afterError:g,beforeError:O,shortDateFormat:j,losesFocusTo:e.controlsRef.current}),Object(n.createElement)("div",{className:u()("bwf-filters-date-content-controls",{"is-custom":"custom"===t.name}),ref:e.controlsRef},!c&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)($.a,{className:"bwf-filters-date-text"},Object(a.__)("compare to","wp-marketing-automations-crm")),Object(n.createElement)(x,{onSelect:f,compare:i})),Object(n.createElement)("div",{className:"bwf-filters-date-button-group"},"custom"===t.name&&Object(n.createElement)(o.Button,{className:"bwf-filters-date-button",isSecondary:!0,onClick:d,disabled:!(l||s)},Object(a.__)("Reset","wp-marketing-automations-crm")),b(t.name)?Object(n.createElement)(o.Button,{className:"bwf-filters-date-button",onClick:m(t.name,p),isPrimary:!0},Object(a.__)("Update","wp-marketing-automations-crm")):Object(n.createElement)(o.Button,{className:"bwf-filters-date-button",isPrimary:!0,disabled:!0},Object(a.__)("Update","wp-marketing-automations-crm")))))}))))}}])&&ae(t.prototype,r),i&&ae(t,i),l}(n.Component);se.propTypes={period:c.a.string.isRequired,compare:c.a.string.isRequired,onUpdate:c.a.func.isRequired,onClose:c.a.func.isRequired,onSelect:c.a.func.isRequired,resetCustomValues:c.a.func.isRequired,focusedInput:c.a.string,afterText:c.a.string,beforeText:c.a.string,afterError:c.a.string,beforeError:c.a.string,shortDateFormat:c.a.string.isRequired};var fe=se,pe=r(254);r(318);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ge(e);if(t){var a=ge(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return he(this,r)}}function he(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?ve(e):t}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oe=Object(a.__)("MM/DD/YYYY","wp-marketing-automations-crm"),je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(l,e);var t,r,i,c=ye(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state=t.getResetState(),t.update=t.update.bind(ve(t)),t.onSelect=t.onSelect.bind(ve(t)),t.isValidSelection=t.isValidSelection.bind(ve(t)),t.resetCustomValues=t.resetCustomValues.bind(ve(t)),t}return t=l,(r=[{key:"formatDate",value:function(e,t){return e&&e._isAMomentObject&&"function"==typeof e.format?e.format(t):""}},{key:"getResetState",value:function(){var e=this.props.dateQuery,t=e.period,r=e.compare,n=e.before,a=e.after;return{period:t,compare:r,before:n,after:a,focusedInput:"startDate",afterText:this.formatDate(a,Oe),beforeText:this.formatDate(n,Oe),afterError:null,beforeError:null}}},{key:"update",value:function(e){this.setState(e)}},{key:"onSelect",value:function(e,t){var r=this,n=this.props,a=n.isoDateFormat,o=n.onRangeSelect;return function(n){var i=r.state,c=i.period,l=i.compare,u=i.after,s=i.before,f={period:"custom"===e?"custom":c,compare:l};"custom"===e?(f.after=r.formatDate(u,a),f.before=r.formatDate(s,a)):(f.after=void 0,f.before=void 0),o(f),t(n)}}},{key:"getButtonLabel",value:function(){var e=this.props.dateQuery,t=e.primaryDate,r=e.secondaryDate,n=["".concat(t.label," (").concat(t.range,")")];return this.props.hideCompare||n.push("".concat(Object(a.__)("vs.","wp-marketing-automations-crm")," ").concat(r.label," (").concat(r.range,")")),n}},{key:"isValidSelection",value:function(e){var t=this.state,r=t.compare,n=t.after,a=t.before;return"custom"!==e||r&&n&&a}},{key:"resetCustomValues",value:function(){this.setState({after:null,before:null,focusedInput:"startDate",afterText:"",beforeText:"",afterError:null,beforeError:null})}},{key:"render",value:function(){var e=this,t=this.state,r=t.period,a=t.compare,i=t.after,c=t.before,l=t.focusedInput,u=t.afterText,s=t.beforeText,f=t.afterError,p=t.beforeError;return Object(n.createElement)("div",{className:"bwf-filters-filter"},Object(n.createElement)(o.Dropdown,{contentClassName:"bwf-filters-date-content",position:"bottom",expandOnMobile:!0,renderToggle:function(t){var r=t.isOpen,a=t.onToggle;return Object(n.createElement)(pe.a,{onClick:a,isOpen:r,labels:e.getButtonLabel()})},renderContent:function(t){var o=t.onClose;return Object(n.createElement)(fe,{period:r,compare:a,hideCompare:e.props.hideCompare,after:i,before:c,onUpdate:e.update,onClose:o,onSelect:e.onSelect,isValidSelection:e.isValidSelection,resetCustomValues:e.resetCustomValues,focusedInput:l,afterText:u,beforeText:s,afterError:f,beforeError:p,shortDateFormat:Oe})}}))}}])&&be(t.prototype,r),i&&be(t,i),l}(n.Component);je.propTypes={onRangeSelect:c.a.func.isRequired,dateQuery:c.a.shape({period:c.a.string.isRequired,compare:c.a.string.isRequired,before:c.a.object,after:c.a.object,primaryDate:c.a.shape({label:c.a.string.isRequired,range:c.a.string.isRequired}).isRequired,secondaryDate:c.a.shape({label:c.a.string.isRequired,range:c.a.string.isRequired}).isRequired}).isRequired};t.a=je},333:function(e,t,r){"use strict";var n=r(0),a=r(15),o=r.n(a),i=r(5),c=r(8),l=r.n(c),u=r(97),s=r(207);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var a=v(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){var t=e.className,r=e.hideDelta;return Object(n.createElement)("li",{"data-testid":"summary-placeholder",className:o()("bwf-summary-item-container is-placeholder",t)},Object(n.createElement)("div",{className:"bwf-summary-item"},Object(n.createElement)("div",{className:"bwf-summary-item-label"}),Object(n.createElement)("div",{className:"bwf-summary-item-data"},Object(n.createElement)("div",{className:"bwf-summary-item-value"}),!r&&Object(n.createElement)("div",{className:"bwf-summary-item-delta"}))))},O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,e);var t,r,a,c=y(l);function l(){return m(this,l),c.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){var e,t=this.props,r=t.isDropdownBreakpoint,a=t.hideDelta,c=r?1:this.props.numberOfItems,l=Object(s.a)(c),u=o()("bwf-summary",(p(e={},l,!r),p(e,"is-placeholder",!0),e));return Object(n.createElement)("ul",{className:u,"aria-hidden":"true"},Object(i.range)(c).map((function(e){return Object(n.createElement)(g,{hideDelta:a,key:e})})))}}])&&b(t.prototype,r),a&&b(t,a),l}(n.Component);O.propTypes={numberOfItems:l.a.number.isRequired},O.defaultProps={numberOfRows:5},t.a=Object(u.withViewportMatch)({isDropdownBreakpoint:"< large"})(O)},363:function(e,t,r){"use strict";var n=r(50),a=r(7),o=r(55),i=r(18),c=function(e){var t=0;return"automation"===e?t=1:"broadcast"===e&&(t=2),t};t.a=function(){var e=Object(n.a)(o.b.cartAnalytics).fetch,t=Object(n.a)(o.b.contactAnalytics),r=t.fetch,l=t.setStateProp,u=Object(n.a)(o.b.emailAnalytics),s=u.fetch,f=u.setStateProp,p=Object(n.a)(o.b.emailTable),m=p.fetch,b=p.setStateProp,d=Object(n.a)(o.b.engagementAnalytics),y=d.fetch,h=d.setStateProp,v=Object(n.a)(o.b.directEmailTable),g=v.fetch,O=v.setStateProp;return{fetchCartAnalytics:function(t,r,n){e("GET",Object(a.g)("/analytics/carts/")+"?"+Object(i.stringify)({after:t,before:r,interval:n}))},fetchContactAnalytics:function(e,t,n){r("GET",Object(a.g)("/analytics/contacts/")+"?"+Object(i.stringify)({after:e,before:t,interval:n}))},fetchEmailAnalytics:function(e,t,r,n,o){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;s("GET",Object(a.g)("/analytics/emails/chart/")+"?"+Object(i.stringify)({after:e,before:t,interval:r,oid:n,type:c(o),mode:l}))},fetchEmailTable:function(e,t,r,n,o,l,u){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;m("GET",Object(a.g)("/analytics/emails/tabular/")+"?"+Object(i.stringify)({after:r,before:n,interval:o,oid:l,type:c(u),limit:e,offset:t,mode:s}))},setEmailTableData:function(e,t){b(e,t)},fetchEngagementData:function(e,t){y("GET",Object(a.g)("/analytics/engagement")+"?"+Object(i.stringify)({after:e,before:t}))},setContactAnalyticsData:function(e,t){l(e,t)},setEmailAnalyticsData:function(e,t){f(e,t)},setEngagementData:function(e,t){h(e,t)},fetchDirectEmailTable:function(e,t,r,n,o){g("GET",Object(a.g)("/analytics/direct-emails/tabular/")+"?"+Object(i.stringify)({after:r,before:n,interval:o,limit:e,offset:t}))},setDirectEmailTableData:function(e,t){O(e,t)}}}},364:function(e,t,r){"use strict";var n=r(46),a=r(0);t.a=function(e,t,r){var o=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},i=Object(n.a)(),c=i.setActiveMultiple,l=i.resetHeaderMenu,u=i.setL2NavType,s=i.setL2Nav,f=i.setBackLink,p=i.setL2Title,m=i.setPageHeader;return Object(a.useEffect)((function(){l(),!t&&u("menu"),!t&&s(o.reports_nav),c({leftNav:"analytics-"+e,rightNav:e+"-analytics"}),t&&f(t),r&&p(r),m("Analytics")}),[e,r]),!0}},451:function(e,t,r){"use strict";var n=r(0),a=r(15),o=r.n(a),i=r(8),c=r.n(i),l=r(47),u=r(172);r(452);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var a=y(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,r,a,i=b(c);function c(){return f(this,c),i.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){var e=this.props,t=e.children,r=e.menu,a=e.title,i=o()("bwf-section-header",this.props.className);return Object(n.createElement)("div",{className:i},Object(n.createElement)("div",{className:"bwf-h2"},a),t&&Object(n.createElement)("div",{className:"bwf-section-header__actions bwf-section-header__header-item"},t),r&&Object(n.createElement)("div",{className:"bwf-section-header__menu bwf-section-header__header-item"},r))}}])&&p(t.prototype,r),a&&p(t,a),c}(n.Component);h.propTypes={className:c.a.string,menu:Object(u.a)(l.a),title:c.a.oneOfType([c.a.string,c.a.node]).isRequired},t.a=h},452:function(e,t,r){},684:function(e,t,r){},685:function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.size,r=void 0===t?24:t,a=e.onClick,o=(e.icon,e.className),c=function(e,t){var r={};for(var n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["size","onClick","icon","className"]),l=["gridicon","gridicons-line-graph",o,!1,!1,!1].filter(Boolean).join(" ");return i.default.createElement("svg",n({className:l,height:r,width:r,onClick:a},c,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),i.default.createElement("g",null,i.default.createElement("path",{d:"M3 19h18v2H3zm3-3c1.1 0 2-.9 2-2 0-.5-.2-1-.5-1.3L8.8 10H9c.5 0 1-.2 1.3-.5l2.7 1.4v.1c0 1.1.9 2 2 2s2-.9 2-2c0-.5-.2-.9-.5-1.3L17.8 7h.2c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2c0 .5.2 1 .5 1.3L15.2 9H15c-.5 0-1 .2-1.3.5L11 8.2V8c0-1.1-.9-2-2-2s-2 .9-2 2c0 .5.2 1 .5 1.3L6.2 12H6c-1.1 0-2 .9-2 2s.9 2 2 2z"})))};var a,o=r(1),i=(a=o)&&a.__esModule?a:{default:a};e.exports=t.default},686:function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r=e.size,a=void 0===r?24:r,o=e.onClick,c=(e.icon,e.className),l=function(e,t){var r={};for(var n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["size","onClick","icon","className"]),u=["gridicon","gridicons-stats-alt",c,!1,!1,(t=a,!(0!=t%18)&&"needs-offset-y")].filter(Boolean).join(" ");return i.default.createElement("svg",n({className:u,height:a,width:a,onClick:o},l,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),i.default.createElement("g",null,i.default.createElement("path",{d:"M21 21H3v-2h18v2zM8 10H4v7h4v-7zm6-7h-4v14h4V3zm6 3h-4v11h4V6z"})))};var a,o=r(1),i=(a=o)&&a.__esModule?a:{default:a};e.exports=t.default},786:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(4),o=r(259),i=r(250),c=r(333),l=r(223),u=r(125),s=r(7),f=r(13),p=function(e){var t=Object(u.a)(Object(s.I)()).formatAmount,r=e.query,p=l.a.getCartAnalyticsLoading,m=l.a.getCartAnalytics,b=(r.chart&&r.chart,p()),d=m(),y=function(e){if(!d||!d.hasOwnProperty("totals"))return 0;var t=d.totals;return t.hasOwnProperty(e)?t[e]:void 0};return Object(n.createElement)("div",{className:"bwf-crm-cart-report-tiles"},Object(n.createElement)(o.a,null,(function(){var e=[];return e.push(Object(n.createElement)(i.a,{key:1,value:y("recoverable_carts"),label:Object(a.__)("Recoverable Carts","wp-marketing-automations-crm"),tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(f.a,{icon:"cart-recoverable",size:30}))}),Object(n.createElement)(i.a,{key:2,value:t(y("potential_revenue")),label:Object(a.__)("Potential Revenue","wp-marketing-automations-crm"),tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(f.a,{icon:"revenue-potential",size:30}))}),Object(n.createElement)(i.a,{key:3,value:y("recovered_cart"),label:Object(a.__)("Recovered Carts","wp-marketing-automations-crm"),tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(f.a,{icon:"cart-recovered",size:30}))}),Object(n.createElement)(i.a,{key:4,value:t(y("recovered_revenue")),label:Object(a.__)("Recovered Revenue","wp-marketing-automations-crm"),tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(f.a,{icon:"revenue-recovered",size:30}))}),Object(n.createElement)(i.a,{key:5,value:y("recovery_rate")+"%",label:Object(a.__)("Recovery Rate","wp-marketing-automations-crm"),tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(f.a,{icon:"recovery-rate",size:30}))}),Object(n.createElement)(i.a,{key:6,value:y("lost_cart"),label:Object(a.__)("Lost Carts","wp-marketing-automations-crm"),tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(f.a,{icon:"cart-lost",size:30}))})),b?Object(n.createElement)(c.a,{numberOfItems:6,hideDelta:!0}):e})))},m=r(258),b=r(128),d=function(e){var t=e.query,r=l.a.getCartAnalytics,o=l.a.getCartAnalyticsLoading,i=(t.chart&&t.chart,o()),c=r(),u=t.chartType?t.chartType:"line",s=Object(b.f)(t),f=Object(b.b)(function(e){return e.period&&null!=e.period&&""!=e.period||(e.period="month"),e.compare&&null!=e.compare&&""!=e.compare||(e.compare="previous_year"),e}(t));f.includes(s)||(s=f[f.length-1]);var p=function(e){var t=[];c&&c.hasOwnProperty("intervals")&&c.intervals.map((function(r){"cart"==e&&t.push({date:r.start_date,recoverable_carts:{label:Object(a.__)("Recoverable Carts","wp-marketing-automations-crm"),value:parseFloat(r.subtotals.recoverable_carts)},recovered_cart:{label:Object(a.__)("Recovered Carts","wp-marketing-automations-crm"),value:parseFloat(r.subtotals.recovered_cart)},lost_cart:{label:Object(a.__)("Lost Carts","wp-marketing-automations-crm"),value:parseFloat(r.subtotals.lost_cart)}}),"revenue"===e&&t.push({date:r.start_date,potantial_revenue:{label:Object(a.__)("Potential Revenue","wp-marketing-automations-crm"),value:parseFloat(r.subtotals.potential_revenue)},recovered_revenue:{label:Object(a.__)("Recovered Revenue","wp-marketing-automations-crm"),value:parseFloat(r.subtotals.recovered_revenue)}})}));return t};return Object(n.createElement)("div",{className:"bwf-crm-cart-report-table-wrapper"},Object(n.createElement)("div",{className:"bwf-crm-cart-report-table-block"},Object(n.createElement)(m.a,{isRequesting:i,data:p("cart"),title:Object(a.__)("Carts","wp-marketing-automations-crm"),interval:s,layout:"item-comparison",chartType:u,hideTypeSelect:!0,legendPosition:"bottom",interactiveLegend:!0})),Object(n.createElement)("div",{className:"bwf-crm-cart-report-table-block"},Object(n.createElement)(m.a,{isRequesting:i,data:p("revenue"),title:Object(a.__)("Revenue","wp-marketing-automations-crm"),interval:s,layout:"item-comparison",chartType:u,hideTypeSelect:!0,legendPosition:"bottom",interactiveLegend:!0})))},y=r(326),h=r(129),v=(r(319),r(17));function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){var t=e.query;return Object(n.createElement)("div",{className:"bwf-crm-cart-report-filter"},Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(h.b,{component:"div",className:"bwf-filters"},Object(n.createElement)("div",{className:"bwfcrm-filters-basic-filters"},Object(n.createElement)(y.a,{key:JSON.stringify(t),onRangeSelect:function(e){var r=O(O({},t),e);delete r.compare,Object(v.j)(r,"/",{})},dateQuery:function(e){e.compare="previous_year";var t=Object(b.e)(e),r=t.period,n=t.compare,a=t.before,o=t.after,i=Object(b.c)(e);return{period:r,compare:n,before:a,after:o,primaryDate:i.primary,secondaryDate:i.secondary}}(t),isoDateFormat:b.g,hideCompare:!0}))))},_=r(363),k=r(5),E=(r(684),r(15)),S=r.n(E),T=r(9),P=r(451),R=r(685),C=r.n(R),D=r(686),x=r.n(D),N=r(364),F=function(e){var t=e.type,r=void 0===t?"":t,o=e.heading,i=void 0===o?"":o,c=e.description,l=void 0===c?"":c,u=e.ctaText,s=void 0===u?"":u,f=e.ctaLink,p=void 0===f?"":f,m=e.video,b=void 0===m?Object(n.createElement)(n.Fragment,null):m,d="bwf-cart-tracking"===r,y={heading:Object(a.__)("Cart Tracking is disabled.","wp-marketing-automations-crm"),description:Object(a.__)("Click on the button below to go to Settings > Carts to enable cart tracking. Once activated, you will be able to capture emails as soon buyer enters it.","wp-marketing-automations-crm"),ctaText:Object(a.__)("Enable Tracking","wp-marketing-automations-crm"),ctaLink:"admin.php?page=autonami&path=/settings"};return Object(n.createElement)("div",{className:"bwfan_highlight_center"},Object(n.createElement)("div",{className:"bwfan_heading"},i||(d?y.heading:"")),Object(n.createElement)("div",{className:"bwfan_clear_20"}),Object(n.createElement)("div",{className:"bwfan_content"},Object(n.createElement)("p",null,l||(d?y.description:""))),Object(n.createElement)("div",{className:"bwfan_clear_30"}),Object(n.createElement)("a",{className:"bwfan_btn_blue_big bwfan_enable_tracking",href:p||(d?y.ctaLink:"#")},s||(d?y.ctaText:"")),b)},M=r(117);t.default=function(e){var t=Object(_.a)().fetchCartAnalytics;Object(N.a)("carts",!1,"");var r=Object(v.h)(),o=r.chartType?r.chartType:"line",i=function(e,r){var n=function(e){return e.compare="previous_year",Object(b.c)(e).primary}(e),a="",o="";n&&(Object(k.isEmpty)(n.after)||(a=n.after.format("YYYY-MM-DD HH:mm:ss")),Object(k.isEmpty)(n.before)||(o=n.before.format("YYYY-MM-DD 23:59:59")),Object(k.isEmpty)(a)||Object(k.isEmpty)(o)||t(a,o,r))};r.hasOwnProperty("period")||(r.period="month");var c=r.period,l=r.compare,u=r.interval,f=r.after,m=r.before;Object(n.useEffect)((function(){Object(s.d)("Cart Analytics");var e=r.hasOwnProperty("interval")?r.interval:"day";i(r,e)}),[c,l,u,f,m]);var y=function(e){delete r.compare,Object(v.j)({chartType:e},"/",r)},h=function(e){delete r.compare,Object(v.j)({interval:e},"/",r)};return Object(s.O)()?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(M.a,null),Object(n.createElement)("div",{className:"bwf-crm-analytics-wrap bwf-crm-cart-report-wrap"},Object(n.createElement)(w,{query:r}),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(P.a,{className:"bwf-cart-report-header-chart",title:Object(a.__)("Performance","wp-marketing-automations-crm")}),Object(n.createElement)(p,{query:r}),Object(n.createElement)(P.a,{className:"bwf-cart-report-header-chart has-interval-select",title:Object(a.__)("Charts","wp-marketing-automations-crm")},function(e){var t=e.chartInterval,r=e.query,o=Object(b.b)(r);if(!o||o.length<1)return null;var i={hour:Object(a.__)("By hour","wp-marketing-automations-crm"),day:Object(a.__)("By day","wp-marketing-automations-crm"),week:Object(a.__)("By week","wp-marketing-automations-crm"),month:Object(a.__)("By month","wp-marketing-automations-crm"),quarter:Object(a.__)("By quarter","wp-marketing-automations-crm"),year:Object(a.__)("By year","wp-marketing-automations-crm")};return Object(n.createElement)(T.SelectControl,{className:"bwf-chart__interval-select",value:t,options:o.map((function(e){return{value:e,label:i[e]}})),onChange:h})}({interval:u,query:r}),Object(n.createElement)(T.NavigableMenu,{className:"bwf-chart__types",orientation:"horizontal",role:"menubar"},Object(n.createElement)(T.Button,{className:S()("bwf-chart__type-button",{"bwf-chart__type-button-selected":!o||"line"===o}),title:Object(a.__)("Line chart","wp-marketing-automations-crm"),"aria-checked":"line"===o,role:"menuitemradio",tabIndex:"line"===o?0:-1,onClick:function(){return y("line")}},Object(n.createElement)(C.a,null)),Object(n.createElement)(T.Button,{className:S()("bwf-chart__type-button",{"bwf-chart__type-button-selected":"bar"===o}),title:Object(a.__)("Bar chart","wp-marketing-automations-crm"),"aria-checked":"bar"===o,role:"menuitemradio",tabIndex:"bar"===o?0:-1,onClick:function(){return y("bar")}},Object(n.createElement)(x.a,null)))),Object(n.createElement)(d,{query:r}))):Object(n.createElement)(F,{type:"bwf-cart-tracking"})}}}]);