(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{113:function(e,t,n){"use strict";var r=n(0),a=n(4),o=n(15),c=n.n(o),i=n(9),s=n(34),u=n(8),l=n.n(u),f=n(96),m=(n(138),function(e){var t=e.id,n=e.instanceId,o=e.isVisible,u=e.label,l=e.popoverContents,f=e.remove,m=e.screenReaderLabel,p=e.setState,b=e.className;if(m=m||u,!u)return null;u=Object(s.decodeEntities)(u);var O=c()("bwf-tag",b,{"has-remove":!!f}),d="bwf-tag-label-".concat(n),g=Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"screen-reader-text"},m),Object(r.createElement)("span",{"aria-hidden":"true"},u));return Object(r.createElement)("span",{className:O},l?Object(r.createElement)(i.Button,{className:"bwf-tag-text",id:d,onClick:function(){return p((function(){return{isVisible:!0}}))}},g):Object(r.createElement)("span",{className:"bwf-tag-text",id:d},g),l&&o&&Object(r.createElement)(i.Popover,{onClose:function(){return p((function(){return{isVisible:!1}}))}},l),f&&Object(r.createElement)(i.Button,{className:"bwf-tag-remove",onClick:function(){return f(t,u)},label:Object(a.sprintf)(Object(a.__)("Remove %s","wp-marketing-automations-crm"),u),"aria-describedby":d},Object(r.createElement)(i.Dashicon,{icon:"dismiss",size:20})))});m.propTypes={id:l.a.oneOfType([l.a.number,l.a.string]),label:l.a.string.isRequired,popoverContents:l.a.node,remove:l.a.func,screenReaderLabel:l.a.string},t.a=Object(f.withState)({isVisible:!1})(Object(f.withInstanceId)(m))},117:function(e,t,n){"use strict";var r=n(0),a=n(8),o=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,e);var t,n,a,o=u(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).scrollTo=t.scrollTo.bind(f(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){setTimeout(this.scrollTo,250)}},{key:"scrollTo",value:function(){var e=this.props.offset;this.ref.current?window.scrollTo(0,parseInt(e,10)):setTimeout(this.scrollTo,250)}},{key:"render",value:function(){var e=this.props.children;return this.ref=Object(r.createRef)(),Object(r.createElement)("div",{ref:this.ref},e)}}])&&i(t.prototype,n),a&&i(t,a),c}(r.Component);p.propTypes={offset:o.a.string},p.defaultProps={offset:"0"},t.a=p},138:function(e,t,n){},173:function(e,t,n){"use strict";var r=n(0),a=n(15),o=n.n(a),c=n(18),i=n(8),s=n.n(i),u=n(320),l=n.n(u),f=n(5),m=n(321),p=n.n(m),b=(n(184),function(e){var t,n,a,i,s=e.alt,u=e.title,m=e.size,b=e.user,O=e.className,d=o()("bwf-gravatar",O,{"is-placeholder":!b}),g=s||b&&(b.display_name||b.name)||"",j="https://www.gravatar.com/avatar/0?s="+m+"&d=blank";return b&&(t=Object(f.isString)(b)?(i=b,"https://www.gravatar.com/avatar/"+p()(i)):b.avatar_URLs[96],n=l.a.parse(t),(a=Object(c.parse)(n.query)).s=m,a.d="blank",n.search=Object(c.stringify)(a),j=l.a.format(n)),Object(r.createElement)("img",{alt:g,title:u,className:d,src:j,width:m,height:m})});b.propTypes={user:s.a.oneOfType([s.a.object,s.a.string]),alt:s.a.string,title:s.a.string,size:s.a.number,className:s.a.string},b.defaultProps={size:60},t.a=b},181:function(e,t,n){"use strict";var r=n(0),a=n(7),o=n(5),c=n(159),i=n.n(c),s=(n(200),function(e){var t=e.first_name,n=e.last_name;return Object(r.createElement)("div",{className:"bwf-c-name-initials"},Object(r.createElement)("span",null,Object(o.isEmpty)(i()(t+" "+n))?"-":Object(a.F)(t,n)))});s.defaultProps={first_name:"",last_name:""};var u=s,l=n(32),f=n(4),m=n(115),p=n.n(m),b=(n(201),n(173)),O=function(e){var t=e.dateText,n=e.date,o=e.contact,c=o.f_name,s=void 0===c?"":c,m=o.l_name,O=void 0===m?"":m,d=(o.id,o.creation_date),g=o.email,j=e.hideJoiningDate,v=void 0!==j&&j,y=e.lowerText,w=Object(a.Z)([s,O]," "),h=Object(a.B)(n||d);return Object(r.createElement)(l.a,{className:"bwf-c-contact-basic-info-cell",justify:"flex-start"},Object(r.createElement)(l.c,{className:"bwf-c-avatar"},g&&Object(r.createElement)(b.a,{user:g,size:40}),Object(r.createElement)(u,{first_name:s,last_name:O})),Object(r.createElement)(l.c,null,Object(r.createElement)(l.a,{style:{flexDirection:"column"},align:"flex-start"},Object(r.createElement)(l.c,{style:{padding:0}},Object(r.createElement)("span",{className:"bwf-c-contact-name"},p()(i()(w))?Object(f.__)("-","wp-marketing-automations-crm"):w)),!v&&h&&Object(r.createElement)(l.c,null,Object(r.createElement)("span",{className:"bwf-c-contact-creation-date"},t||Object(f.__)("Joined","wp-marketing-automations-crm")," ",y||h)))))};O.defaultProps={contact:{f_name:"",l_name:"",id:0,creation_date:""}};t.a=O},184:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},243:function(e,t,n){"use strict";var r=n(0),a=n(4),o=n(8),c=n.n(o),i=n(113),s=(n(256),n(13)),u=function(e){var t=e.items;return Object(r.createElement)(i.a,{className:"bwf-view-more-list",label:Object(r.createElement)("span",{className:"bwf-display-flex"},Object(r.createElement)("span",{className:"bwf-view-more-label"},Object(a.sprintf)(Object(a.__)("+%d ","bwf-admin"),t.length-1)),Object(r.createElement)(s.a,{icon:"tailless-arrow-down"})),popoverContents:Object(r.createElement)("ul",{className:"bwf-view-more-list__popover"},t.map((function(e,t){return Object(r.createElement)("li",{key:t,className:"bwf-view-more-list__popover__item"},e)})))})};u.propTypes={items:c.a.arrayOf(c.a.node)},u.defaultProps={items:[]},t.a=u},256:function(e,t,n){},460:function(e,t,n){"use strict";var r=n(46),a=n(0),o=n(4),c=n(7),i=function(e){var t={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:"admin.php?page=autonami-automations&edit=".concat(e)},engagement:{name:Object(o.__)("Engagement","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(e,"/engagement")}};return Object(c.Y)()&&(t.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(e,"/orders")}),t};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],f=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},m=f.automation_nav,p=Object(r.a)(),b=p.setActiveMultiple,O=p.resetHeaderMenu,d=p.setL2NavType,g=p.setL2Nav,j=p.setBackLink,v=p.setL2Title,y=p.setL2Content,w=p.setBackLinkLabel,h=p.setL2NavAlign,_=p.setPageHeader;return Object(a.useEffect)((function(){O(),!c&&d("menu"),g(u?i(u):m),b({leftNav:"automations",rightNav:e}),n&&j(n),n&&u&&j("admin.php?page=autonami-automations&edit=".concat(u)),c&&w(Object(o.__)("All Automations","wp-marketing-automations-crm")),u&&w(Object(o.__)("Back to Automation","wp-marketing-automations-crm")),u&&h("right"),t&&v(t),!n&&s&&y(s),_("Automations"),l&&g({})}),[e]),!0}},502:function(e,t,n){"use strict";var r=n(48),a=n(57);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("automationList"),t=e.getStateProp,n=s(e,["getStateProp"]),o=Object(r.a)(a.a.recipient).getStateProp,i=Object(r.a)(a.a.conversion).getStateProp;return c(c({},n),{},{getAutomations:function(){return t("automations")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getRecipientData:function(){return o("data")},getRecipientLoading:function(){return o("isLoading")},getRecipientOffset:function(){return o("offset")},getRecipientAutomationId:function(){return o("automationId")},getRecipientTotal:function(){return o("total")},getRecipientPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getRecipientLimit:function(){return o("limit")},getConversionData:function(){return i("data")},getConversionLoading:function(){return i("isLoading")},getConversionOffset:function(){return i("offset")},getConversionAutomationId:function(){return i("automationId")},getConversionTotal:function(){return i("total")},getConversionPage:function(){return parseInt(i("offset"))/parseInt(i("limit"))+1},getConversionLimit:function(){return i("limit")},getCountData:function(){return t("countData")}})}},503:function(e,t,n){"use strict";var r=n(50),a=n(7),o=n(57);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("automationList"),t=e.fetch,n=e.setStateProp,c=u(e,["fetch","setStateProp"]),s=Object(r.a)(o.a.recipient),l=s.fetch,f=s.setStateProp,m=Object(r.a)(o.a.conversion),p=m.fetch,b=m.setStateProp;return i(i({},c),{},{fetch:function(e,n,r,o){var c=n.s,i=(n.page,n.filter,n.path,{offset:r,limit:o,status:e,search:c,filters:u(n,["s","page","filter","path"])});t("GET",Object(a.g)("/automations"),i)},setAutomationListValues:function(e,t){n(e,t)},fetchRecipient:function(e,t,n){l("GET",Object(a.g)("/automation/".concat(e,"/recipients?limit=").concat(t,"&offset=").concat(n)))},setRecipientsValues:function(e,t){f(e,t)},fetchConversion:function(e,t,n){p("GET",Object(a.g)("/automation/".concat(e,"/conversions?limit=").concat(t,"&offset=").concat(n)))},setConversionValues:function(e,t){b(e,t)}})}},699:function(e,t,n){},764:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(4),o=n(130),c=n(503),i=n(502),s=n(125),u=n(7),l=n(243),f=n(5),m=(n(699),n(117)),p=n(19),b=n(181),O=n(460),d=n(46);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=e.match.params.automationId,n=Object(d.a)().setL2NavAlign;Object(O.a)("orders","",!0,!1,null,t),n("left");var j=Object(i.a)(),v=j.getConversionData();Object(u.d)("Automation #"+t);var y=j.getConversionLoading(),w=j.getConversionLimit(),h=j.getConversionOffset(),_=j.getConversionTotal(),P=Object(c.a)(),E=P.fetchConversion,k=P.setConversionValues,C=Object(s.a)(Object(u.I)()).formatAmount;Object(r.useEffect)((function(){E(t,w,h)}),[w,h]);var N=[{key:"orderid",label:Object(a.__)("Order ID","wp-marketing-automations-crm"),cellClassName:"bwf-crm-col-stats-m"},{key:"contact",label:Object(a.__)("Contact","wp-marketing-automations-crm"),required:!0,cellClassName:"bwf-crm-col-contact"},{key:"purchaseitems",label:Object(a.__)("Purchased Items","wp-marketing-automations-crm"),cellClassName:"bwf-crm-col-contact-details"},{key:"revenue",label:Object(a.__)("Revenue","wp-marketing-automations-crm"),cellClassName:"bwf-crm-col-stats-m"},{key:"date",label:Object(a.__)("Date","wp-marketing-automations-crm"),cellClassName:"bwf-crm-col-stats-m"}],S=j.getConversionPage(),T=function(e){e!==w&&(k("limit",e),k("offset",0))},I=function(e){return Object(r.createElement)(p.a,{href:"admin.php?page=autonami&path=/contact/"+e.cid,type:"bwf-crm",className:"bwf-crm-campaign-order-contact-link bwf-a-no-underline",key:e.cid},Object(r.createElement)(b.a,{contact:e,date:e.date,dateText:Object(a.__)("Placed on","wp-marketing-automations-crm")}))},L=function(e){return e.hasOwnProperty("order_deleted")&&e.order_deleted?Object(r.createElement)(r.Fragment,null,"#"+e.wcid):Object(r.createElement)("a",{target:"_blank",className:"bwf-a-no-underline",href:"post.php?post="+e.wcid+"&action=edit"},"#"+e.wcid)},R=v.map((function(e){return[{display:e.hasOwnProperty("wcid")?L(e):"-",value:e.hasOwnProperty("wcid")?e.wcid:"-"},{display:I(e),value:e.hasOwnProperty("contact_name")?e.contact_name:"-"},{display:e.hasOwnProperty("items")?(t=e.items,n="",o=[],Object.entries(t).map((function(e){var t=g(e,2),a=t[0],c=t[1];Object(f.isEmpty)(n)&&(n=Object(r.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?action=edit&post="+a,rel:"noreferrer"},c)),o.push(Object(r.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?action=edit&post="+a},c))})),Object(r.createElement)(r.Fragment,null,Object(f.isEmpty)(n)?"-":n,!Object(f.isEmpty)(o)&&o.length>1&&Object(r.createElement)(l.a,{items:o}))):Object(a.__)("Order Deleted","wp-marketing-automations-crm"),value:"purchase_item"},{display:e.hasOwnProperty("wctotal")?C(e.wctotal):"-",value:e.hasOwnProperty("wctotal")?e.wctotal:0},{display:e.hasOwnProperty("date")?Object(u.B)(e.date):"-",value:e.hasOwnProperty("date")?e.date:"-"}];var t,n,o}));return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.a,null),Object(r.createElement)(o.a,{className:"bwf-crm-campaign-report-conversion",rows:R,headers:N,query:{paged:S},rowsPerPage:w,totalRows:_,isLoading:y,onPageChange:function(e,t){k("offset",(e-1)*w)},onQueryChange:function(e){return"per_page"!==e?function(){}:T},rowHeader:!0,showMenu:!1,emptyMessage:Object(a.__)("No orders found","wp-marketing-automations-crm"),hideHeader:"yes"}))}}}]);