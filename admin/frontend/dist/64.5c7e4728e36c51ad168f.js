(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{137:function(e,t,a){"use strict";var r=a(0),n=a(111),c=a(121),s=a(122),i=a(9),o=a(4);t.a=function(e){var t=e.confirmText,a=void 0===t?"":t,l=e.confirmButtonText,m=void 0===l?"":l,u=e.cancelButtonText,b=void 0===u?"":u,p=e.onConfirm,f=void 0===p?function(){}:p,d=e.isLoading,O=void 0!==d&&d,w=e.successMessage,j=void 0===w?"":w,v=e.errorMessage,g=void 0===v?"":v,_=e.onRequestClose,h=e.isOpen,y=void 0!==h&&h,E=e.confirmDescription,k=void 0===E?"":E,N=e.isDelete,S=void 0!==N&&N;Object(r.useEffect)((function(){(j||g)&&setTimeout((function(){_&&_()}),2e3)}),[j,g]);return y?Object(r.createElement)(i.Modal,{title:"",onRequestClose:function(){return _()},className:"bwf-c-s-delete-model bwf-admin-modal bwf-admin-modal-small bwf-admin-modal-no-header"},S&&Object(r.createElement)("div",{className:"bwf-h4"},Object(o.__)("Delete","wp-marketing-automations-crm")),O&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(n.a,null)),!!j&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(c.a,null),Object(r.createElement)("div",{className:"bwf-h1"},j)),!!g&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(s.a,null),Object(r.createElement)("div",{className:"bwf-h1"},g)),!O&&!j&&!g&&Object(r.createElement)("div",{className:"bwf-t-center bwf-form-buttons"},S?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-h2"},Object(o.__)("Are you sure?","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf_clear_15"}),Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},Object(o.__)("Once you delete this item. It will no longer available.","wp-marketing-automations-crm"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-h1"},a),!!k&&Object(r.createElement)("p",null,k)),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:S?"bwf_text_right":""},Object(r.createElement)(i.Button,{isTertiary:!0,style:{marginRight:"20px"},onClick:function(){_&&_()}},b),Object(r.createElement)(i.Button,{isPrimary:!0,onClick:function(){f&&f()},className:S?"bwf-delete-btn":""},m)))):null}},207:function(e,t,a){"use strict";function r(e){return e<10?"has-".concat(e,"-items"):"has-10-items"}a.d(t,"a",(function(){return r}))},249:function(e,t,a){},250:function(e,t,a){"use strict";var r=a(0),n=a(9),c=a(4),s=a(15),i=a.n(s),o=a(171),l=a.n(o),m=a(5),u=a(8),b=a.n(u),p=a(19),f=a(32),d=function(e){var t,a=e.delta,s=e.href,o=e.hrefType,u=e.isOpen,b=e.label,d=e.onToggle,O=e.prevLabel,w=e.prevValue,j=e.reverseTrend,v=e.selected,g=e.value,_=e.onLinkClickCallback,h=e.tileIcon,y=i()("bwf-summary-item-container",{"is-dropdown-button":d,"is-dropdown-expanded":u}),E=i()("bwf-summary-item",{"is-selected":v,"is-good-trend":j?a<0:a>0,"is-bad-trend":j?a>0:a<0}),k=a>0?Object(c.sprintf)(Object(c.__)("Up %d%% from %s","wp-marketing-automations-crm"),a,O):Object(c.sprintf)(Object(c.__)("Down %d%% from %s","wp-marketing-automations-crm"),Math.abs(a),O);a||(k=Object(c.sprintf)(Object(c.__)("No change from %s","wp-marketing-automations-crm"),O));var N={className:E,"aria-current":v?"page":null};if(d||s){var S=!!d;t=S?n.Button:p.a,S?(N.onClick=d,N["aria-expanded"]=u):(N.href=s,N.role="menuitem",N.onClick=_,N.type=o)}else t="div";return Object(r.createElement)("li",{className:y},Object(r.createElement)(t,N,Object(r.createElement)(f.a,{gap:"5",align:"center"},Object(r.createElement)(f.b,null,Object(r.createElement)("div",{className:"bwf-summary-item-label"},Object(r.createElement)(n.__experimentalText,{variant:"body.small"},b)),Object(r.createElement)("div",{className:"bwf-summary-item-data"},Object(r.createElement)("div",{className:"bwf-summary-item-value"},Object(r.createElement)(n.__experimentalText,{variant:"title.small"},Object(m.isNil)(g)?Object(c.__)("-","wp-marketing-automations-crm"):g)),a&&Object(r.createElement)(n.Tooltip,{text:Object(m.isNil)(w)?Object(c.__)("-","wp-marketing-automations-crm"):"".concat(O," ").concat(w),position:"top center"},Object(r.createElement)("div",{className:"bwf-summary-item-delta",role:"presentation","aria-label":k},Object(r.createElement)(n.__experimentalText,{variant:"caption"},Object(m.isNil)(a)?Object(c.__)("-","wp-marketing-automations-crm"):Object(c.sprintf)(Object(c.__)("%d%%","wp-marketing-automations-crm"),a))))),d?Object(r.createElement)(l.a,{className:"bwf-summary-toggle",icon:"chevron-down",size:24}):null),h&&Object(r.createElement)(f.c,null,h))))};d.propTypes={delta:b.a.number,href:b.a.string,hrefType:b.a.oneOf(["wp-admin","wc-admin","external"]).isRequired,isOpen:b.a.bool,label:b.a.string.isRequired,onToggle:b.a.func,prevLabel:b.a.string,prevValue:b.a.oneOfType([b.a.number,b.a.string]),reverseTrend:b.a.bool,selected:b.a.bool,value:b.a.oneOfType([b.a.number,b.a.string]),onLinkClickCallback:b.a.func},d.defaultProps={href:"",hrefType:"wc-admin",isOpen:!1,prevLabel:Object(c.__)("Previous Period:","wp-marketing-automations-crm"),reverseTrend:!1,selected:!1,onLinkClickCallback:m.noop},t.a=d},259:function(e,t,a){"use strict";var r=a(0),n=a(4),c=a(9),s=a(8),i=a.n(s),o=a(97),l=a(15),m=a.n(l),u=a(5),b=a(207);var p=function(e){var t,a,s,i=e.label,o=e.orientation,l=e.itemCount,p=e.items,f=Object(u.uniqueId)("bwf-summary-helptext-"),d=Object(b.a)(l),O=m()("bwf-summary",(s="horizontal"===o,(a=d)in(t={})?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t));return Object(r.createElement)(c.NavigableMenu,{"aria-label":i,"aria-describedby":f,orientation:o,stopNavigationEvents:!0},Object(r.createElement)("p",{id:f,className:"screen-reader-text"},Object(n.__)("List of data points available for filtering. Use arrow keys to cycle through the list. Click a data point for a detailed report.","wp-marketing-automations-crm")),Object(r.createElement)("ul",{className:O},p))};p.propTypes={label:i.a.string,orientation:i.a.oneOf(["vertical","horizontal"]).isRequired,items:i.a.node.isRequired,itemCount:i.a.number.isRequired};var f=p,d=(a(249),function(e){var t=e.children,a=e.isDropdownBreakpoint,n=e.label,s=t({}),i=r.Children.count(s)||1,o=a?"vertical":"horizontal",l=Object(r.createElement)(f,{label:n,orientation:o,itemCount:i,items:s});if(!a||i<2)return l;var m=s.find((function(e){return!!e.props.selected}));return m?Object(r.createElement)(c.Dropdown,{className:"bwf-summary",position:"bottom",headerTitle:n,renderToggle:function(e){var t=e.isOpen,a=e.onToggle;return Object(r.cloneElement)(m,{onToggle:a,isOpen:t})},renderContent:function(e){return Object(r.createElement)(f,{label:n,orientation:o,itemCount:i,items:t(e)})}}):l});d.propTypes={children:i.a.func.isRequired,label:i.a.string},d.defaultProps={label:Object(n.__)("Performance Indicators","wp-marketing-automations-crm")};t.a=Object(o.withViewportMatch)({isDropdownBreakpoint:"< large"})(d)},331:function(e,t,a){"use strict";var r=a(0),n=a(4),c=a(9),s=a(111),i=(a(365),a(5)),o=a(7);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,c=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(a.push(s.value),!t||a.length!==t);r=!0);}catch(e){n=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var u={rich:Object(n.__)("Rich Text","wp-marketing-automations-crm"),wc:Object(n.__)("WooCommerce","wp-marketing-automations-crm"),html:Object(n.__)("HTML","wp-marketing-automations-crm"),editor:Object(n.__)("Editor","wp-marketing-automations-crm")};t.a=function(e){var t=e.isOpen,a=e.onRequestClose,m=e.error,b=e.isLoading,p=e.body,f=e.subject,d=e.preHeader,O=e.utm,w=e.type,j=e.conversation,v=e.sourceType,g=e.mode,_=e.template,h=l(Object(r.useState)(!1),2),y=h[0],E=h[1],k={1:Object(n.__)("Email","wp-marketing-automations-crm"),2:Object(n.__)("SMS","wp-marketing-automations-crm"),3:Object(n.__)("WhatsApp","wp-marketing-automations-crm")},N=3==parseInt(v)||4==parseInt(v)||5==parseInt(v)?Object(n.__)("Sent By","wp-marketing-automations-crm"):Object(n.__)("Name","wp-marketing-automations-crm");Object(r.useEffect)((function(){E(!1)}),[]);var S,C,I=function(){a&&a(),E(!1)};return t?Object(r.createElement)(c.Modal,{title:Object(n.__)("Details","wp-marketing-automations-crm"),onRequestClose:I,className:"bwf-admin-modal bwf-message-preview-modal bwf-admin-modal-xxxl"},m&&Object(r.createElement)(c.Notice,{status:"error",onRemove:I},m),b&&Object(r.createElement)(s.a,null),!b&&p&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-fields"},Object(r.createElement)("div",{className:"bwf-message-wrap"},Object(r.createElement)("div",{className:"bwf-h4"},k[g]),Object(r.createElement)("div",{className:"bwf-section"},!Object(i.isEmpty)(j)&&j.hasOwnProperty("source")&&Object(r.createElement)(r.Fragment,null,j.source.hasOwnProperty("type")&&"Direct by"!=j.source.type&&Object(r.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},Object(n.__)("Source","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf_align_center"},j.source.type?j.source.type:"-")),Object(r.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},N),Object(r.createElement)("div",{className:"bwf_align_center"},j.source.hasOwnProperty("name")&&j.source.name?j.source.name:"-"))),!!f&&Object(r.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},Object(n.__)("Subject","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf_align_center"},f," ",!!j&&!!j.c_status&&Object(r.createElement)(r.Fragment,null,function(e){switch(parseInt(e)){case 1:return Object(r.createElement)("span",{className:"bwfcrm-cs-status-square bwfcrm-cs-status-draft"},Object(n.__)("Draft","wp-marketing-automations-crm"));case 3:return Object(r.createElement)("span",{className:"bwfcrm-cs-status-square bwfcrm-cs-status-failed"},Object(n.__)("Failed","wp-marketing-automations-crm"));case 4:return Object(r.createElement)("span",{className:"bwfcrm-cs-status-square bwfcrm-cs-status-bounced"},Object(n.__)("Bounced","wp-marketing-automations-crm"))}}(j.c_status)))),!!d&&Object(r.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},Object(n.__)("Mail Pre-header","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf_align_center"},d)),1===parseInt(g)&&!!w&&Object(r.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},Object(n.__)("Mail Type","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf_align_center"},u[w])),!!O&&Object.keys(O).length>0&&(S=O,(C=[]).push(Object(n.__)("Source","wp-marketing-automations-crm")+": "+S.source),C.push(Object(n.__)("Medium","wp-marketing-automations-crm")+": "+S.medium),S.hasOwnProperty("name")&&!Object(i.isEmpty)(S.name)&&C.push(Object(n.__)("Name","wp-marketing-automations-crm")+": "+S.name),S.hasOwnProperty("content")&&!Object(i.isEmpty)(S.content)&&C.push(Object(n.__)("Content","wp-marketing-automations-crm")+": "+S.content),S.hasOwnProperty("term")&&!Object(i.isEmpty)(S.term)&&C.push(Object(n.__)("Term","wp-marketing-automations-crm")+": "+S.term),Object(r.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},Object(n.__)("UTM Details","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf_align_center"},Object(r.createElement)("div",{className:"bwf-p"},C.join(" | "))))),([2,3].includes(parseInt(g))||y)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-output-email",style:[2,3].includes(parseInt(g))?{whiteSpace:"pre-wrap"}:{}},p))),1===parseInt(g)&&Object(r.createElement)("div",{className:"bwf-p-15 bwf-t-center"},Object(r.createElement)("a",{className:"bwf-model-link",onClick:function(){return E(!y)}},y?Object(n.__)("Less Details","wp-marketing-automations-crm"):Object(n.__)("More Details","wp-marketing-automations-crm")))),!!j&&!!j.c_status&&2===parseInt(j.c_status)&&!Object(i.isEmpty)(_.timeline)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-h4"},Object(n.__)("Timeline","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf-section"},Object.entries(_.timeline).map((function(e){var t=l(e,2),a=t[0],n=t[1];return Object(r.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(r.createElement)("div",{className:"bwf-w-210 bwf_bold bwf_align_center"},n),Object(r.createElement)("div",{className:"bwf_align_center"},Object(o.C)(a)))})))))))):null}},362:function(e,t,a){"use strict";var r=a(46),n=a(0),c=a(4),s=a(17),i=a(18),o=a(176),l=a(7),m=function(e,t,a){return decodeURIComponent(Object(s.f)(e,t,a))};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",b=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,p=location&&location.search?Object(i.parse)(location.search.substring(1)):{},f=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},d=f.broadcasts_nav,O=o.a.getCampaignData(),w=o.a.getCampaignId(),j={overview:{name:Object(c.__)("Overview","wp-marketing-automations-crm"),link:m({},"/broadcast/".concat(w,"/overview"),p)},analytics:{name:Object(c.__)("Analytics","wp-marketing-automations-crm"),link:m({},"/broadcast/".concat(w,"/analytics"),p)},recipient:{name:Object(c.__)("Engagements","wp-marketing-automations-crm"),link:m({},"/broadcast/".concat(w,"/engagements"),p)}};Object(l.X)()&&(j.orders={name:Object(c.__)("Orders","wp-marketing-automations-crm"),link:m({},"/broadcast/".concat(w,"/orders"),p)});var v=Object(r.a)(),g=v.setActiveMultiple,_=v.resetHeaderMenu,h=v.setL2NavType,y=v.setL2Nav,E=v.setBackLink,k=v.setL2Title,N=v.setL2Content,S=v.setBackLinkLabel,C=v.setL2NavAlign,I=v.setPageHeader;return Object(n.useEffect)((function(){_(),s?(h("menu"),y(j)):(!a&&h("menu"),!a&&y(d)),g({leftNav:"broadcasts",rightNav:e}),a&&1===b&&(S("Email Broadcasts"),E(m({},"/broadcasts/email",p))),a&&2===b&&(S("SMS Broadcasts"),E(m({},"/broadcasts/sms",p))),a&&3===b&&(S("WhatsApp Broadcasts"),E(m({},"/broadcasts/whatsapp",p))),t?k(t):s&&k(O.title),s&&C("left"),!a&&u&&N(u),I("Broadcasts")}),[e,b]),!0}},365:function(e,t,a){},487:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(0);var n=function(e,t){var a=Object(r.useRef)();Object(r.useEffect)((function(){a.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}},560:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var r=a(2),n=a(1),c=a.n(n),s=a(10),i=a(3),o=a(11),l=a(59),m=function(e){function t(t,a){var r;return(r=e.call(this)||this).client=t,r.setOptions(a),r.bindMethods(),r.updateResult(),r}Object(o.a)(t,e);var a=t.prototype;return a.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},a.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},a.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},a.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},a.getCurrentResult=function(){return this.currentResult},a.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},a.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,Object(r.a)({},this.options,{variables:void 0!==e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},a.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:Object(l.b)();this.currentResult=Object(r.a)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},a.notify=function(e){var t=this;s.a.batch((function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)}))}))},t}(a(22).a),u=a(100);function b(e,t,a){var n=c.a.useRef(!1),o=c.a.useState(0)[1],l=Object(i.k)(e,t,a),b=Object(u.b)(),p=c.a.useRef();p.current?p.current.setOptions(l):p.current=new m(b,l);var f=p.current.getCurrentResult();c.a.useEffect((function(){n.current=!0;var e=p.current.subscribe(s.a.batchCalls((function(){n.current&&o((function(e){return e+1}))})));return function(){n.current=!1,e()}}),[]);var d=c.a.useCallback((function(e,t){p.current.mutate(e,t).catch(i.i)}),[]);if(f.error&&p.current.options.useErrorBoundary)throw f.error;return Object(r.a)({},f,{mutate:d,mutateAsync:f.mutate})}},724:function(e,t,a){},737:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(9),c=a(4),s=a(176),i=a(459),o=a(7),l=(a(724),a(259)),m=a(250),u=a(19),b=a(49),p=a(32),f=a(13),d=a(47);function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var j=function(e){var t=e.campaign,a=e.pauseUnpauseBroadcast,s=t&&t.type?parseInt(t.type):1,i=Object(o.i)();return Object(r.createElement)(n.Card,{className:"bwf-crm-campaign-stats-overview"},Object(r.createElement)(n.CardHeader,{className:"bwf-crm-overview-report-header"},Object(r.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Overview","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf-display-flex"},Object(r.createElement)("span",{className:"bwf-broadcast-status"},Object(r.createElement)("span",{className:"bwf-broadcast-s-"+t.status},t.status&&i.hasOwnProperty(t.status)?i[t.status].label:t.status)),[3,6].includes(parseInt(t.status))&&Object(r.createElement)(d.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations-crm"),menuPosition:"bottom right",renderContent:function(e){var n=e.onToggle;return Object(r.createElement)(b.a,{isClickable:!0,onInvoke:function(){a(t.id,3===parseInt(t.status)?6:3),n()}},Object(r.createElement)(p.a,{justify:"flex-start"},Object(r.createElement)(p.c,null,Object(r.createElement)(f.a,{icon:3===parseInt(t.status)?"pause":"play",color:"#000"})),Object(r.createElement)(p.c,null,3===parseInt(t.status)?Object(c.__)("Pause","wp-marketing-automations-crm"):Object(c.__)("Resume","wp-marketing-automations-crm"))))}}))),Object(r.createElement)(n.CardBody,{className:"bwf-crm-campaign-stats-overview-card bwf-crm-hide-delta"},Object(r.createElement)(l.a,{key:1},(function(){return[Object(r.createElement)(m.a,{isHomescreen:!0,key:4,value:Number.isInteger(parseInt(t.count))?parseInt(t.count):0,label:Object(c.__)("Contacts","wp-marketing-automations-crm")}),Object(r.createElement)(m.a,{isHomescreen:!0,key:1,value:Number.isInteger(parseInt(t.sent))?parseInt(t.sent):0,label:Object(c.__)("Sent","wp-marketing-automations-crm")})].concat(O(1===s?[Object(r.createElement)(m.a,{isHomescreen:!0,key:2,value:(Number.isInteger(parseFloat(t.open_count))?parseFloat(t.open_rate):0)+" %",label:Object(c.__)("Open Rate","wp-marketing-automations-crm")})]:[]),[Object(r.createElement)(m.a,{isHomescreen:!0,key:3,value:(Number.isInteger(parseFloat(t.click_count))?parseFloat(t.click_rate):0)+" %",label:Object(c.__)("Click Rate","wp-marketing-automations-crm")}),Object(r.createElement)(m.a,{isHomescreen:!0,key:4,value:Number.isInteger(parseInt(t.unsubs))?parseInt(t.unsubs):0,label:Object(c.__)("Unsubscribe","wp-marketing-automations-crm")})])}))),Object(r.createElement)(n.CardFooter,null,Object(r.createElement)(u.a,{href:"admin.php?page=autonami&path=/broadcast/"+t.id+"/analytics",type:"bwf-crm",className:"bwf-a-no-underline"},Object(c.__)("View Details","wp-marketing-automations-crm"))))},v=a(362),g=a(117),_=a(331),h=a(16),y=a.n(h),E=a(137),k=a(5),N=a(367),S=a(487),C=a(1),I=a(560),R=a(17);function T(e,t,a,r,n,c,s){try{var i=e[c](s),o=i.value}catch(e){return void a(e)}i.done?t(o):Promise.resolve(o).then(r,n)}function x(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var c=e.apply(t,a);function s(e){T(c,r,n,s,i,"next",e)}function i(e){T(c,r,n,s,i,"throw",e)}s(void 0)}))}}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,c=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(a.push(s.value),!t||a.length!==t);r=!0);}catch(e){n=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var P=function(){var e=A(Object(r.useState)(!1),2),t=e[0],a=e[1],l=s.a.getCampaignData(),m=Object(i.a)().resetCampaign,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;setTimeout((function(){e&&(m(e),Object(R.j)({path:"/broadcast/"+e.id,page:"autonami"},"/",{})),a(!1)}),2e3)},b=Object(I.a)(function(){var e=x(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y()({path:Object(o.g)("/broadcast/"),method:"POST",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){return u(e.result)},onError:function(){return u()}}),p=Object(C.useCallback)(x(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(!0),t={title:Object(c.__)("Send to Unopen","wp-marketing-automations-crm"),description:"",type:l.type,created_by:Object(o.n)(),createUnopen:l.id},b.mutate(t);case 3:case"end":return e.stop()}}),e)}))),[l]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(E.a,{onRequestClose:function(){a(!1),b.reset()},isLoading:b.isLoading,successMessage:b.isSuccess&&Object(c.__)("Unopen Broadcast created. Redirecting to the broadcast","wp-marketing-automations-crm"),errorMessage:b.isError&&(b.error&&b.error.message?b.error.message:Object(c.__)("Unable to create unopen broadcast","wp-marketing-automations-crm")),isOpen:t}),Object(r.createElement)(n.Button,{isSecondary:!0,onClick:p},Object(c.__)("Send to Unopen","wp-marketing-automations-crm")))},L=function(){var e=s.a.getCampaignData();return 4===parseInt(e.status)&&1===parseInt(e.type)&&!e.is_unopen_grandchild&&Object(r.createElement)(n.Card,{className:"bwf-crm-overview-detail-wrap bwf-card-display-block"},Object(r.createElement)(n.CardHeader,{className:"bwf-crm-overview-report-header"},Object(c.__)("Actions","wp-marketing-automations-crm")),Object(r.createElement)(n.CardBody,null,Object(r.createElement)("div",{className:"bwf-report-row",key:1},Object(r.createElement)("div",{className:"bwf-report-row-label bwf-report-row-full"},Object(c.__)("Send to contacts who haven't opened the emails yet.","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",null,Object(r.createElement)(P,null)))))};function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){U(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function q(e,t,a,r,n,c,s){try{var i=e[c](s),o=i.value}catch(e){return void a(e)}i.done?t(o):Promise.resolve(o).then(r,n)}function F(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var c=e.apply(t,a);function s(e){q(c,r,n,s,i,"next",e)}function i(e){q(c,r,n,s,i,"throw",e)}s(void 0)}))}}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,c=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(a.push(s.value),!t||a.length!==t);r=!0);}catch(e){n=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}t.default=function(e){var t=e.campaignType,a=s.a.getCampaignData(),l=Object(o.j)(),m=Object(i.a)(),u=m.setCampaignValues,b=m.setEditableMode,p=H(Object(r.useState)(!1),2),f=p[0],d=p[1],O=H(Object(r.useState)({loading:!1,status:!1}),2),w=O[0],h=O[1];Object(v.a)("overview","",!0,!0,!1,t);var C=function(){var e=F(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y()({path:Object(o.g)("/broadcast/".concat(a.id,"/overview-stats")),method:"GET"}).then((function(e){200===e.code&&(e.hasOwnProperty("result")&&u("data",D(D({},a),e.result)))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();Object(S.a)((function(){3===parseInt(a.status)&&C()}),5e3);var I,R,T,x=function(){var e=F(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h({status:!0,loading:!0}),e.prev=1,e.next=4,y()({path:Object(o.g)("/broadcast/".concat(t,"/pause-unpause")),method:"POST",data:{status:parseInt(r)},headers:{"X-HTTP-Method-Override":"POST"}}).then((function(e){if(200==e.code){h({status:!0,success:e.message});var t=a;t.status=r,u("data",t)}}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),h({status:!0,error:e.t0.message});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(g.a,null),a&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwfcrm-overview-wrap"},5===parseInt(a.status)&&Object(r.createElement)(n.Notice,{className:"bwf-error-notice",status:"warning",isDismissible:!1},Object(r.createElement)("b",null,Object(c.__)("Halt Reason: ","wp-marketing-automations-crm")),a.data&&a.data.halt_reason?a.data.halt_reason:Object(c.__)("Unknwon error occurred","wp-marketing-automations-crm")),Object(r.createElement)(j,{campaign:a,pauseUnpauseBroadcast:x}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(n.Card,{className:"bwf-crm-overview-detail-wrap"},Object(r.createElement)(n.CardHeader,{className:"bwf-crm-overview-report-header"},Object(r.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Details","wp-marketing-automations-crm"))),Object(r.createElement)(n.CardBody,null,Object(r.createElement)("div",{className:"bwf-report-row",key:1},Object(r.createElement)("div",{className:"bwf-report-row-label"},Object(c.__)("Title","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf-report-row-value"},a.title)),Object(r.createElement)("div",{className:"bwf-report-row",key:2},Object(r.createElement)("div",{className:"bwf-report-row-label"},Object(c.__)("Type","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf-report-row-value"},l[a.type].label)),Object(r.createElement)("div",{className:"bwf-report-row",key:4},Object(r.createElement)("div",{className:"bwf-report-row-label"},Object(c.__)("Sent on","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf-report-row-value"},a.execution_time?Object(o.C)(Object(o.q)(a.execution_time)):" - ")),a.description&&Object(r.createElement)("div",{className:"bwf-report-row",key:5},Object(r.createElement)("div",{className:"bwf-report-row-label"},Object(c.__)("Description","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf-report-row-value"},a.description)),a.data.hasOwnProperty("filters")&&!Object(k.isEmpty)(a.data.filters)&&Object(r.createElement)("div",{className:"bwf-report-row",key:2},Object(r.createElement)("div",{className:"bwf-report-row-label"},Object(c.__)("Segments","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf-report-row-value"},Object(N.b)(a.data.filters))),a.data&&a.data.content&&a.data.content.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-report-row",key:6},Object(r.createElement)("div",{className:"bwf-report-row-label"},a.data.content.length>1?Object(c.__)("Content #","wp-marketing-automations-crm")+(parseInt(t)+1):Object(c.__)("Content","wp-marketing-automations-crm")),Object(r.createElement)("div",{className:"bwf-report-row-value bwf-report-value-modal"},1===parseInt(a.type)&&e.subject&&Object(r.createElement)("span",null,e.subject),Object(r.createElement)(n.Button,{isSecondary:!0,className:"bwf-a-no-underline",onClick:function(){d(!0),h(e)}},Object(c.__)("View details","wp-marketing-automations-crm"))))})),parseInt(a.status)<3&&Object(r.createElement)("div",{className:"bwf-report-row",key:6},Object(r.createElement)("div",{className:"bwf-report-row-label"}),Object(r.createElement)("div",{className:"bwf-report-row-value bwf-report-value-modal"},Object(r.createElement)(n.Button,{isSecondary:!0,className:"bwf-a-no-underline",onClick:function(){return b(!0)}},Object(c.__)("Edit Broadcast","wp-marketing-automations-crm")))),(I=w,R="",T=!0,3==t&&I.hasOwnProperty("whatsAppImage")&&I.whatsAppImage&&I.hasOwnProperty("whatsAppImageSetting")&&I.whatsAppImageSetting.hasOwnProperty("position")&&!Object(k.isEmpty)(I.whatsAppImageSetting.position)&&I.whatsAppImageSetting.hasOwnProperty("imageURL")&&!Object(k.isEmpty)(I.whatsAppImageSetting.imageURL)&&(R="before"===I.whatsAppImageSetting.position?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("img",{src:I.whatsAppImageSetting.imageURL,width:50,height:50}),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:I.body}})):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:I.body}}),Object(r.createElement)("img",{src:I.whatsAppImageSetting.imageURL,width:50,height:50})),T=!1),T&&(R=Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:"editor"===I.type?I.editor.body:I.body}})),Object(r.createElement)(_.a,{isOpen:f,isLoading:!1,onRequestClose:function(){return d(!1)},subject:1===parseInt(a.type)&&I.subject,preHeader:1===parseInt(a.type)&&I.preheader,body:R,type:I.type,sourceType:2,mode:a.type,utm:I.utm})),Object(r.createElement)(E.a,{confirmText:w.confirmText,confirmButtonText:w.buttonConfirm,cancelButtonText:w.buttonCancel,onConfirm:w.onConfirm,isLoading:w.loading,successMessage:w.success,errorMessage:w.error,onRequestClose:function(){return h({status:!1})},isOpen:w.status}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(L,null))))}}}]);