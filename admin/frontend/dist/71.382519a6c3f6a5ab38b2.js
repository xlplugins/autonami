(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{323:function(e,t,c){"use strict";var n=c(0),a=c(15),o=c.n(a);c(324);t.a=function(e){var t=e.white,c=void 0!==t&&t,a=e.image,r=void 0!==a&&a,i=e.long,s=void 0!==i&&i,l=e.width,u=void 0===l?0:l,m=e.height,b=void 0===m?0:m,f=o()({"bwf-placeholder-loader":!0,"is-white":!!c,"is-image":!!r,"is-long":!!s}),d=Object(n.useCallback)((function(){var e={width:u?"".concat(u,"px"):"120px"};return b&&(e.height="".concat(b,"px")),e}),[u]);return Object(n.createElement)("p",{className:f,style:d()})}},324:function(e,t,c){},692:function(e,t,c){},693:function(e,t,c){},777:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(4),o=c(9),r=c(5),i=c(21),s=c(6),l=c(56),u=c(323),m=c(7),b=c(13),f=function(e){var t=e.isSyncable,c=void 0!==t&&t,r=e.isConnected,l=e.id,u=e.connector,f=Object(i.b)(),d=!Object(m.R)()||!Object(m.P)();return Object(n.createElement)("div",{className:"wfco-connector-btns"},Object(n.createElement)("div",{className:"wfco-connector-btns-left"},!d&&!!r&&Object(n.createElement)(o.Button,{isLink:!0,icon:"no-alt",onClick:function(){return f(s.a.showDisconnectModal(u))}},Object(a.__)("Disconnect","wp-marketing-automations-crm"))),Object(n.createElement)("div",{className:"wfco-connector-btns-right"},!!d&&Object(n.createElement)(o.Button,{className:"bwf-display-flex",isPrimary:!0,onClick:function(){return f(s.a.showGetPro(!0))}},Object(n.createElement)(b.a,{icon:"lock",size:15,color:"#ffffff"}),Object(n.createElement)("span",null,Object(a.__)("Locked","wp-marketing-automations-crm"))),!d&&!r&&Object(n.createElement)(o.Button,{isPrimary:!0,onClick:function(){return f(s.a.showSettingsModal(u))}},Object(a.__)("Connect","wp-marketing-automations-crm")),!d&&!!c&&!!parseInt(l)&&!!r&&Object(n.createElement)(o.Button,{isPrimary:!0,onClick:function(){return f(s.a.showSyncModal(u))}},Object(a.__)("Sync","wp-marketing-automations-crm")),!d&&!!r&&Object(n.createElement)(o.Button,{isSecondary:!0,onClick:function(){return f(s.a.showSettingsModal(u))}},Object(a.__)("Settings","wp-marketing-automations-crm"))))},d=function(){return Object(n.createElement)("div",{className:"wfco-col-md-4"},Object(n.createElement)("div",{className:"wfco-connector-wrap","data-type":"<?php echo $this->get_type() ?>"},Object(n.createElement)("div",{className:"wfco-connector_card_outer"},Object(n.createElement)("div",{className:"wfco-connector-img-outer"},Object(n.createElement)("div",{className:"wfco-connector-img"},Object(n.createElement)("div",{className:"wfco-connector-img-section"},Object(n.createElement)(u.a,{height:120,width:120}))),Object(n.createElement)("div",{className:"clear"})),Object(n.createElement)("div",{className:"wfco_connector_info"},Object(n.createElement)("div",{className:"wfco_connector_info_head"},Object(n.createElement)(u.a,null)),Object(n.createElement)("div",{className:"wfco_connector_info_details"},Object(n.createElement)(u.a,{width:180}),Object(n.createElement)(u.a,{width:160}),Object(n.createElement)(u.a,{width:140}))),Object(n.createElement)("div",{className:"clear"})),Object(n.createElement)("div",{className:"wfco-connector-action"},Object(n.createElement)("div",{className:"wfco-connector-btns"},Object(n.createElement)(u.a,null)))))},O=function(e){var t=e.connector,c=e.connector_id,a=e.name,o=e.logo,r=e.description,i=e.is_connected,s=e.is_syncable;e.meta;return Object(n.createElement)("div",{className:"wfco-col-md-4"},Object(n.createElement)("div",{className:"wfco-connector-wrap","data-type":"<?php echo $this->get_type() ?>"},Object(n.createElement)("div",{className:"wfco-connector_card_outer"},!!o&&Object(n.createElement)("div",{className:"wfco-connector-img-outer"},Object(n.createElement)("div",{className:"wfco-connector-img"},Object(n.createElement)("div",{className:"wfco-connector-img-section"},Object(n.createElement)("img",{src:o}))),Object(n.createElement)("div",{className:"clear"})),Object(n.createElement)("div",{className:"wfco_connector_info"},!!a&&Object(n.createElement)("div",{className:"wfco_connector_info_head"},a),!!r&&Object(n.createElement)("div",{className:"wfco_connector_info_details"},r)),Object(n.createElement)("div",{className:"clear"})),Object(n.createElement)("div",{className:"wfco-connector-action"},Object(n.createElement)(f,{isConnected:i,isSyncable:s,connector:t,id:c}))))},j=c(54);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n])}return e}).apply(this,arguments)}var _=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var t=Object(i.b)(),c=Object(i.c)(l.a.shouldShowGetPro),o=!Object(m.P)()&&Object(m.R)()?{modalContent:{proLink:null,title:Object(a.__)("Autonami Pro Connector addon not activated","wp-marketing-automations-crm"),content:Object(a.__)("Activate the addon to connect with your favourite service. This pro addon is available in your account for download.","wp-marketing-automations-crm"),demoLabel:Object(a.__)("Close","wp-marketing-automations-crm")}}:{};return Object(n.createElement)(j.a,v({},o,{isOpen:c,onRequestClose:function(){return t(s.a.showGetPro(!1))}}))},w=c(514),p=c(15),g=c.n(p),E=c(591);c(692);function h(e,t){var c;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(c=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var c=Object.prototype.toString.call(e).slice(8,-1);"Object"===c&&e.constructor&&(c=e.constructor.name);if("Map"===c||"Set"===c)return Array.from(e);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){c&&(e=c);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,i=!1;return{s:function(){c=e[Symbol.iterator]()},n:function(){var e=c.next();return r=e.done,e},e:function(e){i=!0,o=e},f:function(){try{r||null==c.return||c.return()}finally{if(i)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,n=new Array(t);c<t;c++)n[c]=e[c];return n}var C=function(e){var t=e.fields,c=e.values,r=e.submitButtonTitle,i=void 0===r?Object(a.__)("Submit","wp-marketing-automations-crm"):r,s=e.handleSubmit,l=void 0===s?function(){}:s,u=Object(n.useCallback)((function(e){var c={};for(var n in e){var a,o=h(t);try{for(o.s();!(a=o.n()).done;){var r=a.value;if(r&&r.id&&(n===r.id&&!0===r.required&&!e[n])){c.required=!0;break}}}catch(e){o.e(e)}finally{o.f()}}return c}),[t]);return Object(n.createElement)(w.a,{onSubmitCallback:function(e){l(e)},errors:{},initialValues:c||{},validate:u},(function(e){var c=e.getInputProps,r=e.values,s=e.errors,l=e.handleSubmit;return Object(n.createElement)("div",{className:"bwfan-form-fields-wrapper"},Object(n.createElement)("div",{className:"bwfan-form-fields"},!!s&&!!s.required&&Object(n.createElement)(o.Notice,{status:"error",isDismissible:!1},Object(a.__)("Fill all the required fields","wp-marketing-automations-crm")),t.map((function(e,t){return Object(n.createElement)(n.Fragment,{key:t},e.wrap_before&&Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_before}}),e.type?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(E.a,{input:e,formProps:c(e.id),values:r})):e.hint?Object(n.createElement)(n.Fragment,{dangerouslySetInnerHTML:{__html:e.hint},className:g()(e.class)}):null,e.wrap_after&&Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.wrap_after}}))}))),Object(n.createElement)("div",{className:"bwfan-form-field-btns"},Object(n.createElement)(o.Button,{isPrimary:!0,onClick:l},i)))}))},k=c(111),N=c(121);function S(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function M(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?S(Object(c),!0).forEach((function(t){P(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):S(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function P(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}var T=function(){var e=Object(i.b)(),t=Object(i.c)(l.a.settingsModalOpen),c=Object(i.c)(l.a.saveConnectorError),u=Object(i.c)(l.a.saveConnectorStatus),m=!!u&&"idle"===u,b=!!u&&"loading"===u,f=!!u&&"connected"===u,d=Object(i.c)(l.a.getCurrentConnector),O=d.fields_schema,j=d.fields_values,v=d.name,_=void 0===v?"":v,w=d.is_connected,p=d.connector,g=d.connector_id,E=d.meta,h=(E=void 0===E?{}:E).redirect_url,y=void 0===h?"":h,S=E.connect_type,P=void 0===S?"normal":S,T=Object(n.useCallback)((function(t){return e(s.a.saveConnector({connector:p,settings:w?M(M({},t),{},{id:g}):t}))}),[s.a,w,g]),D=Object(n.useCallback)((function(){window.location.href=y}),[y]);return t?Object(n.createElement)(o.Modal,{className:"bwf-admin-modal bwf-admin-modal-medium bwfan-connector-settings-modal",isDismissible:m,shouldCloseOnClickOutside:!1,shoulfCloseOnEsc:!1,onRequestClose:function(){return!!m&&e(s.a.hideSettingsModal())},title:!!_&&Object(a.__)("Connect with ","wp-amrketing-automations-crm")+_},Object(n.createElement)("div",{className:"bwfan-connector-settings-modal-inner"},!!c&&Object(n.createElement)(o.Notice,{status:"error",isDismissible:!0,onRemove:function(){return e(s.a.clearSaveConnectorError())}},c),!!b&&Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(k.a,null)),!!f&&Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(N.a,null),Object(n.createElement)("div",{className:"bwf-h1"},Object(a.__)("Connected / Updated Successfully","wp-marketing-automation-crm"))),!!m&&Object(r.size)(O)>0&&Object(n.createElement)(C,{fields:O,values:j,handleSubmit:function(e){return"redirect_url"===P?D():T(e)},submitButtonTitle:w&&"redirect_url"!==P?Object(a.__)("Update","wp-marketing-automations-crm"):Object(a.__)("Connect","wp-marketing-automations-crm")}),!!m&&0===Object(r.size)(O)&&Object(n.createElement)("p",null,Object(a.__)("No settings available for this connector","wp-marketing-automations-crm")))):null},D=c(137),x=function(){var e=Object(i.b)(),t=Object(i.c)(l.a.disconnectModalOpen),c=Object(i.c)(l.a.deleteConnectorError),o=Object(i.c)(l.a.deleteConnectorStatus),r=!!o&&"idle"===o,u=!!o&&"loading"===o,m=!!o&&"success"===o,b=Object(i.c)(l.a.getCurrentConnector).connector;return Object(n.createElement)(D.a,{isOpen:t,confirmText:Object(a.__)("Disconnecting Connector?","wp-marketing-automations-crm"),confirmDescription:Object(a.__)("All the action, tasks, logs of this connector will be deleted.","wp-marketing-automations-crm"),confirmButtonText:Object(a.__)("Proceed","wp-marketing-automations-crm"),cancelButtonText:Object(a.__)("Cancel","wp-marketing-automations-crm"),onConfirm:function(){return e(s.a.deleteConnector(b))},isLoading:u,successMessage:!!m&&Object(a.__)("Disconnected Successfully!","wp-marketing-automations-crm"),errorMessage:!!c&&c,onRequestClose:function(){return!!r&&e(s.a.hideDisconnectModal())}})},A=function(){var e=Object(i.b)(),t=Object(i.c)(l.a.syncModalOpen),c=Object(i.c)(l.a.syncConnectorError),o=Object(i.c)(l.a.syncConnectorStatus),r=!!o&&"idle"===o,u=!!o&&"loading"===o,m=!!o&&"success"===o,b=Object(i.c)(l.a.getCurrentConnector),f=b.connector,d=b.connector_id;return Object(n.createElement)(D.a,{isOpen:t,confirmText:Object(a.__)("Sync Connector?","wp-marketing-automations-crm"),confirmDescription:Object(a.__)("All the data of this Connector will be Synced.","wp-marketing-automations-crm"),confirmButtonText:Object(a.__)("Proceed","wp-marketing-automations-crm"),cancelButtonText:Object(a.__)("Cancel","wp-marketing-automations-crm"),onConfirm:function(){return e(s.a.syncConnector({connector:f,id:d}))},isLoading:u,successMessage:!!m&&Object(a.__)("Synced Successfully!","wp-marketing-automations-crm"),errorMessage:!!c&&c,onRequestClose:function(){return!!r&&e(s.a.hideSyncModal())}})},B=c(17),L=function(e){var t=e.wfco_connector,c=void 0===t?"":t,a=e.access_token,o=void 0===a?"":a,r=Object(i.b)(),u="success"===Object(i.c)(l.a.getConnectorsStatus),m=Object(n.useCallback)((function(){r(s.a.showSettingsModal(c)),r(s.a.saveConnector({connector:c,settings:{access_token:o}})),Object(B.j)({page:e.page},e.path,{})}),[c,o,r]);return Object(n.useEffect)((function(){"bwfco_slack"===c&&o&&u&&m()}),[c,o,m,u]),null},I=function(e){var t=e.bitly,c=void 0===t?"":t,a=e.login,o=void 0===a?"":a,r=e.access_token,u=void 0===r?"":r,m=Object(i.b)(),b="success"===Object(i.c)(l.a.getConnectorsStatus),f=Object(n.useCallback)((function(){m(s.a.showSettingsModal("bwfco_bitly")),m(s.a.saveConnectorSuccess({connector:"bwfco_bitly",id:"bitly"})),Object(B.j)({page:e.page},e.path,{});var t=setTimeout((function(){m(s.a.hideSettingsModal()),clearInterval(t)}),3e3)}),[m]);return Object(n.useEffect)((function(){"yes"===c&&u&&o&&f()}),[c,u,o,f,b]),null},q=function(e){var t=e.wfco_connector,c=void 0===t?"":t,o=e.status,r=void 0===o?0:o,u=e.error_msg,m=Object(i.b)(),b="success"===Object(i.c)(l.a.getConnectorsStatus);return Object(n.useEffect)((function(){if("bwfco_mautic"===c&&"success"===r&&b){m(s.a.showSettingsModal(c)),m(s.a.dummyConnectorSuccess()),Object(B.j)({page:e.page},e.path,{});var t=setTimeout((function(){m(s.a.hideSettingsModal()),clearInterval(t)}),3e3)}if("bwfco_mautic"===c&&"failed"===r&&b){m(s.a.showSettingsModal(c));var n=u||Object(a.__)("Unknown Error Occurred","wp-marketing-automations-crm");m(s.a.saveConnectorFailed(n))}}),[c,r,b]),null},R=c(46),F=c(35),H=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,c=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},a=Object(R.a)(),o=a.setActiveMultiple,r=a.setL2NavType,i=a.setL2Nav,s=a.resetHeaderMenu,l=a.setPageHeader,u=a.setPageCountData,m=Object(F.a)(),b=m.getPageCountData,f=b();return Object(n.useEffect)((function(){f!==t&&(s(),o({leftNav:"connectors",rightNav:e}),r("menu"),i(c.connectors_nav),l("Connectors"),t&&u(t))}),[e,t]),!0},z=c(18),U=(c(693),function(e){var t=e.connector,c=void 0===t?"":t,a=e.code,o=void 0===a?"":a,r=e.state,u=void 0===r?"":r,m=e.client_id,b=void 0===m?"":m,f=e.client_secret,d=void 0===f?"":f,O=Object(i.b)(),j="success"===Object(i.c)(l.a.getConnectorsStatus),v=Object(i.c)(l.a.getConnector("bwfco_keap")),_=v&&v.fields_values?v.fields_values:{},w=v&&v.fields_schema?v.fields_schema:{},p=Object(n.useCallback)((function(){O(s.a.showSettingsModal("bwfco_keap")),O(s.a.saveConnector({connector:"bwfco_keap",settings:{code:o,state:u,client_id:b,client_secret:d}}))}),[c,o,u,O,b,d]);return Object(n.useEffect)((function(){if((_.code||_.state)&&_.client_id&&_.client_secret){var t={client_id:_.client_id,client_secret:_.client_secret};O(s.a.setConnectorSchema({connector:"bwfco_keap",schema:w,values:t,saveStatus:"connected"})),Object(B.j)({page:e.page},e.path,{})}}),[_]),Object(n.useEffect)((function(){"keap"===c&&o&&u&&j&&p()}),[c,o,u,p,j]),null});function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n])}return e}).apply(this,arguments)}var $=Object(n.memo)((function(e){var t=e.size,c=void 0===t?15:t;return Object(n.createElement)("div",{className:"wrap wfco_global wfco_connector_listing"},Object(n.createElement)("div",{className:"wfco_connector_listing_wrap wfco_clearfix"},Object(n.createElement)("div",{className:"wfco-row"},Array.from(Array(c).keys()).map((function(e){return Object(n.createElement)(d,{key:e})})))))})),J=Object(n.memo)((function(e){var t=e.selected,c=void 0===t?"all":t,u=location&&location.search?Object(z.parse)(location.search.substring(1)):{};L(u),I(u),q(u),U(u);var b=Object(i.b)(),f=Object(i.c)(l.a.getConnectorsStatus),d=Object(i.c)(l.a.getConnectorsError),j=Object(i.c)(l.a.getConnectors),v="loading"===f,w=Object(i.c)(l.a.getConnectorsCount),p=0;Object(n.useEffect)((function(){Object(m.d)(Object(a.__)("Connectors","wp-marketing-automations-crm")),b(s.a.getConnectors()),p=0}),[]);var g={all:Object(a.__)("No connector found","wp-marketing-automations-crm"),active:Object(a.__)("No active connector found","wp-marketing-automations-crm"),inactive:Object(a.__)("No inactive connector found","wp-marketing-automations-crm")};H(Object(a.__)("Connectors","wp-marketing-automations-crm"),c,w);var E=Object(n.useMemo)((function(){if(!Object(r.isEmpty)(j)){var e=[],t={all:0,active:0,inactive:0};return Object.keys(j).sort().map((function(n){var a=j[n];("all"===c||"inactive"===c&&!a.is_connected||"active"===c&&a.is_connected)&&(p++,e.push(n)),t.all++,a.is_connected?t.active++:t.inactive++})),b(s.a.getCount(t)),Object(n.createElement)("div",{className:"wrap wfco_global wfco_connector_listing"},Object(n.createElement)("div",{className:"wfco_connector_listing_wrap wfco_clearfix"},Object(n.createElement)("div",{className:"wfco-row"},e.map((function(e){return Object(n.createElement)(O,G({key:e,connector:e},j[e]))})),0===p&&Object(n.createElement)("div",{className:"bwf-p"},g[c]))))}}),[j,c]);return Object(n.createElement)("div",{className:"wrap bwfan_global bwfan_global_settings bwfan_connectors"},Object(n.createElement)("div",{className:"bwfan_global_settings_wrap"},!!d&&Object(n.createElement)(o.Notice,{status:"error"},d),!!v&&Object(n.createElement)($,null),!v&&!!j&&E,Object(n.createElement)(_,null),Object(n.createElement)(T,null),Object(n.createElement)(x,null),Object(n.createElement)(A,null)))}));t.default=J}}]);