(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{111:function(e,t,a){"use strict";var n=a(0);a(133);t.a=function(e){var t=e.size,a=void 0===t?"xl":t;return Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)("div",{className:"bwf-spin-loader bwf-spin-loader-".concat(a)}),Object(n.createElement)("div",{className:"bwf_clear_30"}))}},119:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))},121:function(e,t,a){"use strict";var n=a(0);a(135);t.a=function(e){return Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{className:"bwf_align_center"},Object(n.createElement)("div",{className:"bwf-w-100",dangerouslySetInnerHTML:{__html:bwfcrm_contacts_data.icons.success}})))}},122:function(e,t,a){"use strict";var n=a(0);a(136);t.a=function(e){return Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{className:"bwf_align_center"},Object(n.createElement)("div",{className:"bwf-w-100",dangerouslySetInnerHTML:{__html:bwfcrm_contacts_data.icons.error}})))}},133:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){"use strict";var n=a(0),r=a(111),c=a(121),s=a(122),i=a(9),o=a(4);t.a=function(e){var t=e.confirmText,a=void 0===t?"":t,l=e.confirmButtonText,u=void 0===l?"":l,m=e.cancelButtonText,b=void 0===m?"":m,f=e.onConfirm,O=void 0===f?function(){}:f,d=e.isLoading,w=void 0!==d&&d,j=e.successMessage,p=void 0===j?"":j,g=e.errorMessage,v=void 0===g?"":g,_=e.onRequestClose,y=e.isOpen,E=void 0!==y&&y,h=e.confirmDescription,k=void 0===h?"":h,N=e.isDelete,P=void 0!==N&&N;Object(n.useEffect)((function(){(p||v)&&setTimeout((function(){_&&_()}),2e3)}),[p,v]);return E?Object(n.createElement)(i.Modal,{title:"",onRequestClose:function(){return _()},className:"bwf-c-s-delete-model bwf-admin-modal bwf-admin-modal-small bwf-admin-modal-no-header"},P&&Object(n.createElement)("div",{className:"bwf-h4"},Object(o.__)("Delete","wp-marketing-automations-crm")),w&&Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(r.a,null)),!!p&&Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(c.a,null),Object(n.createElement)("div",{className:"bwf-h1"},p)),!!v&&Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(s.a,null),Object(n.createElement)("div",{className:"bwf-h1"},v)),!w&&!p&&!v&&Object(n.createElement)("div",{className:"bwf-t-center bwf-form-buttons"},P?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-h2"},Object(o.__)("Are you sure?","wp-marketing-automations-crm")),Object(n.createElement)("div",{className:"bwf_clear_15"}),Object(n.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},Object(o.__)("Once you delete this item. It will no longer available.","wp-marketing-automations-crm"))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-h1"},a),!!k&&Object(n.createElement)("p",null,k)),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:P?"bwf_text_right":""},Object(n.createElement)(i.Button,{isTertiary:!0,style:{marginRight:"20px"},onClick:function(){_&&_()}},b),Object(n.createElement)(i.Button,{isPrimary:!0,onClick:function(){O&&O()},className:P?"bwf-delete-btn":""},u)))):null}},186:function(e,t,a){"use strict";var n=a(119),r=a(27),c=a(0);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}t.a=function(e){var t=e.icon,a=e.size,i=void 0===a?24:a,o=Object(r.a)(e,["icon","size"]);return Object(c.cloneElement)(t,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({width:i,height:i},o))}},195:function(e,t,a){"use strict";var n=a(0),r=a(95),c=Object(n.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(n.createElement)(r.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"}));t.a=c},196:function(e,t,a){"use strict";var n=a(0),r=a(95),c=Object(n.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(n.createElement)(r.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"}));t.a=c},203:function(e,t,a){"use strict";var n=a(0),r=a(95),c=Object(n.createElement)(r.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(n.createElement)(r.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"}));t.a=c},204:function(e,t,a){"use strict";var n=a(0),r=a(95),c=Object(n.createElement)(r.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(n.createElement)(r.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));t.a=c},477:function(e,t,a){"use strict";var n=a(46),r=a(0),c=a(4),s=a(7),i=a(35);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"left",m=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],b=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},f=b.carts_nav,O=Object(n.a)(),d=O.setActiveMultiple,w=O.resetHeaderMenu,j=O.setL2NavType,p=O.setL2Nav,g=O.setBackLink,v=O.setL2Title,_=O.setL2NavAlign,y=O.setPageHeader,E=O.setPageCountData,h=Object(i.a)(),k=h.getPageCountData,N=k();return Object(r.useEffect)((function(){w(),Object(s.O)()&&j("menu"),Object(s.O)()&&m&&p(f),d({leftNav:"carts",rightNav:e}),o&&g(o),a&&v(a),_(u),!Object(s.O)()&&v(Object(c.__)("Cart Tracking","wp-marketing-automations-crm")),y("Carts"),E(l(l({},N),t))}),[e,t]),!0}},688:function(e,t,a){},761:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(477),c=a(16),s=a.n(c),i=a(7),o=a(4),l=a(9),u=a(130),m=a(15),b=a.n(m),f=a(47),O=a(49),d=a(32),w=a(137),j=(a(688),a(5)),p=a(13);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(e,t,a,n,r,c,s){try{var i=e[c](s),o=i.value}catch(e){return void a(e)}i.done?t(o):Promise.resolve(o).then(n,r)}function E(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function s(e){y(c,n,r,s,i,"next",e)}function i(e){y(c,n,r,s,i,"throw",e)}s(void 0)}))}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=function(e){var t=e.match.params.cartType,a=e.match.params.id;Object(r.a)(t,"","Card #"+a,"admin.php?page=autonami&path=/carts/".concat(t),"left",!1);var c=h(Object(n.useState)(25),2),m=c[0],g=c[1],_=h(Object(n.useState)(0),2),y=_[0],k=_[1],N=h(Object(n.useState)(0),2),P=N[0],x=N[1],S=h(Object(n.useState)([]),2),L=S[0],T=S[1],A=h(Object(n.useState)(!1),2),C=A[0],D=A[1],M=h(Object(n.useState)({}),2),I=M[0],B=M[1],R=h(Object(n.useState)(!1),2),H=R[0],z=R[1],F=h(Object(n.useState)(),2),q=F[0],G=F[1],V=h(Object(n.useState)({status:!1,loading:!1}),2),J=V[0],Q=V[1],U=function(){var e=E(regeneratorRuntime.mark((function e(){var t,n,r,c,l,u,b,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},z(!0),e.prev=2,n="",t&&t.search&&(n="search=".concat(t.search)),e.next=7,s()({method:"GET",path:Object(i.g)("/carts/".concat(a,"/tasks/?offset=").concat(y,"&limit=").concat(m,"&").concat(n))});case 7:if((r=e.sent)&&r.result&&Array.isArray(r.result)){e.next=11;break}return G(Object(o.__)("Blank response returned","wp-marketing-automations-crm")),e.abrupt("return");case 11:c=r.total_count,l=r.result,u=r.limit,b=r.offset,c&&x(parseInt(c)),u&&g(parseInt(u)),b&&k(parseInt(b)),l&&T(l),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),G(e.t0&&e.t0.message?e.t0.message:Object(o.__)("Unknown Error Occurred","wp-marketing-automations-crm"));case 21:z(!1);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Object(i.d)("Cart Task #"+a),U()}),[]);var $=[{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30"},{key:"task",label:Object(o.__)("Task","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"actions",label:Object(o.__)("Action","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"data",label:Object(o.__)("Data","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"automation",label:Object(o.__)("Automation","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"date",label:Object(o.__)("Date","wp-marketing-automations-crm"),isLeftAligned:!0},{key:"show",label:"",isLeftAligned:!0},{key:"status",label:Object(o.__)("Status","wp-marketing-automations-crm"),isLeftAligned:!0,cellClassName:"bwf-col-center"}],K=function(e){e!==m&&(g(m),U())},W=function(){var e=E(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q({status:!0,loading:!0}),Object(j.isEmpty)(t)){e.next=12;break}return e.prev=2,e.next=5,s()({path:Object(i.g)("/automations/run-tasks"),method:"POST",data:{task_ids:t}}).then((function(e){200===e.code?(Q({status:!0,success:e.message}),setTimeout((function(){U()}),1e3)):Q({status:!0,error:e.message})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),Q({status:!0,error:e.t0.message});case 10:e.next=13;break;case 12:Q({status:!0,error:Object(o.__)("No Task Selected","wp-marketing-automations-crm")});case 13:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),X=function(e){return Object(n.createElement)(f.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations-crm"),menuPosition:"bottom right",renderContent:function(t){var a=t.onToggle;return Object(n.createElement)(n.Fragment,null,"t_0"==e.status&&Object(n.createElement)(O.a,{isClickable:!0,onInvoke:function(){W([e.id]),a()}},Object(n.createElement)(d.a,{justify:"flex-start"},Object(n.createElement)(d.c,null,Object(n.createElement)(p.a,{icon:"play"})),Object(n.createElement)(d.c,null,Object(o.__)("Run Now","wp-marketing-automations-crm")))),Object(n.createElement)(O.a,{isClickable:!0,onInvoke:function(){Q({status:!0,taskId:e.id}),a()}},Object(n.createElement)(d.a,{justify:"flex-start"},Object(n.createElement)(d.c,null,Object(n.createElement)(p.a,{icon:"trash"})),Object(n.createElement)(d.c,null,Object(o.__)("Delete","wp-marketing-automations-crm")))))}})},Y={l_0:Object(o.__)("Failed","wp-marketing-automations-crm"),l_1:Object(o.__)("Completed","wp-marketing-automations-crm"),t_0:Object(o.__)("Scheduled","wp-marketing-automations-crm"),t_1:Object(o.__)("Paused","wp-marketing-automations-crm")},Z=Array.isArray(L)?L.map((function(e){return[{display:X(e),value:""},{display:"#".concat(e.id),value:""},{display:e.task_integration+(e.task_integration_action?" : ".concat(e.task_integration_action):""),value:""},{display:Object(n.createElement)("ul",{dangerouslySetInnerHTML:{__html:e.task_details}}),value:""},{display:e.automation_name,value:""},{display:Object(n.createElement)("span",{dangerouslySetInnerHTML:{__html:e.task_date}}),value:""},{display:Object(n.createElement)(l.Button,{icon:Object(n.createElement)(p.a,{icon:"view",size:30}),onClick:function(){B(e),D(!0)}}),value:""},{display:Y[e.status]?Y[e.status]:"-",value:e.status}]})):[],ee=function(){var e=E(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q(v(v({},J),{},{loading:!0})),!J.hasOwnProperty("taskId")){e.next=10;break}return e.prev=2,e.next=5,s()({path:Object(i.g)("/automations/tasks/"),method:"DELETE",data:{task_ids:[J.taskId]}}).then((function(e){200==e.code&&(Q(v(v({},J),{},{success:e.message})),setTimeout((function(){U()}),1e3))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),Q(v(v({},J),{},{error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,q&&Object(n.createElement)(l.Notice,{status:"error"},q),Object(n.createElement)("div",{className:"bwf-flex"},Object(n.createElement)("div",{className:"bwf_main_heading_inline bwf-mr-15"},Object(o.__)("Tasks","wp-marketing-automations-crm"))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(u.a,{className:b()("bwfcrm-forms-list-table",{"has-search":!0}),rows:Z,headers:$,query:{paged:y/m+1},rowsPerPage:m,totalRows:P,isLoading:H,onPageChange:function(e,t){k((e-1)*m),U()},onQueryChange:function(e){return"per_page"!==e?function(){}:K},rowHeader:!0,showMenu:!1,hideHeader:"yes",emptyMessage:Object(o.__)("No tasks found","wp-marketing-automations-crm")}),Object(n.createElement)(w.a,{confirmText:Object(o.__)("Are you sure you want to delete this task ?","wp-marketing-automations-crm"),confirmButtonText:Object(o.__)("Confirm","wp-marketing-automations-crm"),cancelButtonText:Object(o.__)("Cancel","wp-marketing-automations-crm"),onConfirm:ee,isLoading:J.loading,successMessage:J.success,errorMessage:J.error,onRequestClose:function(){return Q({status:!1})},isOpen:J.status,isDelete:!0}),C&&Object(n.createElement)(l.Modal,{title:"Details",onRequestClose:function(){return D(!1)},className:"bwf-message-preview-modal bwf-admin-modal bwf-admin-modal-medium bwf-task-model"},Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(n.createElement)("div",{className:"bwf-w-150 bwf_bold bwf_align_center"},Object(o.__)("Automation","wp-marketing-automations-crm")),Object(n.createElement)("div",{className:"bwf_align_center"},I.automation_name)),Object(n.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(n.createElement)("div",{className:"bwf-w-150 bwf_bold bwf_align_center"},Object(o.__)("Event","wp-marketing-automations-crm")),Object(n.createElement)("div",{className:"bwf_align_center"},I.automation_source+" : "+I.automation_event)),Object(n.createElement)("div",{className:"bwf-p-15 bwf-bb-grey"},Object(n.createElement)("div",{className:"bwf-w-150 bwf_bold bwf_align_center"},Object(o.__)("Action","wp-marketing-automations-crm")),Object(n.createElement)("div",{className:"bwf_align_center"},I.task_integration+(I.task_integration_action?" : ".concat(I.task_integration_action):""))),Object(n.createElement)("div",{className:"bwf-p-15 bwf-bb-grey bwf-task-details"},Object(n.createElement)("ul",{className:"bwf_align_center",dangerouslySetInnerHTML:{__html:I.task_details}})),!Object(j.isEmpty)(I.task_message)&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-h3 bwf-pt-15"},Object(o.__)("Notes","wp-marketing-automations-crm")),Object.entries(I.task_message).map((function(e){var t=h(e,2),a=t[0],r=t[1];return Object(n.createElement)("div",{className:"bwf-p-15"},Object(n.createElement)("div",{className:"bwfcrm-task_notes_card"},r),Object(n.createElement)("div",{className:"bwfcrm-task_notes_time"},Object(n.createElement)("i",null,a)))}))))))}}}]);